<!DOCTYPE html>
<html lang="ja">
<head prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb#">
  

  <meta charset="UTF-8">



<!-- Google Search Console -->
<meta name="google-site-verification" content="LhFi5Dhj5KOfXR186QkncucRdBpmVd8B19v-7zcAmlY" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

  <meta name="description" content="天才星人まくのPythonノート">

<meta name="keywords" content="Android,Awk,Best Practice,C/C++,CSS,Docker,Fintech,Git,GitHub,Gradle,HTML5,Java,JavaScript,Middleman,MetaTrader,MT4,MT5,Perforce,Python,Ruby,Sed,Shell Script,Vim">

<!-- You can use open graph tags to customize link previews.
Learn more: https://developers.facebook.com/docs/sharing/webmasters -->
<meta property="og:site_name" content="天才まくまくノート" />
<meta property="og:url"     content="https://maku77.github.io/python/create-directory.html" />
<meta property="og:type"    content="website" />
<meta property="og:image"   content="https://maku77.github.io/assets/img/logo-python.png" />

  <meta property="og:description" content="天才星人まくのPythonノート">

<meta property="fb:app_id"  content="447708168769292" />

<link rel="stylesheet" href="/assets/css/default.css">
<link rel="stylesheet" href="/assets/css/highlight.css">

<!-- Favicons start -->
  <link rel="icon" sizes="16x16 32x32 48x48 64x64" href="/assets/img/favicon/favicon.ico"/>
  <!--[if IE]>
  <link rel="shortcut icon" href="favicon.ico"/>
  <![endif]-->
  <!-- Optional: Android & iPhone -->
  <link rel="apple-touch-icon-precomposed" href="/assets/img/favicon/favicon-152.png"/>
<!-- Favicons end -->

<script src="/assets/js/jquery-3.2.1.min.js"></script>



  <meta property="og:title" content="ディレクトリを作成する (os.mkdir, os.makedirs) | まくまくPythonノート" />
  <title>ディレクトリを作成する (os.mkdir, os.makedirs) - まくまくPythonノート</title>

  <!-- Ad (Google) -->
  
</head>
<body>

<div class="xPageHeader">
  <a href="/python/">
    <img src="/assets/img/logo-python.png" class="xPageHeader_logo">
  </a>
  <a href="/python/">
    <div class="xPageHeader_category">
    まくまくPythonノート
    </div>
  </a>
  <div class="xPageHeader_title">ディレクトリを作成する (os.mkdir, os.makedirs)</div>
</div>

<div id="xBody">
  

<div class="xBreadCrumbContainer">
  <div class="xBreadCrumb"><a href="/">&#x1F3E0;HOME</a> &gt; <a href="/python/">Python</a></div>
  <div class="xPageDate">2013-05-08</div>
</div>

  
<div style="color:red;">/home/runner/work/maku77.github.io/maku77.github.io<b>/python/create-directory.md</b></div>



  <form action="https://www.google.co.jp/cse" id="cse-search-box">
  <div class="xSearchBar">
    <input type="hidden" name="cx" value="partner-pub-6317852277883092:5930376365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input class="xSearchBar_text" type="search" name="q" placeholder="ノートを検索できます…" size="55" results="5" autocomplete="off" /><input class="xSearchBar_button" type="submit" name="sa" value="&#128269; 検索 " />
  </div>
</form>



  <div id="xContainer">
    <div id="xContainer_main">
      <!-- SNS ボタン（上） -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">




<ul class="xSnsButtons">
  <!-- Twitter -->
  <li class="xSnsButtons_twitter">
    <a rel="nofollow" href="https://twitter.com/share?text=まくまくPythonノート： ディレクトリを作成する (os.mkdir, os.makedirs)&url=https://maku77.github.io/python/create-directory.html"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'tweet_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-twitter"></i><span class="xSnsButtons_label">ツイート</span>
    </a>
  </li>

  <!-- Facebook -->
  <li class="xSnsButtons_facebook">
    <a rel="nofollow" href="https://www.facebook.com/share.php?u=https://maku77.github.io/python/create-directory.html"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'facebook_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-facebook-square"></i><span class="xSnsButtons_label">シェア</span>
    </a>
  </li>

  <!-- Pocket -->
  <li class="xSnsButtons_pocket">
    <a rel="nofollow" href="https://getpocket.com/edit?url=https://maku77.github.io/python/create-directory.html"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'pocket_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-get-pocket"></i><span class="xSnsButtons_label">Pocket</span>
    </a>
  </li>
</ul>



      

      <!-- 概要 -->
      

      <div class="xWidget">
        

      </div>

      <div class="xContent">
        <!-- 本文 -->
        <p>ディレクトリの作成は、<code class="language-plaintext highlighter-rouge">os.mkdir()</code> あるいは <code class="language-plaintext highlighter-rouge">os.makedirs()</code> で行えます。
後者の <code class="language-plaintext highlighter-rouge">os.makedirs()</code> を使用すると、深いディレクトリ階層を一度に作ることができます。</p>

<h1 id="ディレクトリ作成の基本">ディレクトリ作成の基本</h1>

<p><code class="language-plaintext highlighter-rouge">os.mkdir()</code> を使用して、空のディレクトリを作成することができます。</p>

<h4 id="osmkdir-の説明">os.mkdir の説明</h4>
<blockquote>
  <p>os.mkdir(path, mode=0o777, *, dir_fd=None)</p>

  <p>Create a directory.</p>

  <p>If dir_fd is not None, it should be a file descriptor open to a directory, and path should be relative; path will then be relative to that directory.
dir_fd may not be implemented on your platform.
If it is unavailable, using it will raise a NotImplementedError.</p>

  <p>The mode argument is ignored on Windows.</p>
</blockquote>

<p>下記は、カレントディレクトリに <code class="language-plaintext highlighter-rouge">aaa</code> というディレクトリを作成する例です。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s">'./aaa'</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="複数階層のディレクトリを一気に作成する">複数階層のディレクトリを一気に作成する</h1>

<p>階層の深いディレクトリ構造を一度に作成するには、<code class="language-plaintext highlighter-rouge">os.mkdir</code> の代わりに <code class="language-plaintext highlighter-rouge">os.makedirs</code> を使用します。</p>

<h4 id="osmakedirs-の説明">os.makedirs の説明</h4>
<blockquote>
  <p>makedirs(path [, mode=0o777][, exist_ok=False])</p>

  <p>Super-mkdir; create a leaf directory and all intermediate ones. Works like mkdir, except that any intermediate path segment (not just the rightmost) will be created if it does not exist. If the target directory with the same mode as we specified already exists, raises an OSError if exist_ok is False, otherwise no exception is raised. This is recursive.</p>
</blockquote>

<p>下記の例では、カレントディレクトリ以下に、<code class="language-plaintext highlighter-rouge">aaa/bbb/ccc</code> という深い階層のディレクトリを作成しています。
<code class="language-plaintext highlighter-rouge">aaa</code> ディレクトリや、<code class="language-plaintext highlighter-rouge">aaa/bbb</code> ディレクトリが存在しない場合は、ついでに作成してくれます。</p>

<h4 id="使用例">使用例</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">'aaa/bbb/ccc'</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="すでにディレクトリが存在している場合の-fileexistserror">すでにディレクトリが存在している場合の FileExistsError</h1>

<p>すでに存在するディレクトリと同じ名前のディレクトリを作成しようとすると、<code class="language-plaintext highlighter-rouge">os.mkdir()</code> や <code class="language-plaintext highlighter-rouge">os.makedirs()</code> は <strong>FileExistsError</strong> を発生させます（ディレクトリだけど <strong>FileExistsError</strong> です）。
<code class="language-plaintext highlighter-rouge">os.makedirs()</code> で、深い階層のディレクトリを作成する場合は、上位のディレクトリは存在していても大丈夫ですが、最下位のディレクトリが存在している場合に <strong>FileExistsError</strong> になります。</p>

<p>下記の例では、この <strong>FileExistsError</strong> エラーをハンドルしています。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">os</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s">'foo'</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">FileExistsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">strerror</span><span class="p">)</span>  <span class="c1"># エラーメッセージ ('Cannot create a file when that file already exists')
</span>    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">errno</span><span class="p">)</span>     <span class="c1"># エラー番号 (17)
</span>    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">filename</span><span class="p">)</span>  <span class="c1"># 作成できなかったディレクトリ名 ('foo')
</span>    <span class="n">sys</span><span class="p">.</span><span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<p>上記の例では、エラーオブジェクトの各プロパティを個別に出力していますが、エラーオブジェクトをそのまま文字列に変換 <code class="language-plaintext highlighter-rouge">str(e)</code> して出力すると、まともなエラーメッセージとして使用できます。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">except</span> <span class="nb">FileExistsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>  <span class="c1">#=&gt; [WinError 183] Cannot create a file when that file already exists: 'foo'
</span>    <span class="n">sys</span><span class="p">.</span><span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="fileexistserror-の抑制">FileExistsError の抑制</h2>

<p><code class="language-plaintext highlighter-rouge">FileExistsError</code> エラーの発生を抑制する（すでに存在する場合は何も起こらないようにする）には、以下のような方法があります。</p>

<ul>
  <li>あらかじめ <code class="language-plaintext highlighter-rouge">os.path.exists()</code> などを使ってディレクトリが存在していない場合だけ作成する</li>
  <li><code class="language-plaintext highlighter-rouge">os.makedirs()</code> の場合は、<code class="language-plaintext highlighter-rouge">exist_ok=True</code> オプションを指定してエラーを抑制可能</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">os.mkdir()</code> の方には <code class="language-plaintext highlighter-rouge">exist_ok</code> オプションは用意されていないので、このオプションを使いたい場合は、深い階層のディレクトリを作成しない場合でも、<code class="language-plaintext highlighter-rouge">os.makedirs()</code> を使用する必要があります。</p>

<h4 id="ディレクトリが既にある場合にエラーを発生させない">ディレクトリが既にある場合にエラーを発生させない</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">'aaa'</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>


      </div>

      <!-- Ad (楽天) -->
      

      <!-- SNS ボタン（下） -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">




<ul class="xSnsButtons">
  <!-- Twitter -->
  <li class="xSnsButtons_twitter">
    <a rel="nofollow" href="https://twitter.com/share?text=まくまくPythonノート： ディレクトリを作成する (os.mkdir, os.makedirs)&url=https://maku77.github.io/python/create-directory.html"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'tweet_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-twitter"></i><span class="xSnsButtons_label">ツイート</span>
    </a>
  </li>

  <!-- Facebook -->
  <li class="xSnsButtons_facebook">
    <a rel="nofollow" href="https://www.facebook.com/share.php?u=https://maku77.github.io/python/create-directory.html"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'facebook_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-facebook-square"></i><span class="xSnsButtons_label">シェア</span>
    </a>
  </li>

  <!-- Pocket -->
  <li class="xSnsButtons_pocket">
    <a rel="nofollow" href="https://getpocket.com/edit?url=https://maku77.github.io/python/create-directory.html"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'pocket_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-get-pocket"></i><span class="xSnsButtons_label">Pocket</span>
    </a>
  </li>
</ul>



      
      <div class="xArticle_up">
        <a href="/python/"><span class="xArticle_up_label">まくまくPythonノート</span><br>へ戻る</a>
      </div>

    </div>

    <div id="xContainer_sidebar"><style>
.local-logo {
  position: relative;
  border: none;
  background: none;
}
.local-logo img {
  width: 100%;
  vertical-align: bottom;
  border: none;
  border-radius: 15px;
}
.local-logo figcaption {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  text-align: center;
  font-size: 12pt;
  color: white;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 15px 15px 0 0;
}
</style>

<div id="xContainer_sidebar_notFixed">
  <div data-sticky><nav class="xNav">
  <div class="xNav_header">カテゴリ一覧</div>
  <ul>
        <li><a href="/memo/">いろいろ</a>
        <li><a href="/android/">Android</a>
        <li><a href="/ansible/">Ansible</a>
        <li><a href="/blender/">Blender</a>
        <li><a href="/cpp/">C/C++</a>
        <li><a href="/docker/">Docker</a>
        <li><a href="/git/">Git</a>
        <li><a href="/go/">Go言語</a>
        <li><a href="/gradle/">Gradle</a>
        <li><a href="/web/">HTML/CSS</a>
        <li><a href="/hugo/">Hugo</a>
        <li><a href="/java/">Java</a>
        <li><a href="/js/">JavaScript</a>
        <li><a href="/kotlin/">Kotlin</a>
        <li><a href="/linux/">Linux/Shell</a>
        <li><a href="/mac/">Mac</a>
        <li><a href="/middleman/">Middleman</a>
        <li><a href="/mt/">Meta Trader</a>
        <li><a href="/nodejs/">Node.js</a>
        <li><a href="/octave/">Octave</a>
        <li><a href="/p4/">Perforce</a>
        <li><a href="/perl/">Perl</a>
        <li><a href="/php/">PHP</a>
        <li class="xNav-focused"><a href="/python/">Python</a>
        <li><a href="/r/">R</a>
        <li><a href="/ruby/">Ruby</a>
        <li><a href="/sass/">Sass</a>
        <li><a href="/sed/">sed/awk</a>
        <li><a href="/sql/">SQL</a>
        <li><a href="/tradestation/">トレードステーション</a>
        <li><a href="/vagrant/">Vagrant</a>
        <li><a href="/vba/">VBA</a>
        <li><a href="/vim/">Vim</a>
        <li><a href="/windows/">Windows</a>
  </ul>
</nav>

</div>

  

  <div data-sticky class="xContainer_sidebar_ad">
    <a href="/">
      <figure class="local-logo">
        <img src="/assets/img/kuma_inu.jpg">
        <figcaption>天才まくまくノート</figcaption>
      </figure>
    </a>
  </div>

  <div data-sticky><form action="https://www.google.co.jp/cse" id="cse-search-box">
  <div class="xSearchBar">
    <input type="hidden" name="cx" value="partner-pub-6317852277883092:5930376365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input class="xSearchBar_text" type="search" name="q" placeholder="ノートを検索できます…" size="55" results="5" autocomplete="off" /><input class="xSearchBar_button" type="submit" name="sa" value="&#128269; 検索 " />
  </div>
</form>

</div>
</div>
<div id="xContainer_sidebar_fixed"></div>

</div>
  </div>

  <!-- <div class="xPageFooter"> -->
    

<div class="xBreadCrumbContainer">
  <div class="xBreadCrumb"><a href="/">&#x1F3E0;HOME</a> &gt; <a href="/python/">Python</a></div>
  <div class="xPageDate">2013-05-08</div>
</div>

  <!-- </div> -->
</div>

  <!-- MathJax -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script type="text/javascript" src="/assets/js/fix-sidebar.js"></script>

<!-- maku-common.js -->
<script>
$(function() {
  var $content = $('.xContent');
  // 外部リンクを必ず新しいタブで開く
  $content.find('a[href^=http]').attr('target', '_blank').attr('rel', 'noopener');
  // 外部リンクにクラス属性を付加する
  $content.find('a[href^=http]:not(:has(img))').addClass("xExternalLinkIcon");
});
</script>


</body>
</html>
