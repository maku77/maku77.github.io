---
title: "Rubyメモ: ハッシュのキー、値の配列を取得する (keys, values)"
url: "p/899kqkj/"
date: "2019-01-12"
tags: ["ruby"]
aliases: ["/ruby/hash/keys-values.html"]
---

基本
----

### ハッシュのキーの配列

あるハッシュのすべてのキーを要素とする配列を作成するには、`Hash#keys` メソッドを使用します。

```ruby
h = {'a' => 100, 'b' => 200, 'c' => 300}
p h.keys  #=> ["a", "b", "c"]
```

### ハッシュの値の配列

同様に、あるハッシュのすべての値を要素とする配列を作成するには、`Hash#values` メソッドを使用します。

```ruby
h = {'a' => 100, 'b' => 200, 'c' => 300}
p h.values  #=> [100, 200, 200]
```

応用
----

### セットとして作成する

ハッシュのキーや値を、配列ではなく `Set` オブジェクトとして取得したければ、`Set.new` コンストラクタに渡してやれば OK です。

```ruby
require 'set'

h = {'a' => 100, 'b' => 200, 'c' => 300}
key_set = Set.new(h.keys)  #=> #<Set: {"a", "b", "c"}>
value_set = Set.new(h.values)  #=> #<Set: {100, 200, 300}>
```

### ハッシュに期待するキーがすべて含まれているか調べる

例えば、あるハッシュのキーとして、`a`、`b`、`c`、`d` がすべて含まれているか調べたいとします。
このようなチェックは、それらの要素を含む `Set` オブジェクトから、`Hash#keys` で求められる配列を `-` 演算子で引くことで実現できます。
引いた結果が空にならなければ、必要なキーが足りていないということです。

```ruby
require 'set'

REQUIRED_KEYS = Set['a', 'b', 'c', 'd']
h = {'b' => 200, 'd' => 400}
missing = REQUIRED_KEYS - h.keys

for k in missing
  puts "キー #{k} が足りません"
end
```

{{< code title="実行結果" >}}
キー a が足りません
キー c が足りません
{{< /code >}}

`Set` オブジェクトの演算に関しては[こちらのページ](/p/3muxcie/)を参照してください。

