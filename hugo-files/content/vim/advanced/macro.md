---
title: "Vim でキーボードマクロを記録して一連のキー入力を繰り返し実行する"
url: "p/bmriv55/"
date: "2007-03-12"
tags: ["vim"]
aliases: ["/vim/advanced/macro.html"]
---

Vim のノーマルモードで **`q`** を入力すると、キーボードマクロの記録モードに入ります。
最初に保存先のレジスタ名称（**`a-zA-Z0-9`** のうち1文字）を入力してから記録させたいテキスト入力を行うと、そのレジスタにマクロとして登録されます。
最後にノーマルモードで再び **`q`** を入力すると、キーボードマクロの記録モードが終了します。
登録したキーボードマクロを再生したいときは、**`@`** に続けてレジスタ名を入力します。

1. **`qa`** ... マクロ記録開始（`q` の後ろは `a-zA-Z0-9` のいずれか1文字）
1. **`q`** ... マクロ記録終了
1. **`@a`** ... マクロ実行（`q` の後ろは `a-zA-Z0-9` のいずれか1文字）

{{< code title="例: 行頭に // を挿入するキーボードマクロを記録（Java のコメント）" >}}
qaI// <Esc>q    # 記録
@a              # 再生
{{< /code >}}

`@a` などでマクロを再生した後に、さらに続けて同じマクロを実行したい場合は、`@a` を入力するのではなく、`.`（ドット）で繰り返し実行すると簡単です。

