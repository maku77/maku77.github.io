---
title: "Vim で開いたファイルがあるディレクトリをカレントディレクトリにする"
url: "p/4ekh9ba/"
date: "2013-06-16"
lastmod: "2020-05-29"
tags: ["vim"]
aliases: /vim/settings/autocmd-cd.html
---

- （追記） [`autochdir` オプション](/p/dpccbv7/) が使える Vim であればそちらを使った方が簡単です。

Vim では、最初に Vim を起動するときに指定したファイルのあるディレクトリがカレントディレクトリとして使用されます。
このカレントディレクトリは、新しいバッファで別のディレクトリにあるファイルを開いた場合でも変更されません。
このため、編集中のファイルと同じディレクトリにあるファイルを `:e .` や `:tabnew .` コマンドで開く際に不便を感じることがあります（全然関係ないディレクトリが起点となってしまう）。

Vim の設定ファイル (`~/.vimrc`) で次のように設定しておくと、Vim 内で別のファイルを開いたときに、そのファイルの存在するディレクトリへ自動的に移動してくれるようになります。

{{< code lang="vim" title="~/.vimrc" >}}
" 開いたファイルのあるディレクトリをカレントディレクトリにする
au BufEnter  *  execute ":lcd " . expand("%:p:h")
{{< /code >}}

