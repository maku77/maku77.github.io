<HTML>
<HEAD>
	<TITLE>Chapter 2 -- IP Address</TITLE>
	<STYLE type="text/css">
	<!--
	BODY { line-height: 150%; }
	-->
	</STYLE>
</HEAD>
<BODY>
<H1>Chapter 2 -- IP Address</H1>
<A href="13.html">Prev Chapter 1 -- Universal Service</A><BR>
<A href="index.html">INDEX</A><BR>
<A href="15_a.html">Next Chapter 3 -- Address Resolution</A>

<HR><H2>物理アドレスの非互換性の問題</H2>
<P>
　各ネットワークは互換性のない独自の技術によって構成されているので、
その物理アドレス(physical address)も互換性がない。
そこで、統一アドレス付け(uniform addressing)するために、
プロトコルソフトウェアは、独自のアドレス付けを定義する。
<BLOCKQUOTE>
→ IP Address (32bit)
</BLOCKQUOTE>
　つまり、ある２つのアプリケーションが通信を行う時、
相手のハードウェアアドレスを知る必要はない。
</P>

<HR><H2>IP Addressのクラス</H2>
<P>
32ビットIP Addressは２つの階層に分かれる。
<UL>
	<LI>プレフィックス…コンピュータの接続された物理ネットワークを表す
	<LI>サフィックス…そのネットワークで個別のコンピュータを識別する
</UL>
IP Addressのクラスは以下のように分類される。
</P>

<TABLE align="center" border="0" cellpadding="1" cellspacing="0">
<CAPTION>class A</CAPTION>
<TR>
	<TD width="90">0</TD>
	<TD width="80">8</TD>
	<TD width="80">16</TD>
	<TD width="70">24</TD>
</TR>
</TABLE>

<TABLE align="center" border="1" cellpadding="1" cellspacing="0">
<TR>
	<TH width="10">0</TH>
	<TH width="70" bgcolor="#cccccc">prefix</TH>
	<TH width="240">suffix</TH>
</TR>
</TABLE>

<TABLE align="center" border="1" cellpadding="1" cellspacing="0">
<CAPTION>class B</CAPTION>
<TR>
	<TH width="20">10</TH>
	<TH width="140" bgcolor="#cccccc">prefix</TH>
	<TH width="160">suffix</TH>
</TR>
</TABLE>

<TABLE align="center" border="1" cellpadding="1" cellspacing="0">
<CAPTION>class C</CAPTION>
<TR>
	<TH width="30">110</TH>
	<TH width="210" bgcolor="#cccccc">prefix</TH>
	<TH width="80">suffix</TH>
</TR>
</TABLE>

<TABLE align="center" border="1" cellpadding="1" cellspacing="0">
<CAPTION>class D</CAPTION>
<TR>
	<TH width="40">1110</TH>
	<TH width="280">multicast address</TH>
</TR>
</TABLE>

<TABLE align="center" border="1" cellpadding="1" cellspacing="0">
<CAPTION>class E</CAPTION>
<TR>
	<TH width="40">1111</TH>
	<TH width="280">reserved for future use</TH>
</TR>
</TABLE>

<P>
　オクテットの境界でプレフィックスとサフィックスは分割される。
クラスA〜Cはホストアドレスに使用され、<B>基本クラス(primary address)</B>と呼ばれる。
</P>

<HR><H2>ドット区切り10進記法</H2>
<P>
<BLOCKQUOTE>
10000000 10000000 11111111 00000000 → 128.128.255.0
</BLOCKQUOTE>
　IP AddressはIP Address自身からそのアドレスクラスを計算できるので、
<B>自己特定型(self identifying)</B>と呼ばれる。
例えば、２進法では最初の４bitを調べれば、クラスが分かるし、
10進法では、第１オクテットを調べれば判別できる。
</P>
<TABLE align="center" border="1" cellpadding="3">
	<TR bgcolor="#cccccc"><TH>クラス</TH><TH>第１オクテット</TH></TR>
	<TR><TH>A</TH><TH>0 〜 127</TH></TR>
	<TR><TH>B</TH><TH>128 〜 191</TH></TR>
	<TR><TH>C</TH><TH>192 〜 223</TH></TR>
	<TR><TH>D</TH><TH>224 〜 239</TH></TR>
	<TR><TH>E</TH><TH>240 〜 255</TH></TR>
</TABLE>
<CENTER><IMG src="14_2.gif"></CENTER>

<HR><H2>割り当てられるネットワーク数、ホスト数</H2>
<TABLE align="center" border="1" cellpadding="3">
	<TR bgcolor="#cccccc"><TH>クラス</TH><TH>ネットワーク数</TH><TH>ホスト数</TH></TR>
	<TR><TH>A</TH><TD>2<SUP>7</SUP>　= 128</TD><TD>2<SUP>24</SUP> = 16777216</TD></TR>
	<TR><TH>B</TH><TD>2<SUP>14</SUP> = 16384</TD><TD>2<SUP>16</SUP> = 65536</TD></TR>
	<TR><TH>C</TH><TD>2<SUP>21</SUP> = 2097152</TD><TD>2<SUP>8</SUP>　= 256</TD></TR>
</TABLE>
<P>
　実際には特別アドレスフォームに使用するアドレスがあるので、もっと少ない。
</P>

<HR><H2>ローカルアドレス</H2>
<TABLE align="center" border="1" cellpadding="3">
	<TR bgcolor="#cccccc"><TH>クラス</TH><TH>アドレス</TH><TH>サブネットマスク</TH></TR>
	<TR><TH>A</TH><TD>10.0.0.0 - 10.255.255.255</TD><TD>255.0.0.0</TD></TR>
	<TR><TH>B</TH><TD>172.16.0.0 - 172.31.255.255</TD><TD>255.255.0.0</TD></TR>
	<TR><TH>C</TH><TD>192.168.0.0 - 192.168.255.255</TD><TD>255.255.255.0</TD></TR>
</TABLE>
<DIV align="right">RFC1597より</DIV>


<HR><H2>クラスＡ〜Ｃどれを選択するか</H2>
<P>
<UL>
	<LI>グローバルインターネットに接続されるネットワークに対しては、
	ISPがクラスの選択を行う。
	<LI>施設インターネットワークに接続されるネットワークに対しては、
	そのネットワークの管理者がクラスの選択を行う。
</UL>
　ISP(Internet Service Providers)は、IANA(Internet Assigned Number Authority)と
協調し、各ネット−ワークプレフィックスがグローバルインターネットに対して、
一意であることを保証する。また、クラスＡが認められることは滅多にない。
（現在では、クラスＡが割り当てられることはありません。
クラスＢのアドレスが不足する傾向にありますが、クラスＣのアドレスにはまだ余裕があります。）
</P>


<HR><H2>特別アドレスフォーム(special address form)</H2>
<TABLE border="1" cellpadding="3">
<TR bgcolor="#cccccc"><TH>Type</TH><TH>Example</TH><TH>Description</TH>
<TR>
	<TH><NOBR>ネットワークアドレス<BR>(network address)</NOBR></TH>
	<TD>10.0.0.0</TD>
	<TD>ネットワークを指定する。suffixが全て０。</TD>
</TR>
<TR>
	<TH><NOBR>指定ブロードキャストアドレス<BR>(directed broadcast address)</NOBR></TH>
	<TD>10.255.255.255</TD>
	<TD>指定のネットワークへのブロードキャスト。suffixが全て１。</TD>
</TR>
<TR>
	<TH><NOBR>制限ブロードキャストアドレス<BR>(limited broadcast address)</NOBR></TH>
	<TD>255.255.255.255</TD>
	<TD>ローカルネットワークへのブロードキャスト。全て１。</TD>
</TR>
<TR>
	<TH><NOBR>自己コンピュータアドレス<BR>(this computer address)</NOBR></TH>
	<TD>0.0.0.0</TD>
	<TD>ブートストラップ時の自己アドレスとして扱う。全て０。</TD>
</TR>
<TR>
	<TH><NOBR>ループバックアドレス<BR>(loopback address)</NOBR></TH>
	<TD>127.0.0.1</TD>
	<TD>ネットワークアプリケーションのテストに使う。
	自己コンピュータに対してパケットを送信するが、
	実際のネットワークを介することはない。クラスＡのprefixを127にしたもの。</TD>
</TR>
</TABLE>
<P>
　<B>※ バークレイブロードキャストアドレスフォーム</B>
<BLOCKQUOTE>
　BSD UNIXの初期TCP/IPプロトコルでは、指定ブロードキャストを表すために、
suffixが全て１ではなく、全て０というアドレスを用いていた。
いくつかのTCP/IP実装では、これらを両方受け入れるように設計されている。
</BLOCKQUOTE>
</P>


<HR><H2>ルータのIP Address</H2>
<P>
　ルータは、複数の物理ネットワークの接点として用いられるので、
複数のprefixを持つことになる。
つまり、ルータには２つ以上のIPアドレスが割り当てられる(→multihomed)。
組織内ネットワークでは、ルータのsuffixを統一する（例えば１とする）と
管理が楽になる。
</P>
<HR>
<A href="13.html">Prev Chapter 1 -- Universal Service</A><BR>
<A href="index.html">INDEX</A><BR>
<A href="15_a.html">Next Chapter 3 -- Address Resolution</A>
</BODY></HTML>
