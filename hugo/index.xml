<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Hugo on 天才まくまくノート</title><link>https://maku77.github.io/hugo/</link><description>Recent content in Hugo on 天才まくまくノート</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Sat, 26 Oct 2024 00:00:00 +0900</lastBuildDate><atom:link href="https://maku77.github.io/hugo/index.xml" rel="self" type="application/rss+xml"/><item><title>Hugo のショートコードで本文とパラメーターの有無で処理を分岐する</title><link>https://maku77.github.io/p/b9jivoi/</link><pubDate>Thu, 28 Dec 2023 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/b9jivoi/</guid><description>&lt;p>Hugo のショートコードを呼び出すときに値を渡す方法としては、本文（コンテンツ）として渡す方法と、引数（パラメーター）として渡す方法があります。
次のショートコードは、本文や引数の有無によって処理を分岐する方法を示しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/my-shortcode.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>本文: &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Inner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>（なし）&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>引数: &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>（なし）&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このショートコードは、Markdown ファイル内で次のように呼び出します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/page.md（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">&amp;lt;h3&amp;gt;本文だけある場合&amp;lt;/h3&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{&amp;lt; my-shortcode &amp;gt;}}これは本文{{&amp;lt; /my-shortcode &amp;gt;}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;h3&amp;gt;引数だけある場合&amp;lt;/h3&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{&amp;lt; my-shortcode &amp;#34;これは引数&amp;#34; /&amp;gt;}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;h3&amp;gt;本文と引数の両方がある場合&amp;lt;/h3&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{&amp;lt; my-shortcode &amp;#34;これは引数&amp;#34; &amp;gt;}}これは本文{{&amp;lt; /my-shortcode &amp;gt;}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">出力結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>本文: これは本文&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>引数: （なし）&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>引数だけある場合&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>本文: （なし）&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>引数: これは引数&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>本文と引数の両方がある場合&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>本文: これは本文&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>引数: これは引数&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ self-closed エラー&lt;/span>
 &lt;span class="xNote_body">&lt;p>ショートコードの呼び出し時に引数だけを指定する場合は、self-closed というちょっと特殊な書き方をしなければいけないようです（末尾をスラッシュで終わる）。
これは、ショートコードの中で &lt;code>.Inner&lt;/code>（本文）を参照している場合の仕様のようです。
末尾のスラッシュを省略すると、実際には &lt;code>.Inner&lt;/code> の値を出力していないのにも関わらず、次のようなエラーが発生してしまいます。&lt;/p></description></item><item><title>Hugo で使用していないテンプレートやショートコードを見つける (hugo --printUnusedTemplates)</title><link>https://maku77.github.io/p/st6fpz9/</link><pubDate>Tue, 25 Apr 2023 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/st6fpz9/</guid><description>&lt;p>Hugo で四苦八苦しながらテンプレートを開発していると、いつのまにか使われていないテンプレート（&lt;code>.html&lt;/code> ファイル）が量産されていたりします。
Hugo サイトのビルド時に、未使用のテンプレートを検出するには、次のように &lt;strong>&lt;code>--printUnusedTemplates&lt;/code>&lt;/strong> オプションを付けて実行します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo --printUnusedTemplates
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Start building sites …
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">...(省略)...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">WARN 2023/04/25 00:27:35 Template _default/section.backup.html is unused, source file /Users/maku/mysite/themes/maku/layouts/_default/section.backup.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">WARN 2023/04/25 00:27:35 Template partials/debug/link-path.html is unused, source file /Users/maku/mysite/themes/maku/layouts/partials/debug/link-path.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">WARN 2023/04/25 00:27:35 Template partials/pager.html is unused, source file /Users/maku/mysite/themes/maku/layouts/partials/pager.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">WARN 2023/04/25 00:27:35 Template partials/top-menu.back.html is unused, source file /Users/maku/mysite/themes/maku/layouts/partials/top-menu.back.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">WARN 2023/04/25 00:27:35 Template shortcodes/anchor.html is unused, source file /Users/maku/mysite/themes/maku/layouts/shortcodes/anchor.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">WARN 2023/04/25 00:27:35 Template shortcodes/mermaid.html is unused, source file /Users/maku/mysite/themes/maku/layouts/shortcodes/mermaid.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">WARN 2023/04/25 00:27:35 Template shortcodes/script.html is unused, source file /Users/maku/mysite/themes/maku/layouts/shortcodes/script.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">WARN 2023/04/25 00:27:35 Template shortcodes/workings-and-drafts.html is unused, source file /Users/maku/mysite/themes/maku/layouts/shortcodes/workings-and-drafts.html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Total in 239 ms
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>上記の例では、8 つのテンプレートやショートコードが使われていないことが分かります。
内容を確認して、問題なければ削除してしまいましょう。&lt;/p></description></item><item><title>Hugo Modules の仕組みで Hugo サイト用のコンテンツを分割して管理する</title><link>https://maku77.github.io/p/bqar8o6/</link><pubDate>Sat, 01 Apr 2023 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/bqar8o6/</guid><description>&lt;h2 id="hugo-modules-とは">Hugo Modules とは&lt;/h2>
&lt;p>&lt;a href="https://gohugo.io/hugo-modules/">Hugo Modules&lt;/a> の仕組みを使うと、異なるディレクトリに配置されたファイル群をまとめて、1 つの Hugo サイトを構成することができます。
Hugo Module の実体は、Hugo サイト用のファイルが格納されたディレクトリです。
Hugo Module は、ローカル PC 上のディレクトリであってもよいし、GitHub リポジトリ内のディレクトリであっても構いません（通常は GitHub で管理することになるでしょう）。&lt;/p>
&lt;figure style="text-align: center">
&lt;div class="mermaid">
graph RL
 subgraph my-hugo-module-1
 mod1("Hugo Module")
 end
 subgraph my-hugo-module-2
 mod2("Hugo Module")
 end
 subgraph my-hugo-site
 mod1_imported("Hugo Module")
 mod2_imported("Hugo Module")
 end
 mod1 -- import --> mod1_imported
 mod2 -- import --> mod2_imported

 classDef classMod fill:#36f,color:white,stroke:none
 class mod1,mod2,mod1_imported,mod2_imported classMod
&lt;/div>
&lt;/figure>

&lt;script>
(function() {
 
 if (window.isMermaidLoaded) return;
 window.isMermaidLoaded = true;

 
 const script = document.createElement('script');
 script.src = 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js';
 script.onload = () => { mermaid.initialize({startOnLoad: true}); };
 document.body.appendChild(script);
})();
&lt;/script>


&lt;p>この仕組みは、一見すると、Hugo テーマを Git サブモジュールとして取り込むのと同じように見えますが、Hugo Modules はより柔軟で、コンテンツを含むほとんどのファイルをインポートできます。
現状、下記の 7 つのディレクトリに格納されるファイルを、Hugo Module からインポートすることができます。&lt;/p></description></item><item><title>Hugo で新しいページや別のサイトへ自動でリダイレクトする (aliases, redirectTo)</title><link>https://maku77.github.io/p/oj3izfu/</link><pubDate>Wed, 17 Aug 2022 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/oj3izfu/</guid><description>&lt;p>既存の Web ページの URL を変更した場合は、古い URL にアクセスしたときに自動的に新しい URL にリダイレクトされるようにしておくと親切です。
ここでは、2 種類のリダイレクト方法を説明します。&lt;/p>
&lt;ul>
&lt;li>&lt;code>aliases&lt;/code> を使う方法 &amp;hellip; 同じ Hugo サイト内でリダイレクトする&lt;/li>
&lt;li>&lt;code>redirectTo&lt;/code> を使う方法（独自） &amp;hellip; 別のサイトへリダイレクトする&lt;/li>
&lt;/ul>
&lt;h2 id="aliases-を使う方法">aliases を使う方法&lt;/h2>
&lt;p>同一の Hugo サイト内でページの URL を変更した場合は、新しいページのフロントマターに &lt;strong>aliases&lt;/strong> プロパティを追加し、以前の URL を列挙しておきます。
古いページの Markdown ファイルは削除します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/new-page/_index.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;新しい URL のページ&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2022-08-17&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">aliases&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/old-page&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/old-page2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/old-page3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">本文...&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように記述しておくと、古いページの URL (&lt;code>https://examle.com/old-page&lt;/code>) にアクセスしたときに、新しいページの URL (&lt;code>https://example.com/new-page&lt;/code>) にリダイレクトしてくれます。
この仕組みは単純で、&lt;code>aliases&lt;/code> に列挙した URL に対応するように、Hugo が次のような内容のファイルを出力しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">public/old-page/index.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ja-jp&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>https://example.com/new-page/&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">link&lt;/span> &lt;span class="na">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;canonical&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://example.com/new-page/&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;robots&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;noindex&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;utf-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">http-equiv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;refresh&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;0; url=https://example.com/new-page/&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>meta&lt;/code> 要素を使って、Web ブラウザに新しい URL にジャンプするように指示しています。
さらに、&lt;code>link&lt;/code> 要素の Canonical URL として新しい URL を設定することで、Google などの検索エンジンに、正しい URL はこちらですよと知らせています。&lt;/p></description></item><item><title>Hugo で Markdown (.md) ファイルを VS Code で開くリンクを表示する</title><link>https://maku77.github.io/p/9hkprvx/</link><pubDate>Sat, 04 Jun 2022 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/9hkprvx/</guid><description>&lt;h2 id="vs-code-で開くリンク">VS Code で開くリンク&lt;/h2>
&lt;p>下記の Hugo テンプレートコードは、現在のページの生成元になった Markdown (.md) ファイルを VS Code で開くリンクを表示します（ローカルサーバーでの実行中のみ）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">hugo&lt;/span>&lt;span class="na">.IsServer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;vscode://file/&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Filename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>✎ VS Code で開く&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="仕組み">仕組み&lt;/h2>
&lt;p>VS Code (Visual Studio Code) をインストールすると、ブラウザのアドレス欄に &lt;strong>&lt;code>vscode://path&amp;lt;ファイルのフルパス&amp;gt;&lt;/code>&lt;/strong> という特殊なアドレスを入力することで、ローカル PC 内のファイルを VS Code で開くことができるようになります。
例えば、&lt;code>/Users/maku/hugo-site/content/page.md&lt;/code> というファイルを開きたいときは次のようなアドレスを入力します。&lt;/p>
&lt;ul>
&lt;li>Linux や macOS の場合
&lt;ul>
&lt;li>&lt;code>vscode://file/Users/maku/hugo-site/content/page.md&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Windows の場合
&lt;ul>
&lt;li>&lt;code>vscode://file/C:\Users\maku\hugo-site\content\page.md&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Markdown ファイルのパス情報は &lt;a href="../p/8env4bi/">File 変数で参照できる&lt;/a> ので、それを利用して &lt;code>a&lt;/code> 要素を出力してやれば、リンクのクリックだけで VS Code を開くことができるようになります。&lt;/p></description></item><item><title>Hugo の記事ページで TypeScript ファイルや NPM パッケージをインクルードして使用する</title><link>https://maku77.github.io/p/3adgjnq/</link><pubDate>Thu, 02 Jun 2022 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/3adgjnq/</guid><description>&lt;h2 id="jsbuild-の基本">js.Build の基本&lt;/h2>
&lt;p>Hugo Pipes のひとつである &lt;a href="https://gohugo.io/hugo-pipes/js/">js.Build&lt;/a> を使用すると、TypeScript ファイル (&lt;code>.ts&lt;/code>) のビルドを行うことができます。&lt;/p>
&lt;p>下記のショートコードは、記事ページにバンドルした &lt;code>.ts&lt;/code> ファイルを &lt;code>.js&lt;/code> ファイルにトランスパイルし、&lt;code>script&lt;/code> 要素として出力する例です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/script.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$src&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;src&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$res&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Page.Resources.GetMatch&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$src&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$built&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$res&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">js&lt;/span>&lt;span class="na">.Build&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$built&lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="na">defer&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このショートコードを使う記事ページ (&lt;code>.md&lt;/code>) と TypeScript ファイル (&lt;code>.ts&lt;/code>) は、次のような感じで &lt;code>content&lt;/code> ディレクトリ以下の任意のディレクトリに配置します。&lt;/p>
&lt;ul>
&lt;li>content/
&lt;ul>
&lt;li>sample-page/
&lt;ul>
&lt;li>index.md&lt;/li>
&lt;li>hello.ts&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>ページバンドルの形にするため、記事ページは &lt;code>index.md&lt;/code> というファイル名で作成し、同じディレクトリに &lt;code>.ts&lt;/code> ファイルを配置することに注意してください。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/sample-page/index.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;サンプルページ&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="l">&amp;lt; script src=&amp;#34;hello.ts&amp;#34; &amp;gt;}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/sample-page/hello.ts&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ts" data-lang="ts">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">alert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Hello!&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="assets-ディレクトリに配置した-ts-ファイルを参照する">assets ディレクトリに配置した ts ファイルを参照する&lt;/h2>
&lt;p>前述の例では、ページバンドルした &lt;code>.ts&lt;/code> ファイルを参照しましたが、プロジェクト全体で使う &lt;code>.ts&lt;/code> ファイルは、共有リソースとして &lt;strong>&lt;code>assets&lt;/code>&lt;/strong> ディレクトリ以下に入れておくと便利です（&lt;code>assets&lt;/code> ディレクトリには、ビルド時に何らかの変換を行うファイルを配置します）。&lt;/p></description></item><item><title>Hugo のセクションページでいろいろな方法でページソートする (.ByDate, .ByTitle, .ByWeight)</title><link>https://maku77.github.io/p/9gjnqtw/</link><pubDate>Fri, 20 May 2022 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/9gjnqtw/</guid><description>&lt;h2 id="pages-のデフォルトソート順序">.Pages のデフォルトソート順序&lt;/h2>
&lt;p>Hugo のセクションページのテンプレート内で &lt;strong>&lt;code>.Pages&lt;/code>&lt;/strong> 変数を参照すると、子セクションや子ページの一覧を取得できますが、その一覧はデフォルトで次のような情報をもとにソートされています（参考: &lt;a href="https://gohugo.io/templates/lists/#order-content">Lists of Content in Hugo - Order Content&lt;/a>）。&lt;/p>
&lt;ol>
&lt;li>&lt;strong>&lt;code>Weight&lt;/code>&lt;/strong>
&lt;ul>
&lt;li>ページのフロントマターで &lt;code>weight: 1&lt;/code> のように書いておくと、ページに重み付けできます。
より小さな値の &lt;code>weight&lt;/code> を持っているページの方が先に表示されます。
&lt;code>weight&lt;/code> を持たないページ（あるいは &lt;code>weight: 0&lt;/code> のページ）は、いかなる &lt;code>weight&lt;/code> を持つページよりも後ろに表示されます。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>&lt;code>Date&lt;/code>&lt;/strong>
&lt;ul>
&lt;li>ページのフロントマターで、&lt;code>date: &amp;quot;2022-05-20&amp;quot;&lt;/code> のように記述しておくと、そのページの作成日として認識されます。
より新しいページが先に表示されます。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>&lt;code>LinkTitle&lt;/code>&lt;/strong> / &lt;strong>&lt;code>Title&lt;/code>&lt;/strong>
&lt;ul>
&lt;li>ページのタイトルで昇順ソートされます。
フロントマターに &lt;code>linkTitle&lt;/code> が指定されていればその値でソートされ、なければ &lt;code>title&lt;/code> の値でソートされます。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>&lt;code>FilePath&lt;/code>&lt;/strong>
&lt;ul>
&lt;li>&lt;code>.md&lt;/code> ファイルのフルパスで昇順ソートされます。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>具体的のどのような実装になっているかは、下記 Hugo ソースコードの &lt;code>DefaultPageSort&lt;/code> 関数あたりを見ると分かります。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="https://github.com/gohugoio/hugo/blob/e164834f0aaaf1c58489fab41f5835b66f16b87c/resources/page/pages_sort.go#L69">hugo/pages_sort.go&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ソート方法をカスタマイズする">ソート方法をカスタマイズする&lt;/h2>
&lt;p>&lt;code>.Pages&lt;/code> 変数でページの一覧を取得するときに &lt;strong>&lt;code>.Pages.ByTitle&lt;/code>&lt;/strong> のように指定すると、ページタイトルでソートされた結果を取得できます。
他にもいろいろな参照方法があります。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>参照方法&lt;/th>
 &lt;th>意味&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByWeight&lt;/code>&lt;/td>
 &lt;td>フロントマターの &lt;code>weight&lt;/code> の小さい順。ただし、&lt;code>weight: 0&lt;/code> は指定なしとみなされる&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByTitle&lt;/code>&lt;/td>
 &lt;td>タイトル (&lt;code>title&lt;/code>) 順&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByLinkTitle&lt;/code>&lt;/td>
 &lt;td>タイトル (&lt;code>linkTitle&lt;/code>) 順。&lt;code>linkTitle&lt;/code> がない場合は &lt;code>title&lt;/code> を参照する&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByDate&lt;/code>&lt;/td>
 &lt;td>日付 (&lt;code>date&lt;/code>) が新しい順&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByPublishDate&lt;/code>&lt;/td>
 &lt;td>日付 (&lt;code>publishdate&lt;/code>) が新しい順&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByExpiryDate&lt;/code>&lt;/td>
 &lt;td>日付 (&lt;code>expirydate&lt;/code>) が新しい順&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByLastmod&lt;/code>&lt;/td>
 &lt;td>日付 (&lt;code>lastmod&lt;/code>) が新しい順&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByLength&lt;/code>&lt;/td>
 &lt;td>本文が短い順&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByParam &amp;quot;rating&amp;quot;&lt;/code>&lt;/td>
 &lt;td>フロントマターの独自フィールドの値でソート（この場合は &lt;code>rating&lt;/code>）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>.Pages.ByParam &amp;quot;author.last_name&amp;quot;&lt;/code>&lt;/td>
 &lt;td>上の応用（入れ子になった独自フィールド）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>逆順にしたいときは、後ろに &lt;strong>&lt;code>.Reverse&lt;/code>&lt;/strong> を付けます。
例えば次のようにすると、&lt;strong>タイトルで降順ソート&lt;/strong> されます。&lt;/p></description></item><item><title>Hugo でクリックで開閉する accordion ショートコードを作成する</title><link>https://maku77.github.io/p/w5gs4ep/</link><pubDate>Mon, 22 Feb 2021 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/w5gs4ep/</guid><description>&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="610" height="208" src="../p/w5gs4ep/img-001.gif" alt="/p/w5gs4ep/img-001.gif" />
 &lt;figcaption>図: accordion ショートコードによる開閉表示&lt;/figcaption>
&lt;/figure>

&lt;p>ブログ記事内の補足的な説明テキストなどは、デフォルトでは非表示にしておいて、必要なときにクリックで開閉できるようにしておくとスッキリします。
このような UI コンポーネントは、アコーディオン (accordion) と呼ばれることが多いので、ここでは &lt;strong>&lt;code>accordion&lt;/code>&lt;/strong> という名前のショートコードとして作成してみます。
&lt;code>accordion&lt;/code> ショートコードは次のように使うことを想定しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Markdown 内での使用例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">{{% accordion title=&amp;#34;もっと詳しく&amp;#34; %}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">この本文はデフォルトでは隠されていて、クリックで見えるようになります。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- サンプルコード
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 補足説明
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">などに使うと便利です。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{% /accordion %}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">本文のテキストを Markdown コードとして処理するためには、ショートコード名を &lt;code>&amp;lt;&lt;/code> と &lt;code>&amp;gt;&lt;/code> ではなく、上記のように &lt;code>%&lt;/code> で囲む必要があります。&lt;/span>
&lt;/div>
&lt;p>下記は、&lt;code>accordion&lt;/code> ショートコードの実装例です。
クリックによる HTML 要素の表示／非表示の切り替えは、&lt;a href="../web/menu/accordion.html">input 要素の状態による CSS の切り替えテクニック&lt;/a> を利用しています。
&lt;code>label&lt;/code> 要素と &lt;code>input&lt;/code> 要素を結びつける ID には、&lt;a href="../p/9qexh2q/">Hugo の関数でランダムに生成した文字列&lt;/a> を使用しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/accordion.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">default&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;例&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$rand&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">delimit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">seq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">9&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">shuffle&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;xAccordion&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">label&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;xAccordion_title&amp;#34;&lt;/span> &lt;span class="na">for&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;id-&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$rand&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">label&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;id-&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$rand&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;checkbox&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;xAccordion_body&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Inner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記の出力に合わせて、次のようなスタイルシートを読み込んでおく必要があります。
ここでは、&lt;a href="../p/k7jv7hs/">SCSS によるスタイル記述が有効化&lt;/a> されていることを想定していますが、通常の CSS で記述しても大丈夫です。
表示スタイルはここで自由に変更できます。&lt;/p></description></item><item><title>Hugo のテンプレートやショートコードでランダムな文字列を生成する</title><link>https://maku77.github.io/p/9qexh2q/</link><pubDate>Mon, 22 Feb 2021 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/9qexh2q/</guid><description>&lt;p>次の &lt;strong>&lt;code>random&lt;/code>&lt;/strong> ショートコードは、1 〜 9 の数値をランダムに並び替えた 9 桁の数値文字列を生成します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/random.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$random1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">delimit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">seq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">9&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">shuffle&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$random2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">delimit&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">shuffle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">split&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;123456789&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">))&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>random1 = &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$random1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>random2 = &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$random2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/page1.md（使用例）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ページタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="l">&amp;lt; random &amp;gt;}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">レンダリング結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>random1 = 816257394&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>random2 = 234976851&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記の例では、2 種類の生成方法を示していますが、どちらも次のような手順でランダムな文字列を生成しています。&lt;/p>
&lt;ol>
&lt;li>1 〜 9 の連番からなる配列を生成（&lt;code>seq 9&lt;/code> あるいは &lt;code>split &amp;quot;123456789&amp;quot; &amp;quot;&amp;quot;&lt;/code> の部分）&lt;/li>
&lt;li>&lt;a href="https://gohugo.io/functions/shuffle/">shuffle 関数&lt;/a> で配列要素をシャッフル&lt;/li>
&lt;li>&lt;a href="https://gohugo.io/functions/delimit/">delimit 関数&lt;/a> で配列要素を 1 つの文字列に結合&lt;/li>
&lt;/ol>
&lt;p>配列要素を結合する関数に &lt;code>delimit&lt;/code> という名前が付けられていますが、多くの言語では &lt;code>join&lt;/code> とか &lt;code>concatenate&lt;/code> という名前が一般的ですね。
この関数名にはちょっと戸惑うかも（＾＾；&lt;/p></description></item><item><title>Hugo で SVG ファイルをインラインで埋め込む svg ショートコードを作成する</title><link>https://maku77.github.io/p/kyn8rcv/</link><pubDate>Tue, 20 Oct 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/kyn8rcv/</guid><description>&lt;p>Hugo で SVG ファイルを表示するには、Markdown の画像ファイル用構文や、Hugo 組み込みの &lt;a href="https://gohugo.io/content-management/shortcodes/#figure">figure ショートコード&lt;/a> などを使用します。&lt;/p>
&lt;pre tabindex="0">&lt;code>![サンプル画像](sample.svg)

{{&amp;lt; figure src=&amp;#34;sample.svg&amp;#34; caption=&amp;#34;サンプル画像&amp;#34; &amp;gt;}}
&lt;/code>&lt;/pre>&lt;p>この方法で SVG ファイルを表示すると、次のような &lt;code>img&lt;/code> タグで外部ファイルを参照するような HTML が出力されます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;sample.svg&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>これは、PNG ファイルや JPG ファイルと同様に外部ファイルを画像として表示する方法なので、SVG ファイル内にテキストが含まれていたとしても、そのテキストを検索することはできません。
SVG ファイルの内容をインラインで &lt;code>svg&lt;/code> 要素として埋め込むようにすれば、SVG ファイルの内容をブラウザの検索機能などで検索できるようになります。&lt;/p>
&lt;p>次の &lt;code>svg&lt;/code> ショートコードは、指定された SVG ファイルをインラインで HTML に埋め込みます。
ポイントは、Hugo の &lt;a href="https://gohugo.io/functions/readfile/">readFile 関数&lt;/a>でファイルの中身を読み込んで、その場に出力するところです。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/svg.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$src&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;src&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">{{- /* md ファイルからの相対パスで svg ファイル名を指定できるように */}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$svgFile&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="na">.Join&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="na">.Dir&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Position.Filename&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$src&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">figure&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;xImage&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$src&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="na">target&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;_blank&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">readFile&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$svgFile&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">safeHTML&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">figcaption&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>図: &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">figcaption&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">figure&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">使用例（Markdown ファイル内）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">{{&amp;lt; svg src=&amp;#34;sample.svg&amp;#34; title=&amp;#34;サンプル画像&amp;#34; &amp;gt;}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Hugo でショートコードが使われている場合のみ JavaScript を読み込む (.HasShortcode)</title><link>https://maku77.github.io/p/3j6qate/</link><pubDate>Tue, 13 Oct 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/3j6qate/</guid><description>&lt;h2 id="hasshortcode-関数">.HasShortcode 関数&lt;/h2>
&lt;p>外部の JavaScript ファイルを利用して動作するショートコードを作成すると、Web サイトの表現力を大きく向上させることができます。
例えば、次のようなショートコードが考えられます。&lt;/p>
&lt;ul>
&lt;li>独自の構文でコードを記述すると UML 図を出力してくれる &lt;code>mermaid&lt;/code> ショートコード（&lt;a href="https://mermaid-js.github.io/mermaid/">mermaid.js&lt;/a> などを利用）&lt;/li>
&lt;li>TeX 構文でコードを記述すると数式を出力してくれる &lt;code>math&lt;/code> ショートコード（&lt;a href="https://www.mathjax.org/">MathJax.js&lt;/a> などを利用）&lt;/li>
&lt;/ul>
&lt;p>このとき悩ましいのが、どのようにして次のような &lt;code>script&lt;/code> 要素を出力するかです。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;for-shortcode.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>すべてのページにこのようなコードを出力してしまうと、この JavaScript が必要ないページでもファイルの読み込みが発生してしまいます。
こういった拡張が増えてくると、大量の JavaScript ファイルが読み込まれることになり、重い Web サイトになってしまいます。&lt;/p>
&lt;p>このような場合の救世主が &lt;strong>&lt;code>Page.HasShortcode&lt;/code>&lt;/strong> 関数です。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="https://gohugo.io/templates/shortcode-templates/#checking-for-existence">Hugo - Create Your Own Shortcodes - Checking for Existence&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ページテンプレート内で、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.HasShortcode&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;my-shortcode&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>といった記述をしておくと、Markdown ファイル内で &lt;code>my-shortcode&lt;/code> ショートコードを使用している場合のみ出力を行うことができます。&lt;/p>
&lt;h2 id="実装例">実装例&lt;/h2>
&lt;p>例えば、ベーステンプレートの &lt;code>body&lt;/code> 要素の末尾に次のように記述しておけば、Markdown ファイル内で &lt;code>mermaid&lt;/code> ショートコードを使用している場合のみ、&lt;code>mermaid.js&lt;/code> の読み込みと初期化処理を実行することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/baseof.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.HasShortcode&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;mermaid&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">mermaid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">initialize&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="nx">startOnLoad&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">});&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ちなみに、&lt;code>mermaid&lt;/code> ショートコードの実装は次のような感じになっています。&lt;/p></description></item><item><title>mermaid.js で Hugo の Markdown 記事に UML 図を埋め込む</title><link>https://maku77.github.io/p/xg3n7qa/</link><pubDate>Tue, 13 Oct 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/xg3n7qa/</guid><description>&lt;h2 id="mermaidjs-とは">mermaid.js とは&lt;/h2>
&lt;p>&lt;a href="https://mermaid-js.github.io/mermaid/">mermaid.js&lt;/a> を使うと、独自構文のテキストから UML 図などを生成することができます。
JavaScript で動的に SVG を生成することができるので、Markdown ファイルに図を埋め込みたい場合によく使われています。&lt;/p>
&lt;p>&lt;a href="https://www.azuredevops.tips/wikimermaid-diagrams/">Azure DevOps Wiki&lt;/a> や &lt;a href="https://docs.github.com/ja/get-started/writing-on-github/working-with-advanced-formatting/creating-diagrams">GitHub&lt;/a>、&lt;a href="https://docs.gitlab.com/ee/user/markdown.html#mermaid">Gitlab&lt;/a> などでも標準サポートされており、Markdown で図を扱うときのデファクトスタンダードになるかもしれません。
UML 図の表現力という点では PlantUML の方が上ですが、そのあたりは改善されていくと思います。&lt;/p>
&lt;p>Hugo は現時点 (v0.76.4) では、mermaid.js を標準サポートしていないので、ここでは Hugo に mermaid.js を組み込む方法を説明します。&lt;/p>
&lt;h2 id="mermaidjs-の仕組み">mermaid.js の仕組み&lt;/h2>
&lt;p>mermaid.js は、次のような &lt;strong>&lt;code>mermaid&lt;/code>&lt;/strong> クラスが付けられた HTML 要素の内容を読み取り、そこに変換後の図 (SVG) を挿入します。
この例の場合は、&lt;code>div&lt;/code> 要素の内容が SVG に置き換わります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;mermaid&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">graph LR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> A --- B
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> B--&amp;gt;C[あいうえお]
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> B--&amp;gt;D(かきくけこ)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>HTML の &lt;code>body&lt;/code> 要素の末尾あたりで、次のように mermaid.js の読み込みと初期化を行います。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">mermaid&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">initialize&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="nx">startOnLoad&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">});&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>これだけで、Web ブラウザでページを開いたときに、SVG に変換された図が表示されます。&lt;/p></description></item><item><title>Hugo でページリスト（記事一覧）に列挙されないページを作る (_build.list)</title><link>https://maku77.github.io/p/4ziyhxe/</link><pubDate>Sun, 17 May 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/4ziyhxe/</guid><description>&lt;p>&lt;a href="https://gohugo.io/news/0.65.0-relnotes/">Hugo 0.65.0&lt;/a> で、ビルド時の振る舞いを制御するためのフロントマター用プロパティ (&lt;a href="https://gohugo.io/content-management/build-options/">_build&lt;/a>) が導入されました。
記事ページのフロントマターで、&lt;strong>&lt;code>_build.list&lt;/code>&lt;/strong> プロパティを &lt;strong>&lt;code>never&lt;/code>&lt;/strong> に設定しておくと、&lt;code>.Pages&lt;/code>、&lt;code>.RegularPages&lt;/code>、&lt;code>.Sections&lt;/code> などで返されるページリストに、そのページが含まれなくなります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">_build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Whether to add it to any of the page collections.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Note that the page can still be found with .Site.GetPage.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># We extended this property from a boolean to an enum in Hugo 0.68.0.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Valid values are:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - never: The page will not be included in any page collection.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - always (default): The page will be included in all page collections,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># e.g. site.RegularPages, $page.Pages.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - local: The page will be included in any local page collection,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># e.g. $page.RegularPages, $page.Pages. One use case for this&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># would be to create fully navigable, but headless content sections.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">list&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Whether to render it.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># If always, the page will be treated as a published page,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># holding its dedicated output files (index.html, etc…) and permalink.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># We extended this property from a boolean to an enum in Hugo 0.76.0.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Valid values are:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - never: The page will not be included in any page collection.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - always (default): The page will be rendered to disk and get a RelPermalink etc.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - link: The page will be not be rendered to disk, but will get a RelPermalink.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">render&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Whether to publish its resources.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># These will still be published on demand, but enabling this can be useful&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># if the originals (e.g. images) are never used.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - true: The Bundle&amp;#39;s Resources will be published.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - false: Still publish Resources on demand (when a resource&amp;#39;s .Permalink or&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># .RelPermalink is invoked from the templates) but will skip the others.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publishResources&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>例えば、&lt;a href="../p/p4n5m3i/">サイト内検索&lt;/a>のページは特別な経路でのみリンクしたいので、「メニューツリー」や「子ページ一覧」などには表示しないようにしたいとします。
そのような場合は、該当記事の Markdown ファイルで次のようにフロントマターを設定すれば OK です。&lt;/p></description></item><item><title>Hugo で JSON-LD 形式のパンくずリストを出力する（SEO 対策）</title><link>https://maku77.github.io/p/5fzgwdt/</link><pubDate>Sat, 16 May 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/5fzgwdt/</guid><description>&lt;p>&lt;a href="https://json-ld.org/">JSON-LD&lt;/a> 形式の構造化データを HTML 内に含めておくと、Google の検索結果にページの階層構造が表示されるようになります。
この構造化データは、あくまで &lt;strong>Google などの検索エンジンに記事の階層を伝えるためのもの&lt;/strong> であり、記事内に表示するためのパンくずリストではないことに注意してください。
画面表示用のパンくずリストを出力したいときは、下記の記事を参考にしてください。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="../p/vemn3c4/">Hugo でパンくずリストを表示する&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="パンくずリストのフォーマット">パンくずリストのフォーマット&lt;/h2>
&lt;p>JSON-LD 形式でパンくずリストを作成するときに、どのような内容で出力すればよいかは、 &lt;a href="https://developers.google.com/search/docs/data-types/breadcrumb">Google のパンくずリストの説明ページ&lt;/a> に分かりやすく書かれています。&lt;/p>
&lt;p>例えば、ある「記事ページ」が次のような階層で配置されているとします。&lt;/p>
&lt;pre tabindex="0">&lt;code>ホーム ＞ カテゴリA ＞ カテゴリB ＞ 記事ページ
&lt;/code>&lt;/pre>&lt;p>これを JSON-LD で表現するには、下記のようなコードを &lt;code>head&lt;/code> 要素や &lt;code>body&lt;/code> 要素の中に記述します。
特に理由がなければ、少しでもパフォーマンスを考慮して &lt;code>body&lt;/code> 要素の最後に記述するのがよいでしょう。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;application/ld+json&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@context&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://schema.org&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;BreadcrumbList&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;itemListElement&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ListItem&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;position&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;サイト名&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;item&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://example.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ListItem&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;position&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;カテゴリA&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;item&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://example.com/category-a&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ListItem&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;position&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;カテゴリB&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;item&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://example.com/category-b&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@type&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;ListItem&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;position&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;記事ページのタイトル&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;item&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;https://example.com/article-page&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>重要なのは &lt;strong>&lt;code>itemListElement&lt;/code>&lt;/strong> プロパティで、この配列要素として各階層の内容を記述します。
とても単純なので説明するまでもないと思いますが、 &lt;strong>&lt;code>name&lt;/code>&lt;/strong> プロパティで各階層の名称、 &lt;strong>&lt;code>item&lt;/code>&lt;/strong> プロパティでその階層を示す URL を指定します。
&lt;strong>&lt;code>position&lt;/code>&lt;/strong> プロパティは 1、2、3 と順番に振っていけば OK です。&lt;/p></description></item><item><title>Hugo でページの階層構造を取得する関数を作成する (get-hierarchy)</title><link>https://maku77.github.io/p/v9t62ux/</link><pubDate>Sat, 16 May 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/v9t62ux/</guid><description>&lt;h2 id="何を作るか">何を作るか？&lt;/h2>
&lt;p>Hugo の記事ページは、次のような感じで、セクション機能を使って階層化することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>ホーム ＞ セクション1 ＞ セクション2 ＞ ページタイトル
&lt;/code>&lt;/pre>&lt;p>ここでは、上記のような階層構造をスライス（配列）で取得する &lt;a href="../p/4anjern/">関数を作成&lt;/a> してみます。
ページの階層構造を取得できると、パンくずリストなどを簡単に出力できるようになります。&lt;/p>
&lt;h2 id="階層構造を取得する関数">階層構造を取得する関数&lt;/h2>
&lt;p>関数はパーシャルテンプレートの形で作るので、&lt;strong>&lt;code>layouts/partials&lt;/code>&lt;/strong> の下に &lt;code>.html&lt;/code> ファイルを作成します。
ここでは、関数であることを明確にするために、さらに &lt;strong>&lt;code>function&lt;/code>&lt;/strong> という名前のディレクトリを作ってその下に格納することにします。
関数名（テンプレート名）は &lt;strong>&lt;code>get-hierarchy&lt;/code>&lt;/strong> とします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/function/get-hierarchy.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$hierarchy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">slice&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Parent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$parentHierarchy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;function/get-hierarchy&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Parent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$parentHierarchy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$hierarchy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$parentHierarchy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">append&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$hierarchy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$hierarchy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>この関数は、任意のテンプレートファイルから次のように呼び出します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$hierarchy&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;function/get-hierarchy&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>$hierarchy&lt;/code> 変数には、&lt;strong>ホームページからカレントページまでの &lt;code>Page&lt;/code> 変数の配列データ&lt;/strong> が格納されます。
例えば、次のようにすれば、ページ階層を番号付きでリンク表示できます。&lt;/p></description></item><item><title>Hugo のショートコードをエスケープ処理してそのまま表示する</title><link>https://maku77.github.io/p/9tg2m7q/</link><pubDate>Thu, 07 May 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/9tg2m7q/</guid><description>&lt;p>Hugo で作成した記事（&lt;code>.md&lt;/code> ファイル）内でショートコードの使い方を説明するときなど、ショートコードのタグそのものを文章中に表示させたいことがあります。
そのまま記述するとショートコードとして処理されてしまうので、次のようにエスケープ処理して記述する必要があります。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>Markdown ファイル内での書き方&lt;/th>
 &lt;th>出力結果&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>{{&amp;lt;/* my-shortcode */&amp;gt;}}&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>&lt;code>{{&amp;lt; my-shortcode &amp;gt;}}&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>{{%/* my-shortcode */%}}&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>&lt;code>{{% my-shortcode %}}&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>ショートコード名の部分 (&lt;code>my-shortcode&lt;/code>) を C/C++ や Java のコメント風に囲めば OK です。
コードブロックの中でも同様にエスケープ処理できます。&lt;/p></description></item><item><title>Hugo の記事ファイルのフロントマターで使用するレイアウトを制御する (type, layout)</title><link>https://maku77.github.io/p/m2n8rbu/</link><pubDate>Mon, 04 May 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/m2n8rbu/</guid><description>&lt;h2 id="フロントマターでのレイアウト指定">フロントマターでのレイアウト指定&lt;/h2>
&lt;p>Hugo では、記事ファイル (&lt;code>.md&lt;/code>) のレンダリングにどのレイアウトファイルを使用するかは、&lt;code>content&lt;/code> ディレクトリ以下にどのようなパスで &lt;code>.md&lt;/code> ファイルを配置したかによって決まります。
ほとんどのページではこれで十分なのですが、&lt;strong>あるページだけ特殊なレイアウトを使用したい&lt;/strong> ことがあります。
例えば、検索ページや、新着記事リストのページなどです。
このような場合は、Markdown ファイルのフロントマターで、&lt;strong>&lt;code>type&lt;/code>&lt;/strong> プロパティや &lt;strong>&lt;code>layout&lt;/code>&lt;/strong> プロパティを指定することで、使用するレイアウトファイルを制御することができます。&lt;/p>
&lt;dl>
&lt;dt>&lt;strong>&lt;code>type&lt;/code>&lt;/strong> プロパティ&lt;/dt>
&lt;dd>コンテントタイプを指定します。デフォルトでは、&lt;code>content&lt;/code> ディレクトリ以下のディレクトリ名が使われます（参考: &lt;a href="https://gohugo.io/content-management/types/">Content Types | Hugo&lt;/a>）。&lt;/dd>
&lt;dt>&lt;strong>&lt;code>layout&lt;/code>&lt;/strong> プロパティ&lt;/dt>
&lt;dd>レイアウト名を指定します。デフォルトでは、ページの種類によって &lt;code>section.html&lt;/code>（セクションテンプレート）や &lt;code>single.html&lt;/code>（シングルページテンプレート）が使用されます。&lt;/dd>
&lt;/dl>
&lt;p>これらの値の組み合わせによって、そのページをレンダリングするときに使用するレイアウトファイル（テンプレート）が次のように決まります。&lt;/p>
&lt;pre tabindex="0">&lt;code>layouts/&amp;lt;タイプ名&amp;gt;/&amp;lt;レイアウト名&amp;gt;.html
&lt;/code>&lt;/pre>&lt;p>実際には、すべてのコンテントタイプで共通のレイアウトファイルを使えばよいことが多く、そのようなケースでは &lt;code>layouts/_default/single.html&lt;/code> といったレイアウトファイルを配置します（タイプ名として &lt;code>_default&lt;/code> 指定されたかのように振る舞います）。
複数のレイアウトファイルが存在する場合に、どのレイアウトファイルが選択されるかのルールは下記を参照してください。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="../p/zg4n7q9/">レイアウト用のテンプレートの種類を理解する&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>通常、コンテントタイプとレイアウトファイル名は、ディレクトリ構造と Markdown ファイル名によって決まるようになっています。
例えば、次のような感じです。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>Markdown フィイル名&lt;/th>
 &lt;th>コンテントタイプ&lt;/th>
 &lt;th>レイアウトファイル&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>content/foo/_index.md&lt;/code>&lt;/td>
 &lt;td>&lt;code>foo&lt;/code>&lt;/td>
 &lt;td>&lt;code>section.html&lt;/code> や &lt;code>list.html&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>content/foo/page1.md&lt;/code>&lt;/td>
 &lt;td>&lt;code>foo&lt;/code>&lt;/td>
 &lt;td>&lt;code>single.html&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>content/bar/page2.md&lt;/code>&lt;/td>
 &lt;td>&lt;code>bar&lt;/code>&lt;/td>
 &lt;td>&lt;code>single.html&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>content/foo/bar/page3.md&lt;/code>&lt;/td>
 &lt;td>&lt;code>foo&lt;/code>&lt;/td>
 &lt;td>&lt;code>single.html&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>フロントマターで &lt;code>type&lt;/code> と &lt;code>layout&lt;/code> を指定することにより、これらのルールを無視して、強制的に使用するレイアウトファイルを変更することができます。
例を見た方が分かりやすいので、ここでは、「新着一覧」のページをサンプルとして作ってみます。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">記事の一覧を表示するくらいであれば、通常はショートコードで出力してしまった方が簡単です。
ここでは、特定のページだけレイアウトを大きく変更する必要があると想定しています&lt;/span>
&lt;/div>
&lt;h2 id="使用するレイアウトファイルを指定する例">使用するレイアウトファイルを指定する例&lt;/h2>
&lt;p>下記のテンプレートでは、更新日時が新しい順に、5 件分の記事をリスト表示しています。
このレイアウトは、「新着一覧」のページでしか使わない &lt;strong>特殊なレイアウト&lt;/strong> なので、レイアウトファイル自体も &lt;strong>&lt;code>layouts/special/latest.html&lt;/code>&lt;/strong> という特殊なパスに作成することにします。
このレイアウトファイルは、コンテントタイプとして &lt;code>special&lt;/code>、レイアウト名として &lt;code>latest&lt;/code> が設定された記事ファイルに適用されます。&lt;/p></description></item><item><title>Hugo でサーチエンジン用に sitemap.xml や robots.txt ファイルを配置する</title><link>https://maku77.github.io/p/qr4eox7/</link><pubDate>Sun, 26 Apr 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/qr4eox7/</guid><description>&lt;p>サーチエンジンに対して、インデックス登録させたいページを伝えるには、Web サイトに &lt;strong>&lt;code>sitemap.xml&lt;/code>&lt;/strong> や &lt;strong>&lt;code>robots.txt&lt;/code>&lt;/strong> というファイルを配置します。
Google の検索結果に影響するため、正しく理解して配置しましょう。&lt;/p>
&lt;h2 id="sitemapxml-と-robotstxt-の概要">sitemap.xml と robots.txt の概要&lt;/h2>
&lt;p>Web サイトのルートに &lt;code>sitemap.xml&lt;/code> や &lt;code>robots.txt&lt;/code> を置くと、下記のようなヒント情報を Google などの検索エンジンに伝えることができます。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>sitemap.xml&lt;/code>&lt;/strong> &amp;hellip; サイト内のページ一覧情報を記述します。検索エンジンは、サイト全体をクロールしなくても、この情報でページのインデックス情報を作成できるようになります。ページごとに更新日時 (YYYY-MM-DD) や優先度 (0.0〜1.0) を指定できます。&lt;/li>
&lt;li>&lt;strong>&lt;code>robots.txt&lt;/code>&lt;/strong> &amp;hellip; クロールしなくてもよいディレクトリやファイルを指定します。上記の &lt;code>sitemap.xml&lt;/code> の URL を指定することもできます。&lt;/li>
&lt;/ul>
&lt;p>もちろん、これらのファイルを用意したところで、どこまで反映されるかは検索エンジン側の実装によりますが、SEO 対策として少しでもヒントとなる情報を与えておくのが望ましいでしょう。&lt;/p>
&lt;h2 id="sitemapxml-を作成する">sitemap.xml を作成する&lt;/h2>
&lt;p>&lt;code>sitemap.xml&lt;/code> ファイルには、Google などの検索エンジンにインデックス登録してもらいたいページの一覧を記述します。&lt;/p>
&lt;h3 id="sitemapxml-のデフォルト出力">sitemap.xml のデフォルト出力&lt;/h3>
&lt;p>Hugo はデフォルトで Web サイトのルートに、&lt;a href="https://www.sitemaps.org/protocol.html">Sitemap protocol&lt;/a> に基づいた &lt;code>sitemap.xml&lt;/code> ファイルを出力するようになっています。
下記はデフォルト設定で出力される &lt;code>sitemap.xml&lt;/code> の例です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">sitemap.xml&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;urlset&lt;/span> &lt;span class="na">xmlns=&lt;/span>&lt;span class="s">&amp;#34;http://www.sitemaps.org/schemas/sitemap/0.9&amp;#34;&lt;/span> &lt;span class="na">xmlns:xhtml=&lt;/span>&lt;span class="s">&amp;#34;http://www.w3.org/1999/xhtml&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;url&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;loc&amp;gt;&lt;/span>https://example.com/page1/&lt;span class="nt">&amp;lt;/loc&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;lastmod&amp;gt;&lt;/span>2020-04-26T00:00:00+00:00&lt;span class="nt">&amp;lt;/lastmod&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/url&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;url&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;loc&amp;gt;&lt;/span>https://example.com/page2/&lt;span class="nt">&amp;lt;/loc&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;lastmod&amp;gt;&lt;/span>2020-04-25T00:00:00+00:00&lt;span class="nt">&amp;lt;/lastmod&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/url&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/urlset&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>この出力は、Hugo にデフォルトで組み込まれている &lt;code>sitemap.xml&lt;/code> テンプレートによって生成されています。
デフォルトのテンプレート定義は下記を見ると分かります。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/templates/sitemap-template/#hugos-sitemapxml">Hugo’s sitemap.xml&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/gohugoio/hugo/blob/master/tpl/tplimpl/embedded/templates/_default/sitemap.xml">gohugoio/hugo/tpl/tplimpl/embedded/templates/_default/sitemap.xml (GitHub)&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>このままで問題なければ、特に何も設定する必要はありませんが、出力内容をカスタマイズしたいときは、次のように &lt;code>sitemap.xml&lt;/code> 用のテンプレートファイルを生成する必要があります。
Hugo はデフォルトですべてのページを &lt;code>sitemap.xml&lt;/code> にリスト化しようとするので、Google などの検索結果に載せたくないページがある場合は、&lt;code>sitemap.xml&lt;/code> のカスタマイズが必要です。&lt;/p></description></item><item><title>Hugo のテンプレートの中で絵文字を使用する (emojify)</title><link>https://maku77.github.io/p/88e7tiz/</link><pubDate>Mon, 13 Apr 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/88e7tiz/</guid><description>&lt;h2 id="emojify-関数の概要">emojify 関数の概要&lt;/h2>
&lt;p>Hugo のテンプレートファイルの中で &lt;a href="https://gohugo.io/functions/emojify/">emojify 関数&lt;/a> を使用すると、GitHub や Slack などで使える有名どころの絵文字 (emoticons) を出力することができます。
使えるアイコンのリストは下記サイトで確認できます。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.webfx.com/tools/emoji-cheat-sheet/">🎁 Emoji cheat sheet for GitHub, Basecamp, Slack &amp;amp; more&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>例えば、&lt;code>:smile:&lt;/code> アイコンを表示したければ、任意のテンプレートファイルの中で次のように記述します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">emojify&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;:smile:&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="emojify-関数の使用例">emojify 関数の使用例&lt;/h2>
&lt;p>下記の例では、Hugo をサーバーモードで起動しているときに、ローカルファイルのパスをアイコン付きで表示します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">hugo&lt;/span>&lt;span class="na">.IsServer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">emojify&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;:memo:&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File.Filename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>



&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="360" height="37" src="../p/88e7tiz/img-001_hu13011386031368753153.png" alt="/p/88e7tiz/img-001.png" />
 &lt;figcaption>図: 表示結果&lt;/figcaption>
&lt;/figure></description></item><item><title>Hugo のパーシャルテンプレートから値を返す（関数化）(return)</title><link>https://maku77.github.io/p/4anjern/</link><pubDate>Mon, 06 Apr 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/4anjern/</guid><description>&lt;h2 id="パーシャルテンプレートを関数として使用する">パーシャルテンプレートを関数として使用する&lt;/h2>
&lt;p>&lt;a href="https://github.com/gohugoio/hugo/issues/5783">Hugo v.0.55&lt;/a> 以降のパーシャルテンプレートでは、テキストを出力する代わりに、値を &lt;strong>&lt;code>return&lt;/code>&lt;/strong> できるようになっています（参考: &lt;a href="https://gohugo.io/templates/partials/#returning-a-value-from-a-partial">Returning a value from a Partial ｜ Hugo&lt;/a>）。
この機能をうまく使うと、テンプレート内の共通処理をくくり出して、コードをスッキリさせることができます（通常のプログラミング言語の関数と同じイメージ）。&lt;/p>
&lt;p>例えば、次の &lt;code>my-add-100&lt;/code> パーシャルテンプレートは、引数で受け取った値に 100 を足した値を返します。
パーシャルテンプレートの呼び出し時に渡された引数は、コンテキスト (&lt;strong>&lt;code>.&lt;/code>&lt;/strong>) として参照できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/functions/my-add-100.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$ret&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">100&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$ret&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは、関数風に呼び出せるパーシャルテンプレートであることを示すために、&lt;code>functions&lt;/code> というディレクトリ以下に HTML ファイルを保存していますが、このあたりは自由です。
呼び出し側のテンプレートからは、次のように関数のように呼び出して、戻り値を受け取ることができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$ret&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;functions/my-add-100&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">50&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">戻り値: &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$ret&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>レンダリング結果は次のようになります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">戻り値: &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>150&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="パーシャルテンプレートに複数の値引数を渡す">パーシャルテンプレートに複数の値（引数）を渡す&lt;/h2>
&lt;p>パーシャルテンプレートに複数の値を渡すには、辞書オブジェクト（キー＆バリュー）の形で値を渡します。
次のパーシャンテンプレート (&lt;code>my-add&lt;/code>) は、2 つの数値を受け取り、それらを足し合わせた結果を返します。
ここでは、辞書のキー名として &lt;code>val1&lt;/code> と &lt;code>val2&lt;/code> を使用することを想定していますが、キー名は何でも構いません。
下記のように、パーシャルテンプレートの先頭で辞書キーを参照して変数に代入するようにしておくと、このパーシャルテンプレートがどのような辞書キーを期待しているのかが分かりやすくなります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/functions/my-add.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$v1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.val1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$v2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.val2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">add&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$v1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$v2&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このパーシャルテンプレートを呼び出すには、次のように &lt;strong>&lt;code>dict&lt;/code>&lt;/strong> 関数を使って辞書オブジェクトを作成して引数として渡します。
ここでは、&lt;code>val1&lt;/code> に 100、&lt;code>val2&lt;/code> に 200 という値を入れて渡しているので、結果として 300 という値が返ってきます。&lt;/p></description></item><item><title>Hugo でページ内リンク（アンカー）を張る</title><link>https://maku77.github.io/p/kmv4bjr/</link><pubDate>Sun, 05 Apr 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/kmv4bjr/</guid><description>&lt;p>ページ内リンクを張ることで、ワンクリックでページ内の任意の位置へジャンプできるようになります。&lt;/p>
&lt;h2 id="ヘッダ要素-h2-h3-h4-へのジャンプ">ヘッダ要素 (h2, h3, h4) へのジャンプ&lt;/h2>
&lt;h3 id="自動的に割り振られる-id-属性を使用する">自動的に割り振られる id 属性を使用する&lt;/h3>
&lt;p>Hugo はデフォルトで、ヘッダ要素（&lt;code>h2&lt;/code> などの見出し）に &lt;code>id&lt;/code> 属性を付けてくれます。
例えば、次のようなヘッダがあったとすると、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-md" data-lang="md">&lt;span class="line">&lt;span class="cl">Link to me
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>生成される &lt;code>h2&lt;/code> 要素には、次のように自動的に &lt;code>id&lt;/code> 属性が設定されます（スペースは &lt;code>-&lt;/code> に置き換えられます）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;link-to-me&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Link to me&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>よって、このヘッダ要素には、次のような内部リンクを張ることができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>[Link to me へジャンプ](#link-to-me)
&lt;/code>&lt;/pre>&lt;p>もちろん、他のページのヘッダ要素へのリンクを張ることもできます。&lt;/p>
&lt;pre tabindex="0">&lt;code>[Link to me へジャンプ](/posts/pagename/#link-to-me)
&lt;/code>&lt;/pre>&lt;h3 id="ヘッダ要素に独自の-id-属性を設定する">ヘッダ要素に独自の id 属性を設定する&lt;/h3>
&lt;p>ヘッダ要素に自動的に割り振られる &lt;code>id&lt;/code> 属性を使用することの欠点は、アルファベットや数字以外の文字が削除されてしまうことです。
また、見出しを変更すると &lt;code>id&lt;/code> 属性の値も変わってしまうので、リンク切れのリスクも高まります。&lt;/p>
&lt;p>例えば、次のような見出しがあったとすると、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-md" data-lang="md">&lt;span class="line">&lt;span class="cl">OGP とは
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>出力される HTML は次のようになります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ogp-&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>OGP とは&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>日本語の「とは」の部分が無視され、分かりにくい ID になってしまっています。
このような不完全な ID が割り当てられるのが嫌な場合は、次のようにして独自の ID を設定することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-md" data-lang="md">&lt;span class="line">&lt;span class="cl">OGP とは {#what-is-ogp}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>出力される HTML は次のようになります。&lt;/p></description></item><item><title>Hugo で「このページを編集 (Edit this page)」のリンクを表示する</title><link>https://maku77.github.io/p/vit4ckt/</link><pubDate>Wed, 01 Apr 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/vit4ckt/</guid><description>&lt;h2 id="github-の編集ページ">GitHub の編集ページ&lt;/h2>
&lt;p>GitHub には簡易的なエディタ機能があり、ウェブサイト上で Markdown ファイルを直接編集できるようになっています。
Hugo サイトのコンテンツを GitHub で管理しているのであれば、GitHub の編集ページにリンクを張っておくと便利かもしれません。
この編集ページを使用すれば、Git コマンドに不慣れな人でも手軽に Markdown ファイルを修正することができます。&lt;/p>
&lt;p>例えば、&lt;code>https://github.com/yourname/website/&lt;/code> といった GitHub リポジトリで Hugo のサイトコンテンツを管理している場合、トップページの Markdown ファイルを編集するための URL は次のようになります。&lt;/p>
&lt;pre tabindex="0">&lt;code>https://github.com/yourname/website/edit/master/content/_index.md
&lt;/code>&lt;/pre>&lt;p>ここでは、Hugo で生成する各ページに、上記のような編集ページへのリンクを出力することを考えてみます。&lt;/p>
&lt;h2 id="編集ページへのリンクを出力する">編集ページへのリンクを出力する&lt;/h2>
&lt;p>まず、GitHub リポジトリのベース URL は、Hugo の設定ファイルに、独自パラメータ &lt;strong>&lt;code>editBaseURL&lt;/code>&lt;/strong> として定義することにしましょう。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">hugo.toml&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">baseURL&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">languageCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ja-jp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">title&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;私のウェブサイト&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">params&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">editBaseURL&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/yourname/website/edit/master/content&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>次に、編集ページへのリンクを出力するためのパーシャルテンプレートを作成します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/edit-this-page.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.Params.editBaseURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$filepath&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File.Path&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;\\&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$url&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">printf&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;%s/%s&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.Params.editBaseURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$filepath&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$url&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Edit this page&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このテンプレートでは次のようなことを行っています。&lt;/p></description></item><item><title>hugo deploy コマンドで Azure などのクラウドサービス上にデプロイする</title><link>https://maku77.github.io/p/2ycmvbn/</link><pubDate>Wed, 25 Mar 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/2ycmvbn/</guid><description>&lt;p>Hugo は、各種クラウド (Azure Storage, Google Cloud Storage, AWS S3) 上のストレージにデプロイするためのコマンドを標準で搭載しています。&lt;/p>
&lt;h2 id="hugo-deploy-コマンドとは">hugo deploy コマンドとは&lt;/h2>
&lt;p>静的なウェブサイトをホスティングするために、次のような有名どころのストレージサービスを使用している人は多いと思います。&lt;/p>
&lt;ul>
&lt;li>Microsoft の Azure Storage (BLOB Storage)&lt;/li>
&lt;li>Google の GSC (Google Cloud Storage)&lt;/li>
&lt;li>Amazon の AWS S3&lt;/li>
&lt;/ul>
&lt;p>Hugo が搭載している &lt;strong>&lt;code>hugo deploy&lt;/code>&lt;/strong> コマンドを使用すると、プロジェクトの設定ファイル (&lt;code>hugo.toml&lt;/code>) に記述されたデプロイ設定に基づき、これらのサービスへのデプロイを行えるようになります。
もちろん、各種ストレージサービス用の CLI（コマンドラインツール）を使ってもデプロイすることはできるのですが、&lt;code>hugo deploy&lt;/code> を使うことでデプロイ方法が単純化（統一化）され、余計なコマンドラインツールをインストールしなくてもデプロイを実行できるという利点があります。&lt;/p>
&lt;p>ここでは、Azure のストレージコンテナ（BLOB ストレージ）に Hugo で生成した Web コンテンツをデプロイする方法を説明します。&lt;/p>
&lt;h2 id="azure-のストレージコンテナにデプロイする">Azure のストレージコンテナにデプロイする&lt;/h2>
&lt;h3 id="hugo-deploy-の設定">hugo deploy の設定&lt;/h3>
&lt;p>&lt;a href="https://azure.microsoft.com/ja-jp/services/storage/">Azure Storage&lt;/a> は、簡単に静的な Web サイトをホスティングする機能を提供しています。
ここでは詳細な手順は記載しませんが、下記サイトのように、(1) ストレージアカウントの作成、(2) 静的な Web サイトを有効化、という 1 分くらいの手順で Web サイトを立ち上げることができます。
利用料金も、小規模なサイトであれば月額 100 円もかからないくらいリーズナブルです。&lt;/p></description></item><item><title>Hugo サイトで SNS（Twitter や Facebook）用の表示設定を行う (OGP: Open Graph Protocol)</title><link>https://maku77.github.io/p/w7r8p6m/</link><pubDate>Sun, 15 Mar 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/w7r8p6m/</guid><description>&lt;p>Web ページに OGP (Open Graph Protocol) に基づいたメタ情報を記述しておくと、SNS アプリで URL をシェアしたときに表示される内容をカスタマイズできます。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="500" height="156" src="../p/w7r8p6m/img-001_hu14631482217709992015.png" alt="/p/w7r8p6m/img-001.png" />
 &lt;figcaption>図: OGP 設定によるリンク表示の例&lt;/figcaption>
&lt;/figure>

&lt;p>Open Graph のメタ情報として、どのような HTML タグを記述すればよいかは、下記のサイトを参考にしてください。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="https://maku.blog/p/awakw8i/">Facebook や Twitter でシェアするときに画像や説明文が表示されるようにする (OGP: Open Graph Protocol)&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="open-graph-タグを出力するためのパーシャルテンプレート">Open Graph タグを出力するためのパーシャルテンプレート&lt;/h2>
&lt;p>ここでは、Hugo のパーシャルテンプレートで Open Graph タグを出力するようにしてみます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/head/ogp.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:site_name&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:title&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:type&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;website&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:url&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Permalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:locale&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ja_JP&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Params.image&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Resources.GetMatch&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Params.image&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:image&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="na">.Permalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:image:width&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="na">.Width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:image:height&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="na">.Height&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Params.image&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">resources&lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Params.image&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:image&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="na">.Permalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:image:width&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="na">.Width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:image:height&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="na">.Height&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Description&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:description&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Description&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Summary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:description&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Summary&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Params.description&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;og:description&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Params.description&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Params.facebookAppId&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">property&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;fb:app_id&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>画像 (&lt;code>og:image&lt;/code>) や説明文 (&lt;code>og:description&lt;/code>) などの内容は、いくつかフォールバックの仕組みを入れて、次のように出力するようにしています。&lt;/p></description></item><item><title>Hugo で大きな画像ファイルから自動的に小さなサムネイル画像を生成する (Image Processing)</title><link>https://maku77.github.io/p/mxhzgwd/</link><pubDate>Wed, 15 Jan 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/mxhzgwd/</guid><description>&lt;h2 id="image-processing-機能とは">Image Processing 機能とは&lt;/h2>
&lt;p>Hugo の &lt;a href="https://gohugo.io/content-management/image-processing/">Image Processing 機能&lt;/a> を使用すると、&lt;a href="../p/9n8p6n4/">ページにバンドル&lt;/a> した 1 枚の画像ファイルを加工し、サムネイル画像などを自動的に生成することができます。&lt;/p>
&lt;p>例えば、デジカメで撮影した写真をウェブサイト上に掲載する場合、直接画像を貼り付けるとサイズが大きいため、小さなサムネイル画像からのリンクを用意することが多いと思います。
このような場合に、Image Processing 機能を使用すれば、サムネイル画像を手動で作成する手間をなくすことができます。&lt;/p>
&lt;h2 id="image-processing-の使用例">Image Processing の使用例&lt;/h2>
&lt;p>ここでは、下記のように、books セクションページ内に &lt;code>sample.png&lt;/code> というリソースが含まれているとします。&lt;/p>
&lt;ul>
&lt;li>&lt;code>content/&lt;/code>
&lt;ul>
&lt;li>&lt;code>books/&lt;/code>
&lt;ul>
&lt;li>&lt;code>_index.md&lt;/code>&lt;/li>
&lt;li>&lt;code>sample.png&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Image Processing の機能を使って画像の変換を行うには、&lt;a href="https://gohugo.io/content-management/page-resources/">Page Resources のオブジェクト&lt;/a> を取得する必要があります（&lt;code>Page&lt;/code> 変数ではないので注意）。
このオブジェクトは、&lt;a href="https://gohugo.io/variables/page/">Page 変数&lt;/a> の次のようなプロパティ、およびメソッドを使って取得することができます。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>.Resources&lt;/code>&lt;/strong>（バンドルされたすべてのリソースを参照する）&lt;/li>
&lt;li>&lt;strong>&lt;code>.Resources.ByType&lt;/code>&lt;/strong>（指定した種類のリソースだけ取り出す）
&lt;ul>
&lt;li>例: &lt;code>$resources := .Resources.ByType &amp;quot;image&amp;quot;&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>&lt;code>.Resources.Match&lt;/code>&lt;/strong>（ファイル名のパターンに一致するリソースだけ取り出す）
&lt;ul>
&lt;li>例: &lt;code>$resources := .Resources.Match &amp;quot;sample.png&amp;quot;&lt;/code>&lt;/li>
&lt;li>例: &lt;code>$resources := .Resources.Match &amp;quot;**.png&amp;quot;&lt;/code>&lt;/li>
&lt;li>例: &lt;code>$resources := .Resources.Match &amp;quot;images/**.png&amp;quot;&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>これらのメソッドは Markdown ファイル内から直接呼び出すことはできないので、実際にはショートコードやテンプレートファイルから利用することになります。&lt;/p>
&lt;p>例えば、次のようなショートコードを作成しておけば、元の画像ファイルがどのようなサイズであっても、強制的に 150x150 のサイズのサムネイル画像を生成して表示してくれます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/thumbnail.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$src&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;src&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Page.Resources.GetMatch&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$src&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="na">.Fill&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;150x150&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageUrl&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageRes&lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$imageUrl&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="na">alt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$src&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ショートコードから &lt;code>.Resources&lt;/code> オブジェクトを参照するときは、上記のように &lt;code>.Page.Resources&lt;/code> としなければいけないことに注意してください。&lt;/p></description></item><item><title>Hugo で Markdown ファイルに記述した HTML コードが削除されてしまう場合</title><link>https://maku77.github.io/p/mju5eox/</link><pubDate>Thu, 26 Dec 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/mju5eox/</guid><description>&lt;h2 id="goldmark-化による弊害">Goldmark 化による弊害&lt;/h2>
&lt;p>Hugo v0.60.0 から Markdown パーサーとして &lt;a href="https://github.com/yuin/goldmark/">Goldmark&lt;/a> が採用され、Markdown の解釈が微妙に変わっています。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/news/0.60.0-relnotes/">Now CommonMark Compliant! - Hugo&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>例えば、今までは &lt;code>.md&lt;/code> ファイル内に記述した HTML コードはそのまま出力されていたのに、デフォルトで取り除かれるようになっています。
これまでに作成した記事で HTML タグを使用している場合はちょっと困ってしまいます。&lt;/p>
&lt;h2 id="markdown-ファイル内に-html-コードを記述できるようにする">Markdown ファイル内に HTML コードを記述できるようにする&lt;/h2>
&lt;p>&lt;code>.md&lt;/code> ファイルに記述した HTML コードを、これまで通り出力できるようにするには、Hugo の設定ファイルで次のように指定します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">hugo.toml（TOML フォーマットの場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">markup&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">goldmark&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">renderer&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">unsafe&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">hugo.yaml（YAML フォーマットの場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">markup&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">goldmark&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">renderer&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">unsafe&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>もちろん、使用する Markdown パーサー自体を旧来の BlackFriday に設定するという方法もあります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">markup&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">defaultMarkdownHandler&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;blackfriday&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ただ、Goldmark の方が高速に動作するようなので、前向きに Goldmark に乗り換えることを考えた方がよいでしょう。&lt;/p></description></item><item><title>Hugo でドラフト指定したセクションが公開されてしまう場合</title><link>https://maku77.github.io/p/ynv4ago/</link><pubDate>Thu, 26 Dec 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ynv4ago/</guid><description>&lt;p>Hugo のトラブルシューティングです（v0.62.0 で確認）。&lt;/p>
&lt;h2 id="ドラフトセクションが公開されてしまう問題">ドラフトセクションが公開されてしまう問題&lt;/h2>
&lt;p>Hugo では、記事ページのフロントマターに、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">draft&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>という感じでドラフト指定を行なっておくと、&lt;code>hugo&lt;/code> コマンドでページ生成するときに &lt;strong>&lt;code>-D&lt;/code>&lt;/strong> オプションを付けない限り、そのページは出力されなくなります。
しかし、セクションページに関しては、上記のように指定していても、必ず出力されてしまいます（v0.57 くらいからこんな振る舞いになってしまったような・・・）。&lt;/p>
&lt;p>例えば、下記のようにトップレベルのセクションを一覧表示しようとすると、ドラフトのセクションまで出力されてしまいます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Sections&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>このあたりの振る舞いは下記で議論されていて、&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/gohugoio/hugo/issues/6312">Improve _index.md vs draft · Issue #6312 · gohugoio/hugo · GitHub&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>作者の bep 氏 (Bjørn Erik Pedersen) によると、下記の回答がすべてを表しているようです。&lt;/p>
&lt;blockquote>
&lt;p>The original purpose of draft did not include section pages &amp;ndash; as that was not a thing back then.
（当初はドラフト機能はセクションページを対象にすることを考えていなかった）&lt;/p>
&lt;/blockquote>
&lt;p>セクションをドラフトとしてマークできるようにした場合、その下にぶらさがるページはどう振舞うべきなんだ（一時的にそのセクション自体が存在しないものとしてセクション外に出すの？）とか、仕様が複雑になってしまうのであまり振る舞いを変えたくないという事情があるみたいです。&lt;/p>
&lt;p>とは言っても、セクション全体をドラフトとして扱うという機能は需要があるはずです。
bep 氏もドラフトセクションの機能は検討すると言っているようなので、将来のバージョンに期待したいと思います。&lt;/p></description></item><item><title>Hugo でGoogle カスタム検索を設置して記事を検索できるようにする</title><link>https://maku77.github.io/p/n4o7o6m/</link><pubDate>Sun, 10 Nov 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/n4o7o6m/</guid><description>&lt;p>Google カスタム検索エンジンによる検索フォームを Hugo のサイトに設置することで、簡単にサイト内の記事を検索することができるようになります。&lt;/p>
&lt;h2 id="google-カスタム検索エンジンに自分のサイトを登録する">Google カスタム検索エンジンに自分のサイトを登録する&lt;/h2>
&lt;p>まず、Google カスタム検索エンジンを適用する Web サイトは、インターネット上に公開されている必要があります。
プライベートな Hugo サーバーを使用する場合に検索機能を付けたい場合は、&lt;a href="../p/p4n5m3i/">自己完結する全文検索の仕組み&lt;/a> を導入する必要があります。
ここでは、すでにインターネット上に公開されている Web サーバーがあるという前提で話を進めます。&lt;/p>
&lt;p>カスタム検索エンジンの登録は下記のサイトから行えます。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://cse.google.com/">Google カスタム検索エンジン&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>&lt;code>追加&lt;/code>&lt;/strong> ボタンを押して、自分の Web サイトのアドレスを入力するだけで登録は完了します。&lt;/p>
&lt;h2 id="検索ページを表示する">検索ページを表示する&lt;/h2>
&lt;p>Web サイトをカスタム検索エンジンに登録すると、Google のサーバ上に、カスタム検索用のページが作成されます。
&lt;a href="http://cse.google.com/all">カスタム検索のコントロールパネル&lt;/a> から、登録した検索エンジンを選択し、&lt;strong>&lt;code>公開 URL&lt;/code>&lt;/strong> の欄を確認してみてください。
下記のようなアドレスが生成されているはずです（下記アドレスの cx パラメータ部分は適当です）。&lt;/p>
&lt;pre tabindex="0">&lt;code>https://cse.google.com/cse?cx=207539779230035260336:1pkduco3un7
&lt;/code>&lt;/pre>&lt;p>あとは、Markdown ファイルの中から、次のようにリンクを張ってやれば、即席のカスタム検索サイトの完成です。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-md" data-lang="md">&lt;span class="line">&lt;span class="cl">[&lt;span class="nt">サイト内検索&lt;/span>](&lt;span class="na">https://cse.google.com/cse?cx=207539779230035260336:1pkduco3un7&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>

&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="600" height="164" src="../p/n4o7o6m/img-001_hu9907211324838554343.png" alt="/p/n4o7o6m/img-001.png" />
 &lt;figcaption>図: 表示例&lt;/figcaption>
&lt;/figure>

&lt;h2 id="hugo-のページ内に検索フォームと検索結果を表示する">Hugo のページ内に検索フォームと検索結果を表示する&lt;/h2>
&lt;p>上記のやり方では、Google のサーバ上に生成された検索ページへただジャンプするだけでした。
ここでは、Hugo の記事ページ内に検索フォームと、検索結果を表示できるようにしてみます。&lt;/p>
&lt;p>まず、カスタム検索のサイトから、ページ埋め込み用の HTML コードを取得します。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="600" height="455" src="../p/n4o7o6m/img-002_hu2668069663622772160.png" alt="/p/n4o7o6m/img-002.png" />
 &lt;figcaption>図: カスタム検索用の HTML コードを生成&lt;/figcaption>
&lt;/figure>

&lt;ol>
&lt;li>&lt;a href="http://cse.google.com/all">カスタム検索のコントロールパネル&lt;/a> から、登録した検索エンジンを選択する&lt;/li>
&lt;li>&lt;code>デザイン&lt;/code> のタブから、&lt;code>全幅&lt;/code> のデザインを選択する&lt;/li>
&lt;li>&lt;code>保存してコードを取得する&lt;/code> ボタンを押す&lt;/li>
&lt;/ol>
&lt;p>上記のようにポチポチ入力していくと、下記のようなコードが取得できるはずです（バージョンにより変更される可能性があります）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">async&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cse.google.com/cse.js?cx=207539779230035260336:1pkduco3un7&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;gcse-search&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>後は、このコードを、任意の記事ページの Markdown ファイル内にコピペするだけです。&lt;/p></description></item><item><title>Python で Markdown ファイルのフロントマターの記述が正しいかチェックする</title><link>https://maku77.github.io/p/bes7iu7/</link><pubDate>Tue, 22 Oct 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/bes7iu7/</guid><description>&lt;p>下記の Python スクリプト (&lt;code>check-front-matter.py&lt;/code>) は、Markdown ファイルに記載された YAML フロントマターの内容が正しいかどうかを調べるサンプルスクリプトです。
確認内容は、&lt;code>validate()&lt;/code> 関数の中に記載されていますので、用途に応じてこの内容を書き換えてください。
下記のサンプルコードでは、フロントマターに &lt;code>title&lt;/code> と &lt;code>date&lt;/code> が記載されているかをチェックしています。&lt;/p>
&lt;h2 id="使い方">使い方&lt;/h2>
&lt;p>PyYAML というライブラリを使用しているので、下記のようにインストールしておく必要があります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">PyYAML のインストール&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> pip install pyyaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>次のように実行すると、カレントディレクトリ以下の全ての Markdown ファイル (.md) の内容を検証できます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> python check-front-matter.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">content/title3.md: Missing title or date
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">content/title4.md: Missing title or date
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">content/title5.md: Missing title or date
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>この例では、3 つの Markdown ファイルのフロントマターが正しく記述されていないことが検出されています。&lt;/p>
&lt;h2 id="サンプルスクリプト">サンプルスクリプト&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">check-front-matter.py&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="ch">#!/usr/bin/env python3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">YamlFrontMatter&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;YAML ファイルからフロントマターを取得するクラスです。&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="fm">__init__&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">filename&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">filename&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">filename&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">load_frontmatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Markdown ファイルのフロントマターを読みこんで、
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Python のオブジェクトとして返します。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">encoding&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;utf-8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="bp">self&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">__load_front_matter_text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">yaml&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">safe_load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">text&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">__load_front_matter_text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="bp">self&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ファイルオブジェクトからフロントマター部分のテキストを抽出します。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> セパレータの &amp;#34;---&amp;#34; は含みません。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">line&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">readline&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rstrip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\r\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s1">&amp;#39;---&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">raise&lt;/span> &lt;span class="ne">Exception&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;: Front matter must begin with &amp;#34;---&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">line&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">line&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rstrip&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\r\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;---&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">result&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">raise&lt;/span> &lt;span class="ne">Exception&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;: Front matter must end with &amp;#34;---&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># カレントディレクトリ以下のすべての Markdown ファイルの&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># フロントマターの記述が正しいかチェックします。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="vm">__name__&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;__main__&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">glob&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">sys&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">validate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fm&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> フロントマターの内容 (fm) が正しいかチェックします。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ここの実装は自由に変更してください。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">fm&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;date&amp;#39;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">fm&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(filename + &amp;#39;: OK&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;: Missing title or date&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">filename&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">glob&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iglob&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;**/*.md&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">recursive&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">YamlFrontMatter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load_frontmatter&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">validate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filename&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fm&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">except&lt;/span> &lt;span class="ne">Exception&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">stderr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sys&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Hugo でサイト構造を変えてもページの URL が変わらないようにする (Permalink)</title><link>https://maku77.github.io/p/u9r9p7n/</link><pubDate>Sun, 20 Oct 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/u9r9p7n/</guid><description>&lt;h2 id="各ページの-url-は変わってはいけない">各ページの URL は変わってはいけない&lt;/h2>
&lt;p>Hugo によって出力される HTML ファイルのパスは、デフォルトでは &lt;code>content&lt;/code> ディレクトリ以下のセクション構成（ディレクトリ構成）やファイル名によって決定されます。
サイトの規模が小さいうちはこれでもよいのですが、Markdown ファイル数が増えてくると、ディレクトリ構造を変えたり、ファイル名を整理したくなってきます。
それによってページの URL がころころ変わってしまうと、せっかくリンクを張ってくれたサイトがあっても、すべてリンク切れになってしまいます。&lt;/p>
&lt;p>このようなリンク切れを起こさないようにするのが &lt;strong>パーマリンク (permalink)&lt;/strong> という考え方で、各ページに不変の ID を割り当てて URL が変わらないようにします。
例えば、Amazon の各商品のページは 10 桁の ISBN-10 という ID でアクセスできるようになっています。&lt;/p>
&lt;pre tabindex="0">&lt;code>https://www.amazon.co.jp/dp/4592146980/
&lt;/code>&lt;/pre>&lt;p>Hugo でも、各ページにこのような ID ベースの URL を割り当てることができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">不変の URL を割り当てた例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">https://&amp;lt;your-hugo-site&amp;gt;/p/abc1234/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="hugo-で出力するページに固定の-url-を割り当てる">Hugo で出力するページに固定の URL を割り当てる&lt;/h2>
&lt;p>Markdown ファイルのフロントマターに &lt;strong>&lt;code>url&lt;/code>&lt;/strong> プロパティを設定すると、そのページの URL を固定することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ページタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;p/abc1234/&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2019-10-20&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>例えば、上記のようなフロントマターを記述しておくと、そのページには必ず &lt;code>https://ドメイン名/p/abc1234/&lt;/code> というアドレスでアクセスできるようになります。
一階層目のパスは別の用途で使用する可能性があるため、ここでは &lt;code>p&lt;/code> という階層を掘って、permalink 化した記事を格納するようにしています（Amazon の &lt;code>dp&lt;/code> と同様です）。
このようにすることで、Markdown ファイルのファイル名や記事タイトル、ディレクトリ構成を変えても、最終的な URL を変化させずに済みます。&lt;/p></description></item><item><title>Hugo で画像ファイルを Markdown ファイルと同じディレクトリに置く (Page Bundle)</title><link>https://maku77.github.io/p/9n8p6n4/</link><pubDate>Sat, 19 Oct 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/9n8p6n4/</guid><description>&lt;h2 id="ページバンドルとは">ページバンドルとは&lt;/h2>
&lt;p>初期の頃の Hugo では、画像ファイルは &lt;code>static&lt;/code> ディレクトリに置いて、記事ファイル (Markdown) と別々のディレクトリで管理するという方法がとられていました。&lt;/p>
&lt;ul>
&lt;li>&lt;code>content/&lt;/code>
&lt;ul>
&lt;li>&lt;code>_index.md&lt;/code>&lt;/li>
&lt;li>&lt;code>page1.md&lt;/code>&lt;/li>
&lt;li>&lt;code>page2.md&lt;/code>&lt;/li>
&lt;li>&lt;code>page3.md&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>static/&lt;/code>
&lt;ul>
&lt;li>&lt;code>image1.png&lt;/code>&lt;/li>
&lt;li>&lt;code>image2.png&lt;/code>&lt;/li>
&lt;li>&lt;code>image3.png&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>しかし、これでは Markdown ファイルと画像ファイルをバラバラに管理しないといけないというユーザーの不満が出て、現状は &lt;code>content&lt;/code> ディレクトリ以下に一緒に配置できるようになっています。
この仕組みを &lt;strong>ページバンドル (Page Bundle)&lt;/strong> と言います。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="https://gohugo.io/content-management/page-bundles">Page Bundles - Hugo&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ページバンドルは、その名のとおり、各ページにバンドルする形で画像ファイル（リソース）を保持するという考え方です。
ページバンドルを作成するには、&lt;code>content&lt;/code> ディレクトリ以下に &lt;code>_index.md&lt;/code> あるいは &lt;code>index.md&lt;/code> を含むディレクトリを作成し、そのディレクトリ内に一緒に画像ファイルなどのリソースファイルを格納します（画像ファイル以外のファイルでも OK）。
つまり、バンドルされた画像ファイルを表示したいページは、&lt;code>_index.md&lt;/code> あるいは &lt;code>index.md&lt;/code> というファイル名のコンテンツでなければいけません。&lt;/p>
&lt;p>Page Bundle には、&lt;strong>Branch Bundle&lt;/strong> と &lt;strong>Leaf Bundle&lt;/strong> の 2 種類があり、&lt;code>_index.md&lt;/code> を含むディレクトリは Branch Bundle となり、&lt;code>index.md&lt;/code> を含むディレクトリは Leaf Bundle となります。&lt;/p>
&lt;ul>
&lt;li>&lt;code>content/&lt;/code>
&lt;ul>
&lt;li>&lt;code>branch/&lt;/code> &lt;strong>← Branch Bundle&lt;/strong>
&lt;ul>
&lt;li>&lt;code>_index.md&lt;/code>&lt;/li>
&lt;li>&lt;code>image1.png&lt;/code>&lt;/li>
&lt;li>&lt;code>data/&lt;/code>
&lt;ul>
&lt;li>&lt;code>image2.png&lt;/code> （不正なリソース）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>leaf/&lt;/code> &lt;strong>← Leaf Bundle&lt;/strong>
&lt;ul>
&lt;li>&lt;code>index.md&lt;/code>&lt;/li>
&lt;li>&lt;code>image3.png&lt;/code> （Leaf Bundle のリソース）&lt;/li>
&lt;li>&lt;code>data/&lt;/code>
&lt;ul>
&lt;li>&lt;code>image4.png&lt;/code> （Leaf Bundle のリソース）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Branch Bundle は、いわゆるセクションを構成するものなので、その下にさらに別のバンドル (Branch Bundle あるいは Leaf Bundle) を入れ子で持つことができます。
一方 Leaf Bundle は、末端のページであり、その下に別のバンドルを持つことはできません（というかその下に子ページを作れない）。&lt;/p></description></item><item><title>Hugo サイトの favicon.ico をサイトのルートに配置する (static)</title><link>https://maku77.github.io/p/vu7hr2b/</link><pubDate>Tue, 10 Sep 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/vu7hr2b/</guid><description>&lt;p>Hugo によって生成した Web サイトのルート階層に &lt;strong>&lt;code>favicon.ico&lt;/code>&lt;/strong> を配置するには、&lt;code>static&lt;/code> ディレクトリに &lt;code>favicon.ico&lt;/code> ファイルをそのまま置いておけば OK です。&lt;/p>
&lt;pre tabindex="0">&lt;code>website/
 +-- content/
 +-- layouts/
 +-- static/
 +-- favicon.ico
&lt;/code>&lt;/pre>&lt;p>&lt;code>static&lt;/code> ディレクトリ以下に置いたファイル群は、その階層構造を保ったまま出力ディレクトリへコピーされます。&lt;/p>
&lt;p>favicon の詳細については下記を参考にしてください。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="../p/bdox8hr/">Web サイトに favicon を設定する&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Hugo でドラフトページの一覧を簡単に確認できるようにする</title><link>https://maku77.github.io/p/qpcvfzi/</link><pubDate>Wed, 22 May 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/qpcvfzi/</guid><description>&lt;h2 id="やりたいこと">やりたいこと&lt;/h2>
&lt;p>Hugo では、作成途中の記事ページを&lt;a href="../p/m2oatdw/">ドラフトとしてマークしておく&lt;/a>と、デフォルトで非公開扱いになるので、気軽に記事を書き始めることができます。
ただ、ドラフトページがたくさん溜まってくると、自分が中途半端に書き始めた記事が散らばって分かりにくくなってしまいます。
そこで、ここでは下記のような仕組みを実装して、Hugo のドラフト機能をより便利に使用できるようにします。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="271" height="167" src="../p/qpcvfzi/img-001.png" alt="/p/qpcvfzi/img-001.png" />
 &lt;figcaption>図: ドラフト一覧のページへ移動するボタン&lt;/figcaption>
&lt;/figure>

&lt;ul>
&lt;li>ドラフトの一覧ページに飛ぶための &lt;strong>ドラフト記事一覧ボタン&lt;/strong> をサイドバー上に表示する（上図）&lt;/li>
&lt;li>ドラフトの一覧ページでは、&lt;strong>最終更新日&lt;/strong> や &lt;strong>タグ情報&lt;/strong> も一緒に表示する&lt;/li>
&lt;li>上記は &lt;strong>ローカルでの作業中のみ表示する&lt;/strong> こととする（具体的には &lt;code>hugo server&lt;/code> で実行中のみ）&lt;/li>
&lt;/ul>
&lt;h2 id="ドラフト記事一覧のページにジャンプするボタンを配置する">ドラフト記事一覧のページにジャンプするボタンを配置する&lt;/h2>
&lt;p>ドラフトページへジャンプするためのボタンは、レイアウトファイルから簡単に配置できるように、パーシャルファイルとして作成します。
個人的に、ローカルでしか有効にしないコードは、下記のように &lt;code>debug&lt;/code> ディレクトリの下に入れるようにしています。
そして、全体のコードを &lt;strong>&lt;code>if hugo.IsServer&lt;/code>&lt;/strong> の条件で囲むことで、ローカルサーバーで起動しているときのみ出力されるようにしています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/debug/draft-button.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">hugo&lt;/span>&lt;span class="na">.IsServer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nc">xDraftButton&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">display&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">block&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">text-align&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">center&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="kt">%&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">font-weight&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">bolder&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">color&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">white&lt;/span> &lt;span class="cp">!important&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">background&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">blue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.3&lt;/span>&lt;span class="kt">em&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="kt">em&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">border-radius&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="kt">em&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">style&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/drafts/&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;xDraftButton&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ドラフト記事一覧&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>簡単に言えば、このパーシャルは、&lt;code>https://example.com/drafts/&lt;/code> といった URL へのリンクを出力しているだけです。
上記では &lt;code>style&lt;/code> 要素も含めてしまっていますが、みなさんはちゃんと CSS ファイルでスタイル定義するようにしてください。&lt;/p>
&lt;p>このパーシャルファイルを、サイドバーを出力するテンプレートから呼び出します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/sidebar/all.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;debug/draft-button&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="ドラフト記事一覧を表示するページを作成する">ドラフト記事一覧を表示するページを作成する&lt;/h2>
&lt;p>ドラフト記事をリストアップするためのショートコードを作成します。
下記のようにすれば、フロントマター部分に &lt;code>draft: true&lt;/code> と記述された記事のみをループ処理できます。&lt;/p></description></item><item><title>Hugo で各ページに目次を表示する (.TableOfContents)</title><link>https://maku77.github.io/p/x9tbr8o/</link><pubDate>Tue, 21 May 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/x9tbr8o/</guid><description>&lt;p>Hugo 組み込みのページ変数 &lt;strong>&lt;code>.TableOfContents&lt;/code>&lt;/strong> を使用すると、各ページに簡単に目次を表示することができます。&lt;/p>
&lt;h2 id="hugo-の目次機能">Hugo の目次機能&lt;/h2>
&lt;p>各ページの Markdown ファイル (&lt;code>.md&lt;/code>) には、&lt;code>##&lt;/code> や &lt;code>----&lt;/code> を使ったセクション（&lt;code>h2&lt;/code> 要素として出力される）を記述していると思います。
Hugo は、これらの &lt;strong>セクション名から自動的に目次 (Table of Contents) を出力する機能&lt;/strong> を搭載しています。
下記は、自動的に出力した目次の例です。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="482" height="190" src="../p/x9tbr8o/img-001.png" alt="/p/x9tbr8o/img-001.png" />
 &lt;figcaption>図: Hugo で自動生成された目次&lt;/figcaption>
&lt;/figure>

&lt;h2 id="テンプレートの記述方法v059以前">テンプレートの記述方法（v0.59以前）&lt;/h2>
&lt;p>目次を自動的に出力するには、テンプレートファイル内で &lt;strong>&lt;code>.TableOfContents&lt;/code>&lt;/strong> というページ変数を参照します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.TableOfContents&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">aside&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;xToc&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;xToc_title&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>目次&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">aside&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは、目次情報がないときに何も表示しないように、&lt;code>with&lt;/code> で分岐処理を行っています（2019-12-26 追記: v0.60.0 以降は出力内容が変わったため、このように分岐処理を行えなくなりました。次のセクションを参照してください）。&lt;/p>
&lt;p>Hugo が自動的に生成する &lt;code>.TableOfContents&lt;/code> の値は、&lt;code>ul&lt;/code> 要素と &lt;code>li&lt;/code> 要素によって構成されています。
出力された HTML の内容を見て、スタイルシート (CSS) の調整をするとよいでしょう。
下記は CSS の記述例です。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-css" data-lang="css">&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">xToc&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">font-size&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">smaller&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">border-radius&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="kt">em&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">border&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">solid&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="kc">lightgray&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="kt">em&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="kt">em&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">line-height&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">xToc_title&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">font-weight&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">bolder&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">xToc&lt;/span> &lt;span class="nt">ul&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">list-style-type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">none&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding-left&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">xToc&lt;/span> &lt;span class="nt">li&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding-top&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="cp">!important&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">xToc&lt;/span> &lt;span class="nt">li&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nt">ul&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding-left&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="kt">em&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">width&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="kt">%&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">xToc&lt;/span> &lt;span class="nt">a&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">font-weight&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">normal&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">display&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">block&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">border-bottom&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">dashed&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="kc">lightgray&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="テンプレートの記述方法v060以降">テンプレートの記述方法（v0.60以降）&lt;/h2>
&lt;p>Hugo v0.60 から Markdown パーサーが Goldmark に変更され、Table of Contents の出力内容も変わってしまいました。
これまでは、ページ内に見出し（&lt;code>h2&lt;/code> 要素など）が存在しない場合は、&lt;code>.TableOfContents&lt;/code> 変数の値は空っぽになっていたので、その場合は「目次」というタイトルも含めて何も出力しない、という制御ができていました。
しかし、v0.60 以降は、ページ内に一切見出しが存在しなくても &lt;code>.TableOfContents&lt;/code> の値には次のような文字列が入ってしまいます。&lt;/p></description></item><item><title>Hugo でページタイトルに自動でセクションプレフィックスを付ける</title><link>https://maku77.github.io/p/dunigdz/</link><pubDate>Fri, 17 May 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/dunigdz/</guid><description>&lt;p>Hugo で多くのコンテンツを作成する場合、記事の種類ごとにセクション（ディレクトリ）に分けて管理することになります。
このような場合、各ページのタイトルに対して、セクションのタイトルを自動で付加できれば、ページタイトルの管理が楽になります。&lt;/p>
&lt;h2 id="何をするか">何をするか？&lt;/h2>
&lt;p>例えば、次のようなセクション構造で記事を管理しているとします。&lt;/p>
&lt;pre tabindex="0">&lt;code>contents/
 +-- _index.md (home page)
 +-- section1/
 | +-- _index.md (section page)
 | +-- page1.md (single page)
 | +-- page2.md (single page)
 | +-- page3.md (single page)
 +-- section2/
 +-- _index.md (section page)
 +-- ...
&lt;/code>&lt;/pre>&lt;p>各ディレクトリにある &lt;strong>&lt;code>_index.md&lt;/code>&lt;/strong> は、セクションページのコンテンツファイルとして使用されます。
このファイルのフロントマターには、下記のようにセクションのタイトルを記述することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">contents/section1/_index.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;セクション1&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2019-05-17&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">セクションページの本文…&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このセクションタイトルは、セクションページ（このケースでは &lt;code>https://example.com/section1/&lt;/code>）にアクセスしたときに使用されるものですが、同じセクションに所属する記事ページのタイトルのプレフィックスにも自動で付加できると便利です。&lt;/p>
&lt;p>例えば、&lt;code>section1&lt;/code> に所属する記事ページとして下記のようなコンテンツがあるとします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">contents/section1/page.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;タイトル1&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2019-05-17&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">ページの本文…&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このように記述されているときに、表示するタイトルを &lt;code>タイトル1&lt;/code> ではなく、&lt;strong>&lt;code>セクション1: タイトル1&lt;/code>&lt;/strong> のようにしたいということです。
このように、セクションタイトルを付加することで、あるページを単独で表示したときに、どのような階層に配置された記事なのかが分かりやすくなります。&lt;/p>
&lt;h2 id="セクションプレフィックスの実装">セクションプレフィックスの実装&lt;/h2>
&lt;p>ここでは、シングルページテンプレートで、セクションプレフィックスの仕組みを実現する方法を示します。
下記の例では、構築したページタイトルを &lt;code>$pageTitle&lt;/code> という変数に格納しています。&lt;/p></description></item><item><title>Hugo でソースコードをハイライト表示する (highlight)</title><link>https://maku77.github.io/p/gxk6qat/</link><pubDate>Sun, 17 Mar 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/gxk6qat/</guid><description>&lt;h2 id="pygments-によるコードハイライト">Pygments によるコードハイライト&lt;/h2>
&lt;p>Hugo の設定ファイル &lt;code>config.toml&lt;/code> の中で、下記のように設定しておくと、&lt;a href="http://pygments.org/">Pygments&lt;/a> によるコードブロックのハイライト機能を有効にすることができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">pygmentsCodeFences&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>例えば、Java のソースコードであれば、Markdown ファイルの中で、下記のように言語名 (&lt;code>java&lt;/code>) を指定してコードブロックを記述するだけで、その言語に特化したハイライト表示を行ってくれます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-md" data-lang="md">&lt;span class="line">&lt;span class="cl">&lt;span class="s">```java
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">Main&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">static&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">...&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">System&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="s">```&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>



&lt;figure class="xImage">
 &lt;img style="" width="500" height="146" src="../p/gxk6qat/img-001.png" alt="/p/gxk6qat/img-001.png" />
 &lt;figcaption>図: ハイライト表示例&lt;/figcaption>
&lt;/figure>

&lt;h2 id="highlight-ショートコードによるコードハイライト">highlight ショートコードによるコードハイライト&lt;/h2>
&lt;p>Hugo の組み込みショートコードとして &lt;strong>&lt;code>highlight&lt;/code>&lt;/strong> が用意されています。
このショートコードを使用すると、&lt;code>pyghmentsCodeFences&lt;/code> を使う方法よりも高度なコードハイライトを行えます。
例えば、下記のように、行番号を表示したり、特定の行を強調表示することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>{{&amp;lt; highlight java &amp;#34;linenos=table, hl_lines=3&amp;#34; &amp;gt;}}
public class Main {
 public static void main(String... args) {
 System.out.println(&amp;#34;Hello&amp;#34;);
 }
}
{{&amp;lt; /highlight &amp;gt;}}
&lt;/code>&lt;/pre>

&lt;figure class="xImage">
 &lt;img style="" width="500" height="146" src="../p/gxk6qat/img-002.png" alt="/p/gxk6qat/img-002.png" />
 &lt;figcaption>図: ハイライト表示例&lt;/figcaption>
&lt;/figure>

&lt;p>色々なオプションが用意されているので、詳しくは下記の Hugo ドキュメントを参照してください。&lt;/p></description></item><item><title>Hugo でリンクをページからの相対パスで出力するようにする (relativeurls)</title><link>https://maku77.github.io/p/32n9scv/</link><pubDate>Thu, 21 Feb 2019 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/32n9scv/</guid><description>&lt;p>サイト内のページへのリンクを &lt;code>/sec1/sec2/&lt;/code> のように記述しておくと、デフォルトではそのまま &lt;code>/sec1/sec2/&lt;/code> へのリンクとして出力されます（つまり、&lt;code>baseURL&lt;/code> からの相対パスになります）。&lt;/p>
&lt;p>Hugo の設定ファイル &lt;code>config.toml&lt;/code>（あるいは &lt;code>config.yaml&lt;/code>）で &lt;strong>&lt;code>relativeurls = true&lt;/code>&lt;/strong> という設定を追加しておくと、各リンクが現在のページからの相対パスで出力されるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">config.toml の例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">baseURL&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://example.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">relativeurls&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">languageCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ja-jp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">title&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;サンプル Web サイト&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>例えば、&lt;code>/content/posts/sample.md&lt;/code> というコンテンツファイル内に &lt;code>/about/&lt;/code> というリンクを記載しておくと、出力されるリンクのパスは &lt;code>../about/&lt;/code> になります。&lt;/p></description></item><item><title>Hugo で参照するデータファイルをショートコードのパラメータで切り替える</title><link>https://maku77.github.io/p/jbi9ojq/</link><pubDate>Fri, 07 Dec 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/jbi9ojq/</guid><description>&lt;p>下記の記事では、data ディレクトリの基本的な使い方を説明しています。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="../p/5ru4kte/">全ページから参照できるデータを用意する（&lt;code>data&lt;/code> ディレクトリ）&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ここではもう少し踏み込んで、ショートコードを使って、パラメータで指定した名前のデータファイルを読み込めるようにしてみます。&lt;/p>
&lt;p>まず、サンプルデータとして下記のようなデータファイルを用意します。
ファミコンのゲームタイトルの一覧です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">data/games/nes.yaml （データファイル）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">-&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ドンキーコング&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="ld">1983-07-15&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">maker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">任天堂&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>-&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ドンキーコングJR.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="ld">1983-07-15&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">maker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">任天堂&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>-&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ポパイ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="ld">1983-07-15&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">maker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">任天堂&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>次に、このデータファイルを使って、HTML の table として出力するショートコードを作成します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/games.html （ショートコード）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">table&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">thead&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">tr&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">th&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>発売日&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">th&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">th&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タイトル&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">th&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">th&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>メーカー&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">th&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">tr&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">thead&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">tbody&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Data.games.nes&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">tr&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">td&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.date&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">td&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">td&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">td&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">td&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.maker&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">td&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">tr&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">tbody&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">table&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>コンテンツページから、次のように使用することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/ref/nes-games.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ファミコンのゲームタイトル一覧&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="l">% games %}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のショートコードは、&lt;code>data/games/nes.yaml&lt;/code> という決まったデータファイルを読み込むようにしていますが、下記のようにすれば、パラメータで指定した YAML ファイルを読み込めるようになります。
こうすることで、例えば、スーパーファミコンのタイトルリストを別の YAML ファイルで作成しておき、同じショートコードを使ってテーブル出力できるようになります。&lt;/p></description></item><item><title>Hugo で Markdown ファイルに本文が記述されていない場合だけ特別な出力をする</title><link>https://maku77.github.io/p/7m6n4j2/</link><pubDate>Fri, 02 Nov 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/7m6n4j2/</guid><description>&lt;p>例えば、あるページの Markdown ファイルが下記のようにフロントマターだけの記述になっていると、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ページタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2018-11-02&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>テンプレートから &lt;code>Page&lt;/code> 変数の &lt;strong>&lt;code>{{ .Content }}&lt;/code> を参照したときの値は空っぽ&lt;/strong> になります。
このような場合だけ別の出力をしたい場合は、下記のように場合分け処理を記述します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Content&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>本文が記述されていません。&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このような分岐出力は、セクションページ（&lt;code>_index.md&lt;/code>）などで活用できると思います。
例えば、次のようにセクションテンプレートを記述しておけば、セクションページに本文が記述されている場合はその内容を表示し、本文が記述されていない場合はそのセクション直下のページリストを表示できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/section.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Content&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;pageList&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">{{/* カレントセクション直下のセクション */}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Sections&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> /&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">{{/* カレントセクション直下の記事ページ */}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RegularPages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>コンテンツファイルが下記のような構成で配置されているとすると、&lt;/p></description></item><item><title>Hugo に全文検索（インクリメンタルサーチ）の機能を付ける</title><link>https://maku77.github.io/p/p4n5m3i/</link><pubDate>Tue, 11 Sep 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/p4n5m3i/</guid><description>&lt;p>ここでは、Hugo サイトに全文検索の機能を付ける方法を説明します。
全文検索を実現する方法としては、Google カスタム検索を導入する方法もありますが、Google カスタム検索は、インターネット上に公開する Web サイトにしか適用できません。
ここで紹介する JavaScript を利用した全文検索は、ローカルで運用する Web サイトでも利用できますし、インクリメンタルサーチも実現することができます（&lt;a href="https://toushi.maku.blog/search/">実際のサイトの例&lt;/a>）。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="" width="740" height="581" src="../p/p4n5m3i/img-001.png" alt="/p/p4n5m3i/img-001.png" />
 &lt;figcaption>図: 全文検索＋インクリメンタルサーチの完成イメージ&lt;/figcaption>
&lt;/figure>

&lt;p>大まかに、下記のようなコードを含む HTML ファイルを出力できれば、サイト内の全文検索を実現することができます。&lt;/p>
&lt;ol>
&lt;li>検索用 JavaScript データ (&lt;code>const data = [...]&lt;/code>)&lt;/li>
&lt;li>検索用 HTML フォーム (&lt;code>&amp;lt;input&amp;gt;&lt;/code>)&lt;/li>
&lt;li>検索用 JavaScript 関数 (&lt;code>function search() {...}&lt;/code>)&lt;/li>
&lt;/ol>
&lt;p>ここでは、全文検索のためのページとして &lt;code>search&lt;/code> という名前のページ (&lt;code>content/search.md&lt;/code>) を作成することにします（URL としては &lt;code>http://localhost:1313/search/&lt;/code> という形でアクセスすることになります）。
すでに &lt;code>search&lt;/code> という名前のページを作成している場合は適宜変更してください。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ 2023-05-04 追記&lt;/span>
 &lt;span class="xNote_body">以前の実装では、検索用データ (&lt;code>search/data.js&lt;/code>) と検索用ページ (&lt;code>search/index.html&lt;/code>) を分けて出力していましたが、検索用ページに統合するように変更しました。
Hugo がバージョンアップして、出力ファイルに livereload 用の script タグを自動挿入するようになり、正しい &lt;code>data.js&lt;/code> ファイルとして出力できなくなってしまったからです。&lt;/span>
&lt;/div>
&lt;h2 id="コンテンツファイル-contentsearchmd-の作成">コンテンツファイル (content/search.md) の作成&lt;/h2>
&lt;p>まず、全文検索用のページを出力するためのコンテンツファイルを作成しておきます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/search.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;サイト内全文検索&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">layout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">search&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">_build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{&lt;span class="w"> &lt;/span>&lt;span class="nt">list&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">never }&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>フロントマターの &lt;strong>&lt;code>layout&lt;/code>&lt;/strong> プロパティで &lt;code>search&lt;/code> という名前のテンプレートを使うことを指定しておきます。
ついでに、&lt;strong>&lt;code>_build&lt;/code>&lt;/strong> プロパティで、このページをリスト系ページの一覧に列挙しないようにしておきます（参考: &lt;a href="../p/4ziyhxe/">記事一覧に列挙されないページを作る&lt;/a>）。&lt;/p></description></item><item><title>Hugo で Sass (SASS/SCSS) スタイルシートを使用する</title><link>https://maku77.github.io/p/k7jv7hs/</link><pubDate>Thu, 16 Aug 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/k7jv7hs/</guid><description>&lt;p>Hugo 0.46 で Sass (SASS/SCSS) がサポートされました。
これを使うと、スタイルシートを効率的に記述できるようになります。&amp;quot;&lt;/p>
&lt;h2 id="sass-とは">Sass とは&lt;/h2>
&lt;p>Sass (SASS/SCSS) は CSS のプリプロセッサで、これを利用すると、柔軟な変数の仕組みや、入れ子構造を用いたスタイルシート記述が可能になります。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://sass-lang.com">Sass: Syntactically Awesome Style Sheets&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Sass の記述フォーマットとしては、古い SASS 記法（拡張子 &lt;code>.sass&lt;/code>）と、新しい SCSS 記法（拡張子 &lt;code>.scss&lt;/code>）がありますが、現在は CSS のフォーマットと互換性のある SCSS 記法が主流になっています。
最新の CSS では、ネイティブに変数の仕組みなどをサポートしていますが、ブラウザの対応状況もまだまだなので、しばらくは Sass が使われ続けるでしょう。&lt;/p>
&lt;h2 id="hugo-で-sass-を使用する">Hugo で Sass を使用する&lt;/h2>
&lt;p>Hugo で Sass を使用する方法は、下記の本家ドキュメントに記述されています。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/hugo-pipes/scss-sass/">Hugo Pipes ＞ SASS/SCSS&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://gohugo.io/hugo-pipes/introduction/">Hugo Pipes ＞ Hugo Pipes Introduction&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>大まかな手順は次の通りです。&lt;/p>
&lt;ol>
&lt;li>ルートの &lt;strong>&lt;code>assets&lt;/code>&lt;/strong> ディレクトリ以下に &lt;strong>&lt;code>.scss&lt;/code>&lt;/strong> ファイルを配置する。&lt;/li>
&lt;li>テンプレート内でパイプコマンドを利用して &lt;code>.scss&lt;/code> ファイルを &lt;code>.css&lt;/code> に変換し、変換後の &lt;code>.css&lt;/code> ファイル名を &lt;code>link&lt;/code> 要素で指定する。&lt;/li>
&lt;/ol>
&lt;h3 id="1-assets-ディレクトリに-scss-ファイルを配置する">1. assets ディレクトリに .scss ファイルを配置する&lt;/h3>
&lt;p>本家のドキュメントでは、&lt;strong>&lt;code>resources.Get&lt;/code>&lt;/strong> 関数を使って &lt;code>.scss&lt;/code> ファイルを読み込む方法が紹介されています。
デフォルトの設定では、この関数はプロジェクトのルートにある &lt;code>assets&lt;/code> ディレクトリ以下のファイルを検索するようになっています。
ここでは、&lt;code>assets&lt;/code> ディレクトリ以下に &lt;strong>&lt;code>sass&lt;/code>&lt;/strong> ディレクトリを作成し、その中に &lt;code>.scss&lt;/code> ファイルを格納していくことにしましょう。
&lt;code>main.scss&lt;/code> ファイルの中から &lt;code>_color.scss&lt;/code> ファイルの内容をインポートするようにしています。&lt;/p></description></item><item><title>Hugo のページ内に Tex 形式の数式を埋め込めるようにする (MathJax)</title><link>https://maku77.github.io/p/dsfzi4n/</link><pubDate>Thu, 21 Jun 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/dsfzi4n/</guid><description>&lt;p>Hugo のテンプレートで &lt;strong>MathJax&lt;/strong> という Javascript ライブラリを組み込むと、Markdown 記事内に Tex 形式で数式を埋め込むことができるようになります。
下記は、MathJax による数式表示の例です。&lt;/p>
&lt;p>$$
-b\pm \sqrt{b^2 -4ac} \over 2a
$$&lt;/p>
&lt;center>図: MathJax による数式表示&lt;/center>
&lt;h2 id="mathjax-を有効にする">MathJax を有効にする&lt;/h2>
&lt;p>MathJax を有効にするのは簡単で、HTML 内で MathJax の Javascript ファイルを読み込むだけです。
次の例では、Hugo の &lt;a href="../p/bbxj5pa/">ベーステンプレート (&lt;code>baseof.html&lt;/code>)&lt;/a> の &lt;code>head&lt;/code> 要素内に、MathJax を読み込むための &lt;code>script&lt;/code> 要素を追加しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/baseof.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.LanguageCode&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line hl">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text/javascript&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;MathJax-script&amp;#34;&lt;/span> &lt;span class="na">async&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line hl">&lt;span class="cl"> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line hl">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記の例では、配信元の CDN として &lt;code>cdn.jsdeliver.net&lt;/code> を指定していますが、他の CDN で配信されているものを使用することもできます。
詳しくは下記の MathJax のドキュメントを参照してください。&lt;/p></description></item><item><title>Hugo で Markdown (.md) ファイルのパス情報を取得する</title><link>https://maku77.github.io/p/8env4bi/</link><pubDate>Thu, 14 Jun 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/8env4bi/</guid><description>&lt;p>Hugo のテンプレートファイル内で、&lt;strong>&lt;code>File&lt;/code>&lt;/strong> 変数を参照すると、記事ページのもとになった Markdown ファイルのパス情報を取得することができます。
&lt;code>File&lt;/code> 変数の一覧は下記のページで参照できます。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/variables/files/">File Variables｜Hugo&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="file-変数の使用例">File 変数の使用例&lt;/h2>
&lt;p>テンプレートファイルに下記のようなコードを追加すれば、&lt;code>File&lt;/code> 変数の内容を簡単に確認できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/baseof.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">pre&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.File.Filename = &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File.Filename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.File.Path = &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File.Path&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.File.Dir = &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File.Dir&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.File.LogicalName = &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File.LogicalName&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.File.BaseFileName = &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File.BaseFileName&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.File.Extension = &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File.Extension&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">pre&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>例えば、&lt;code>C:\Users\maku\website\content\diary\2018.md&lt;/code> から生成されたページ (&lt;code>diary/2018.html&lt;/code>) にアクセスすると、以下のようなパス情報を取得することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">.File.Filename&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">C:\Users\maku\website\content\diary\2018.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">.File.Path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">diary\2018.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">.File.Dir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">diary\&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">.File.LogicalName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">2018.md&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">.File.BaseFileName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">2018&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">.File.Extension&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">md&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="hugo-サーバ動作させているときに-markdown-ファイルのパスを表示する">Hugo サーバ動作させているときに Markdown ファイルのパスを表示する&lt;/h2>
&lt;p>テンプレート内に下記のように記述しておけば、Hugo のローカルサーバで Web サイトをホスティングしている場合のみ、ローカル PC 内の Markdown ファイルのパスを表示することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">{{- /* Markdown ファイルのパスを表示 */}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">hugo&lt;/span>&lt;span class="na">.IsServer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text-align:right; font-size: smaller;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.File&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Filename&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>記事内に表示されたパスをターミナル上にコピペして、任意のエディタで開くということが素早く行えるようになります。
タグの一覧ページなど、生成元の Markdown ファイルが存在しない場合は、&lt;code>.File.Filename&lt;/code> の値は空っぽになることに注意してください。&lt;/p></description></item><item><title>Hugo でファイルが存在する場合のみ処理するコードを記述する (fileExists)</title><link>https://maku77.github.io/p/q4o6n4k/</link><pubDate>Mon, 11 Jun 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/q4o6n4k/</guid><description>&lt;p>Hugo のテンプレートの中で、&lt;strong>&lt;code>fileExists&lt;/code>&lt;/strong> 関数を使用すると、指定したファイルが存在する時のみ有効になる処理を記述することができます。
例えば、次のようにすると、&lt;code>static&lt;/code> ディレクトリに画像ファイル (&lt;code>img/site-logo.png&lt;/code>) が存在する場合のみ、その画像を表示する &lt;code>img&lt;/code> 要素を出力します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">fileExists&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;static/assets/img/site-logo.png&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;assets/img/site-logo.png&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">absURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>参考: &lt;a href="https://gohugo.io/functions/fileexists/">fileExists｜Hugo&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Hugo のページャー（ページネーター）で複数の記事を切り替えながら表示できるようにする</title><link>https://maku77.github.io/p/8ogzaxd/</link><pubDate>Sat, 02 Jun 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/8ogzaxd/</guid><description>&lt;p>Hugo には &lt;strong>Pagenator&lt;/strong> という標準のページャー機能が備わっており、比較的簡単にページャー機能を組み込むことができます（参考: &lt;a href="https://gohugo.io/templates/pagination/">Pagination｜Hugo&lt;/a>）。&lt;/p>
&lt;h2 id="ページャーの基本">ページャーの基本&lt;/h2>
&lt;p>ページャーとは、Google の検索結果のページなどで表示される、下記のようなものです。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="400" height="93" src="../p/8ogzaxd/img-001_hu6542696088979303551.png" alt="/p/8ogzaxd/img-001.png" />
 &lt;figcaption>図: ページャーの例&lt;/figcaption>
&lt;/figure>

&lt;p>あるカテゴリに属する記事のリストを表示するときや、数日分の日記をまとめて表示するようなケースでは、1 ページが長くなりすぎないように、ページャーを導入することを検討するのがよいでしょう。&lt;/p>
&lt;p>Hugo でページャーを導入すると、デフォルトでは &lt;strong>&lt;code>/page/1&lt;/code>&lt;/strong>、&lt;strong>&lt;code>/page/2&lt;/code>&lt;/strong>、&lt;strong>&lt;code>/page/3&lt;/code>&lt;/strong> といった URL で、それぞれのグループ（複数の記事をまとめたページ）を表示するためのページにアクセスできるようになります（&lt;code>page&lt;/code> というパスは、Hugo のコンフィグファイルの &lt;strong>&lt;code>PaginatePath&lt;/code>&lt;/strong> で変更できます）。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="" width="" height="auto" src="../p/8ogzaxd/img-002.svg" alt="/p/8ogzaxd/img-002.svg" />
 &lt;figcaption>図: ページャーによる切り替え&lt;/figcaption>
&lt;/figure>

&lt;p>Hugo のページャー機能は、&lt;strong>ホームページとリスト系ページ（セクションページや、タクソノミーリスト）のみ&lt;/strong>で有効です。
つまり、ホームページテンプレート (&lt;code>layouts/index.html&lt;/code>) や、リストテンプレート (&lt;code>layouts/_default/list.html&lt;/code>) などに適用することになります。&lt;/p>
&lt;p>ホームページテンプレートに適用すれば、それぞれのグループを表示するためのページには、次のようなアドレスでアクセスできるようになります。&lt;/p>
&lt;ul>
&lt;li>&lt;code>https://example.com/&lt;/code>&lt;strong>&lt;code>page/1&lt;/code>&lt;/strong> （&lt;code>https://example.com/&lt;/code> のエイリアス）&lt;/li>
&lt;li>&lt;code>https://example.com/&lt;/code>&lt;strong>&lt;code>page/2&lt;/code>&lt;/strong>&lt;/li>
&lt;li>&lt;code>https://example.com/&lt;/code>&lt;strong>&lt;code>page/3&lt;/code>&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>セクションテンプレートに適用した場合は、次のようなアドレスでアクセスできるようになります。&lt;/p>
&lt;ul>
&lt;li>&lt;code>https://example.com/&amp;lt;SECTION&amp;gt;/&lt;/code>&lt;strong>&lt;code>page/1&lt;/code>&lt;/strong> （&lt;code>https://example.com/&amp;lt;SECTION&amp;gt;/&lt;/code> のエイリアス）&lt;/li>
&lt;li>&lt;code>https://example.com/&amp;lt;SECTION&amp;gt;/&lt;/code>&lt;strong>&lt;code>page/2&lt;/code>&lt;/strong>&lt;/li>
&lt;li>&lt;code>https://example.com/&amp;lt;SECTION&amp;gt;/&lt;/code>&lt;strong>&lt;code>page/3&lt;/code>&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ここでのポイントは、上記のようなファイル群は、1 つのホームページテンプレート（あるいはセクションテンプレート）から自動的に生成されるということです。
つまり、複数のページとして出力されてはいるものの、ページャー部分以外のコンテンツは同じになります。
後述するように、テンプレート内で &lt;strong>&lt;code>.Pagenator&lt;/code>&lt;/strong> にアクセスすると、Hugo は自動的にこれらのファイルを出力するようになります。&lt;/p>
&lt;p>ちなみに、単独のページを出力するためのシングルページテンプレート (&lt;code>layouts/_default/single.html&lt;/code>) ではページャー機能は使えないので、代わりに、&lt;a href="../p/sc9t737/">ページ切り替え用の「次のページ」、「前のページ」といったリンク&lt;/a> を表示しておくのがよいでしょう。&lt;/p>
&lt;h2 id="ページャーを導入する">ページャーを導入する&lt;/h2>
&lt;h3 id="組み込みの-pagination-テンプレートを使用する">組み込みの pagination テンプレートを使用する&lt;/h3>
&lt;p>1 グループごとの記事のリストは、&lt;strong>&lt;code>.Pagenator.Pages&lt;/code>&lt;/strong> で参照することができるようになっているので、これを &lt;code>range&lt;/code> を使って列挙すれば OK です。
デフォルトでは 10 記事ごとがグルーピングされていますが、このサイズは Hugo のコンフィグファイルの &lt;strong>&lt;code>Paginate&lt;/code>&lt;/strong> で変更できます。
肝心のページ切り替え部分は、Hugo 組み込みのテンプレート &lt;strong>&lt;code>_internal/pagination.html&lt;/code>&lt;/strong> を使用して出力することができます。&lt;/p></description></item><item><title>Hugo で Google アナリティクス用のトラッキングコードを埋め込む (googleAnalytics)</title><link>https://maku77.github.io/p/zxk6pat/</link><pubDate>Fri, 01 Jun 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/zxk6pat/</guid><description>&lt;p>Google Analytics を使用すると、Web サイトのアクセス情報を多角的に分析できるようになります。
ここでは、Hugo で作成する Web サイトに、簡単に Google Analytics 用のコードを埋め込めるようにしてみます。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ Google Analytics 4 (GA4) への移行&lt;/span>
 &lt;span class="xNote_body">&lt;p>Google は従来 Google Analytics (&lt;strong>Universal Analytics&lt;/strong>) を提供していましたが、2023 年 7 月以降は、最新バージョン Google Analytics 4 (&lt;strong>GA4&lt;/strong>) しか使用できなくなります。
ただし、乗り換えは簡単で、設定するトラッキング ID を GA4 用のものに変更するだけです。
Analytics ID の先頭部分を見ると、どちらのバージョンを使用しているかが分かります。&lt;/p>
&lt;ul>
&lt;li>（旧）Universal Analytics の ID &amp;hellip; &lt;code>UA-12345678-1&lt;/code>&lt;/li>
&lt;li>（新）Google Analytcs 4 (GA4) の ID &amp;hellip; &lt;code>G-12345ABCDE&lt;/code>&lt;/li>
&lt;/ul>&lt;/span>
&lt;/div>
&lt;h2 id="トラッキング-id-をコンフィグファイルで設定する">トラッキング ID をコンフィグファイルで設定する&lt;/h2>
&lt;p>まずは、&lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> の管理画面から、「プロパティの追加」を実行し、分析したい Web サイトのアドレスを追加しておきます（Google Analytics のアカウントを持っていない場合は、先にアカウントから作成しておく必要があります）。
そのとき発行されるトラッキング ID（&lt;strong>&lt;code>G-12345ABCDE&lt;/code>&lt;/strong> のような ID）が、その Web サイトへのアクセスを判別するための識別情報となります。
この ID は、Web サイトごとに別のものを使用するので、Hugo の&lt;a href="../p/5m9tdwg/">コンフィグファイルで設定&lt;/a>するのがよいでしょう。&lt;/p></description></item><item><title>Hugo でコンフィグファイルに設定した情報を参照する</title><link>https://maku77.github.io/p/5m9tdwg/</link><pubDate>Fri, 01 Jun 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/5m9tdwg/</guid><description>&lt;h2 id="コンフィグファイルの基本">コンフィグファイルの基本&lt;/h2>
&lt;p>Hugo サイトの全般的な設定は、ルートディレクトリに置いた下記のいずれかのコンフィグファイルで行います（最初に見つかったものが採用されます）。&lt;/p>
&lt;ol>
&lt;li>&lt;code>hugo.toml&lt;/code> （TOMLフォーマットで記述）&lt;/li>
&lt;li>&lt;code>hugo.yaml&lt;/code> （YAMLフォーマットで記述）&lt;/li>
&lt;li>&lt;code>hugo.json&lt;/code> （JSONフォーマットで記述）&lt;/li>
&lt;/ol>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">hugo.toml の記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">baseURL&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://example.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">languageCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ja-jp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">title&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;まく日記&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">themesDir&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;../hugo_themes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">theme&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;maku&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>設定可能なパラメータや、それぞれのデフォルト値は下記に一覧があります。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://gohugo.io/getting-started/configuration/">Configure Hugo｜Hugo&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ hugo.toml と config.toml&lt;/span>
 &lt;span class="xNote_body">Hugo v0.110.0 でコンフィグファイル名が &lt;code>config.toml&lt;/code> から &lt;code>hugo.toml&lt;/code> に&lt;a href="https://github.com/gohugoio/hugo/releases/tag/v0.110.0">変更されました&lt;/a>。
互換性のために &lt;code>config.toml&lt;/code> のままでも動作するようですが、各種エディタやツールとの連携のためのリネームらしいので、新しい名前に乗り換えておいた方がよいでしょう。&lt;/span>
&lt;/div>
&lt;h2 id="設定値を参照する">設定値を参照する&lt;/h2>
&lt;h3 id="hugo-が定義しているパラメータを参照する">Hugo が定義しているパラメータを参照する&lt;/h3>
&lt;p>コンフィグファイルで設定したパラメータは、テンプレートファイル内から、&lt;strong>&lt;code>.Site&lt;/code>&lt;/strong> 変数を使って参照することができます。
例えば、&lt;code>hugo.toml&lt;/code> ファイルの中で設定した &lt;code>title&lt;/code> や &lt;code>baseURL&lt;/code> パラメータの値は次のようにして参照することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">このサイトのタイトルは &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> です。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">このサイトのベースアドレスは &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.BaseURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> です。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>パラメータ名の先頭は、大文字になっていることに注意してください（&lt;code>.Site.title&lt;/code> ではなく &lt;code>.Site.Title&lt;/code> が正しい）。
それぞれの設定値が、どのようなプロパティ名で参照できるようになっているかは、下記の Site 変数の一覧を見るとわかります。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/variables/site/">Site Variables｜Hugo&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>パラメータが設定されているかどうかで処理を分岐させたい場合は、例えば次のように記述しておけばよいでしょう。
ここでは、&lt;code>googleAnalytics&lt;/code> というパラメータで、Google Analytics 用のトラッキング ID が設定されているかどうかをチェックしています。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.Config.Services.GoogleAnalytics.ID&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Google Analytics のトラッキング ID は &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> です。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Google Analytics のトラッキング ID が設定されていません。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>参考: &lt;a href="../p/zxk6pat/">Google アナリティクス用のトラッキングコードを埋め込む&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="独自定義のパラメータを参照する">独自定義のパラメータを参照する&lt;/h3>
&lt;p>コンフィグファイルで独自定義のパラメータを設定するには、&lt;strong>&lt;code>params&lt;/code>&lt;/strong> セクションの下にパラメータを追加します。&lt;/p></description></item><item><title>Hugo サーバーで記事の変更内容が反映されない場合</title><link>https://maku77.github.io/p/taxh3m7/</link><pubDate>Tue, 29 May 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/taxh3m7/</guid><description>&lt;p>Hugo サーバーを立ち上げて記事の更新をしていると、Web ブラウザをリロードしても変更内容が反映されないことがあります（特に &lt;code>layouts&lt;/code> や &lt;code>partials&lt;/code> など、共有して使う部分など）。&lt;/p>
&lt;p>ページのビルドに成功しているのに変更内容が反映されない場合は、Hugo サーバーのキャッシュを疑ってみるとよいかもしれません。
&lt;code>hugo server&lt;/code> コマンドを実行するときに、&lt;strong>&lt;code>--ignoreCache&lt;/code>&lt;/strong> オプションをつけると、キャッシュを使わずにレンダリングされます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo server --ignoreCache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Hugo で最近更新された記事（新着記事）のリストを表示する</title><link>https://maku77.github.io/p/pocxi4n/</link><pubDate>Tue, 29 May 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/pocxi4n/</guid><description>&lt;h2 id="新しく作成した記事を列挙する">新しく作成した記事を列挙する&lt;/h2>
&lt;p>下記のテンプレートコードは、日付（フロントマターの &lt;strong>&lt;code>date&lt;/code>&lt;/strong> フィールドの値）の新しい順に、 5 件分のリンクを表示します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">作成日 (date) 順に 5 件のリンクを表示する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>新着記事&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">first&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.RegularPages.ByDate.Reverse&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">time&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Date.Format&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;2006-01-02&amp;#34;&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">time&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;strong>&lt;code>.Site.RegularPages.ByDate.Reverse&lt;/code>&lt;/strong> という部分で、サイト内の全ページを日付の逆順に列挙することを示しています（インデックス系のページも列挙したい場合は &lt;code>.RegularPages&lt;/code> の部分を &lt;code>.Pages&lt;/code> に変更してください）。
&lt;strong>&lt;code>first 5&lt;/code>&lt;/strong> は、その中の最初の 5 件を取り出すという命令です。&lt;/p>
&lt;p>&lt;code>.Date.Format&lt;/code> による日時フォーマットの指定方法は、&lt;a href="../p/sy58beh">こちらの Go 言語の記事&lt;/a> を参考にしてください。&lt;/p>
&lt;h2 id="更新日-lastmod-の新しい順に列挙する">更新日 (lastmod) の新しい順に列挙する&lt;/h2>
&lt;h3 id="date-ではなく-lastmod-を使う">date ではなく lastmod を使う&lt;/h3>
&lt;p>上記の例では、記事の作成日（&lt;code>date&lt;/code> フィールド）を基準にして最新記事を列挙しましたが、更新日時（&lt;strong>&lt;code>lastmod&lt;/code>&lt;/strong> フィールド）を基準に最新記事を列挙することもできます。&lt;/p>
&lt;p>次のようにコードを置き換えるだけで OK です。&lt;/p>
&lt;ul>
&lt;li>&lt;code>.Date&lt;/code> → &lt;strong>&lt;code>.Lastmod&lt;/code>&lt;/strong>&lt;/li>
&lt;li>&lt;code>.ByDate&lt;/code> → &lt;strong>&lt;code>.ByLastmod&lt;/code>&lt;/strong>&lt;/li>
&lt;/ul>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">最終更新日 (lastmod) 順に 5 件のリンクを表示する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>最近更新された記事&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">first&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.RegularPages.ByLastmod.Reverse&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">time&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="na">.Lastmod.Format&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;2006-01-02&amp;#34;&lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">time&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>記事のフロントマターに &lt;code>lastmod&lt;/code> フィールドが定義されていない場合は、&lt;code>date&lt;/code> フィールドが使用されるようになっています。
このようなフォールバックの仕組みが用意されているので、最新記事を列挙するときは、&lt;code>.ByDate&lt;/code> よりも &lt;code>.ByLastmod&lt;/code> を使うようにしておくのがよさそうです。
ただし、typo の修正などで &lt;code>lastmod&lt;/code> を更新してしまうと、それだけで記事が一番上に出てきてしまうので、ある程度内容のある更新をしたときのみ &lt;code>lastmod&lt;/code> の日付を更新するなどの工夫が必要かもしれません。&lt;/p></description></item><item><title>Hugo で次のページ、前のページへのリンクを表示する</title><link>https://maku77.github.io/p/sc9t737/</link><pubDate>Sun, 22 Apr 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/sc9t737/</guid><description>&lt;p>ページ変数の &lt;strong>&lt;code>.NextInSection&lt;/code>&lt;/strong> や &lt;strong>&lt;code>.PrevInSection&lt;/code>&lt;/strong> を使用すると、同じセクション内の次のページ、前のページを参照することができます。&lt;/p>
&lt;h2 id="同じ階層にある前のページ次のページへのリンクを表示する">同じ階層にある「前のページ」「次のページ」へのリンクを表示する&lt;/h2>
&lt;p>下記のテンプレートコードは、前のページへのリンクと、次のページへのリンクを表示するシンプルな例です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレートコード（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.PrevInSection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.LinkTitle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.NextInSection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.LinkTitle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>Page 変数の &lt;code>.PrevInSection&lt;/code> や &lt;code>.NextInSection&lt;/code> には、&lt;strong>同じセクション内にある通常ページ (regular page) の内、前のエントリと次のエントリにあたるページ&lt;/strong> が格納されています。
これらの変数は、通常ページ (regular page) でしか有効でないことに注意してください（つまり、シングルページレイアウトで使用します）。
セクションページなどで参照すると、&lt;code>nil&lt;/code> が返されます。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ .Title ではなく .LinkTitle を出力する&lt;/span>
 &lt;span class="xNote_body">リンクのタイトルをなるべく短く表示するため、&lt;code>.Title&lt;/code> ではなく &lt;strong>&lt;code>.LinkTitle&lt;/code>&lt;/strong> を参照していることに注意してください。
こうしておくと、ページのフロントマターで &lt;strong>&lt;code>linkTitle&lt;/code>&lt;/strong> プロパティが設定されている場合に、&lt;code>title&lt;/code> プロパティよりも優先的に参照されるようになります。&lt;/span>
&lt;/div>
&lt;p>体裁を整えるのであれば、前のページへのリンクは左寄せ、次のページへのリンクは右寄せで表示するとよいでしょう。
表示イメージとしては次のような感じです。&lt;/p>
&lt;div style="margin: 0.5em; padding: 0.5em; background: #eee; font-weight: bolder; display: flex; justify-content: space-between;">
 &lt;span>≪前のページへ&lt;/span>
 &lt;span>次のページへ≫&lt;/span>
&lt;/div>
&lt;p>さらに、コードは &lt;code>prev-next&lt;/code> パーシャルテンプレートとして、使い回しがきくようにしておきましょう。
下記は完成版のパーシャルテンプレートです。&lt;/p></description></item><item><title>Hugo で全ページから参照できるデータを用意する（data ディレクトリ）</title><link>https://maku77.github.io/p/5ru4kte/</link><pubDate>Sun, 08 Apr 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/5ru4kte/</guid><description>&lt;p>Hugo プロジェクトの &lt;strong>&lt;code>data&lt;/code>&lt;/strong> ディレクトリに YAML、JSON、TOML、CSV などの形式でデータファイルを作成しておくと、すべてのページから自由に参照できるようになります。&lt;/p>
&lt;h2 id="データファイルを作成する">データファイルを作成する&lt;/h2>
&lt;p>&lt;code>data&lt;/code> ディレクトリに置くデータファイルは、下記のいずれかのフォーマットで作成します。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://yaml.org/spec/">YAML フォーマット&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://json-spec.readthedocs.io/">JSON フォーマット&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/toml-lang/toml/">TOML フォーマット&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://tools.ietf.org/html/rfc4180">CSV フォーマット&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ここでは英単語の辞書データを YAML 形式のファイル &lt;code>data/words.yaml&lt;/code> として作成してみましょう（拡張子は &lt;code>.yaml&lt;/code> でも &lt;code>.yml&lt;/code> でも構いません）。
&lt;code>data&lt;/code> ディレクトリは、サイトのルートディレクトリに作成します（&lt;code>content&lt;/code> ディレクトリや &lt;code>layouts&lt;/code> ディレクトリと同じ階層に &lt;code>data&lt;/code> ディレクトリを置きます）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">data/words.yaml&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">en&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apple&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">jp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">りんご&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">en&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">banana&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">jp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">バナナ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">en&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grape&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">jp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ぶどう&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">Hugo 0.37 より前のバージョンには YAML 処理の不具合があり、上記のようにルートレベルに配列データを記述することができませんでした。
&lt;code>hugo version&lt;/code> コマンドでバージョンを確認し、必要があれば &lt;a href="../p/r8ufyk5/">最新の Hugo に更新&lt;/a> しましょう。&lt;/span>
&lt;/div>
&lt;p>あるいは、JSON ファイルとして作成するのであればこんな感じです。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">data/words.json&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;en&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;apple&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;jp&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;りんご&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;en&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;banana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;jp&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;バナナ&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;en&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;grape&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nt">&amp;#34;jp&amp;#34;&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ぶどう&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>できれば、よりシンプルに記述できる YAML 形式を使いたいですね。&lt;/p>
&lt;h2 id="データファイルを参照する">データファイルを参照する&lt;/h2>
&lt;p>&lt;code>data&lt;/code> ディレクトリ以下に作成したデータファイルを参照するには、テンプレートファイルの中で &lt;strong>&lt;code>.Site.Data.ファイル名&lt;/code>&lt;/strong>（拡張子は除く）のように参照します。
ここでは、&lt;code>words&lt;/code> セクションのインデックスページ (&lt;code>content/words/_index.md&lt;/code>) にのみ適用されるセクションテンプレートを作成することにしましょう。&lt;/p></description></item><item><title>Hugo のローカルサーバーで動作させているとき（開発時）のみ内容を出力する private ショートコードを作成する</title><link>https://maku77.github.io/p/jbr6kzd/</link><pubDate>Mon, 02 Apr 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/jbr6kzd/</guid><description>&lt;p>自分の作業用備忘録としてはメモとして残したいけれど、インターネット上には公開したくない内容に関しては、Hugo をローカルサーバーとして動作させているときだけ出力するようなショートコードを作成しておくと便利です。&lt;/p>
&lt;h2 id="private-ショートコードを作成する">private ショートコードを作成する&lt;/h2>
&lt;p>そのショートコードが、Hugo のローカルサーバ上 (hugo server) で使用されたかを判別するには、&lt;a href="https://gohugo.io/functions/hugo/isserver/">&lt;code>hugo.IsServer&lt;/code>&lt;/a> を参照します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/private.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">hugo&lt;/span>&lt;span class="na">.IsServer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ローカルサーバで動作しています。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>あとは、&lt;strong>&lt;code>.Inner&lt;/code>&lt;/strong> 変数で、渡されたテキストを参照することができるので、たとえば次のように実装すればよいでしょう。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/private.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">hugo&lt;/span>&lt;span class="na">.IsServer&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;private&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Inner&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは、出力する &lt;code>div&lt;/code> 要素に &lt;strong>&lt;code>private&lt;/code>&lt;/strong> というクラスを割り当てています。
下記は &lt;code>private&lt;/code> クラスに適用するスタイルシートの例です（赤系の色で強調表示するようにしています）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-css" data-lang="css">&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">private&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">background&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mh">#fee&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">color&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mh">#f11&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="kt">em&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">border&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">solid&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="kt">px&lt;/span> &lt;span class="mh">#f11&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">private&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="nd">before&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">content&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Private メモ&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">display&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">block&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">font-weight&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">bolder&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="使用方法">使用方法&lt;/h2>
&lt;p>作成した private ショートコードは、記事ファイルの中で次のように利用します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/sample.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;サンプルタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="l">&amp;lt; private &amp;gt;}}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="l">これは非公開なメモだよ。&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="l">&amp;lt; /private &amp;gt;}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>次のように、内部のテキストで Markdown 構文を使用することもできます（その場合は、ショートコード名を &lt;code>%&lt;/code> 記号で囲むことに注意してください）。&lt;/p></description></item><item><title>Hugo でサイドバー用のページツリーを表示する（現在表示しているページを考慮した階層表示）</title><link>https://maku77.github.io/p/7o7ymst/</link><pubDate>Tue, 23 Jan 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/7o7ymst/</guid><description>&lt;p>サイドバーメニューに、サイトの階層構造に応じたリンクを表示しておくと、サイト内の様々なページに簡単に移動できるようになります。&lt;/p>
&lt;h2 id="サイドバーでのページツリー表示のイメージ">サイドバーでのページツリー表示のイメージ&lt;/h2>
&lt;p>サイト全体のページ一覧をツリー構造で表示する方法は、下記のページで紹介しています。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="../p/xuwd7tn/">サイト内の全ページの一覧をセクションの階層構造に従って表示する&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>しかし、上記のページで説明している方法でツリー表示すると、すべてのページが展開された状態で表示されてしまうため、サイドバーに表示するツリーとしてはちょっと情報量が多すぎます。
ここでは、もう少しコンパクトに表示されるように、現在のページの上位ノードだけを展開したツリーを表示するようにしてみます。&lt;/p>
&lt;p>イメージとしては次のような感じで、表示中のページ（ここでは page1）の上位のセクションだけを展開したツリーを表示することを考えます。&lt;/p>
&lt;pre tabindex="0">&lt;code>- sec1/
- sec2/
 - sec2-1/
 - sec2-2/
 - page1 （表示中のページ）
 - page2
 - sec2-2-1/
 - sec2-2-2/
 - sec2-3/
- sec3/
- sec4/
&lt;/code>&lt;/pre>&lt;p>このようなツリーをサイドバーなどに表示しておくことで、ユーザが今、サイト全体でどの位置の記事を読んでいるかを簡単に把握できるようになります（パンくずリストなども同様の効果がありますが、ツリー表示の方が、より全体を把握しやすいといえます）。&lt;/p>
&lt;h2 id="展開すべきノードを知る">展開すべきノードを知る&lt;/h2>
&lt;p>自分自身のページが所属するセクションだけを展開したツリーを表示するには、テンプレートコード内で、&lt;strong>セクションの親子関係を（先祖まで含めて）把握する必要があります&lt;/strong>。
そのために、&lt;code>Page&lt;/code> オブジェクトの以下のようなメソッドを利用することができます（参考: &lt;a href="https://gohugo.io/variables/page/#section-variables-and-methods">Hugo - Section Variables and Methods&lt;/a>）。
Hugo 本家のマニュアルページでは、&lt;code>.InSection&lt;/code> や &lt;code>.IsAncestor&lt;/code>、&lt;code>.IsDescendant&lt;/code> メソッドは、&lt;strong>Section 変数&lt;/strong> の Methods として記述されていますが、通常ページを含む &lt;code>Page&lt;/code> オブジェクトのメソッドとして参照することができます。&lt;/p>
&lt;dl>
&lt;dt>&lt;strong>&lt;code>$p1.InSection $p2&lt;/code>&lt;/strong>&lt;/dt>
&lt;dd>&lt;code>$p1&lt;/code> と &lt;code>$p2&lt;/code> が同一のセクションに所属していれば &lt;code>true&lt;/code>（&lt;code>$p1 = $p2&lt;/code> の場合も &lt;code>true&lt;/code>）。
それ以外は &lt;code>false&lt;/code>。&lt;br>
(Whether the given page is in the current section.)&lt;/dd>
&lt;dt>&lt;strong>&lt;code>$p1.IsAncestor $p2&lt;/code>&lt;/strong>&lt;/dt>
&lt;dd>&lt;code>$p1&lt;/code> が &lt;code>$p2&lt;/code> の先祖ページかどうかを調べる。
&lt;code>$p1&lt;/code> セクションが &lt;code>$p2&lt;/code> のカレントセクションよりも上位のセクションであれば &lt;code>true&lt;/code>。
&lt;code>$p1&lt;/code> が通常ページの場合は常に &lt;code>false&lt;/code>。
&lt;code>$p1 = $p2&lt;/code> の場合も &lt;code>false&lt;/code>。&lt;br>
(Whether the current page is an ancestor of the given page.)&lt;/dd>
&lt;dt>&lt;strong>&lt;code>$p1.IsDescendant $p2&lt;/code>&lt;/strong>&lt;/dt>
&lt;dd>&lt;code>$p1&lt;/code> が &lt;code>$p2&lt;/code> の子孫ページかどうかを調べる。&lt;code>$p2.IsAncestor $1&lt;/code> とするのと同じ。&lt;br>
(Whether the current page is a descendant of the given page.)&lt;/dd>
&lt;/dl>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">&lt;ul>
&lt;li>Hugo 0.100 で &lt;code>.IsDescendant&lt;/code> と &lt;code>.IsAncestor&lt;/code> の振る舞いが変更されました。
&lt;ul>
&lt;li>&lt;a href="https://github.com/gohugoio/hugo/issues/9925">IsDescendant/IsAncestor returns true for self · Issue #9925 · gohugoio/hugo&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/gohugoio/hugo/issues/9934">Notes release notes 0.100 · Issue #9934 · gohugoio/hugo&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/span>
&lt;/div>
&lt;p>なかなか分かりにくいですね。このような場合は実際にテストしてみるのが一番です。
これらのメソッドがどういう振る舞いをするのかを明確にするため、次のようなディレクトリ構成（セクション構成）のダミーサイトでテストしてみます。&lt;/p></description></item><item><title>Hugo で各種ページの .Kind や .IsPage、.IsSection、.IsNode の値がどうなるかの一覧</title><link>https://maku77.github.io/p/co8p6n4/</link><pubDate>Thu, 11 Jan 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/co8p6n4/</guid><description>&lt;p>Hugo のテンプレートで、ページの種類によって条件分岐するコードを記述するには、レンダリング時のコンテキストにおいて、&lt;code>.Kind&lt;/code> の値や &lt;code>.IsPage&lt;/code> などの値がどう変化するかを知っておく必要があります。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>ページ種類&lt;/th>
 &lt;th>.RelPermalink の例&lt;/th>
 &lt;th>.Section&lt;/th>
 &lt;th>.Type&lt;/th>
 &lt;th>.Kind&lt;/th>
 &lt;th style="text-align: center">.IsHome&lt;/th>
 &lt;th style="text-align: center">.IsNode&lt;/th>
 &lt;th style="text-align: center">.IsPage&lt;/th>
 &lt;th style="text-align: center">.IsSection&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>ホームページ&lt;/td>
 &lt;td>&lt;code>/&lt;/code>&lt;/td>
 &lt;td>nil&lt;/td>
 &lt;td>&lt;code>page&lt;/code>&lt;/td>
 &lt;td>&lt;code>home&lt;/code>&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>セクションページ（第 1 階層）&lt;/td>
 &lt;td>&lt;code>/sec1/&lt;/code>&lt;/td>
 &lt;td>&lt;code>sec1&lt;/code>&lt;/td>
 &lt;td>&lt;code>sec1&lt;/code>&lt;/td>
 &lt;td>&lt;code>section&lt;/code>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>セクションページ（第 2 階層）&lt;/td>
 &lt;td>&lt;code>/sec1/sec2/&lt;/code>&lt;/td>
 &lt;td>&lt;code>sec1&lt;/code>&lt;/td>
 &lt;td>&lt;code>sec1&lt;/code>&lt;/td>
 &lt;td>&lt;code>section&lt;/code>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>タクソノミーターム&lt;/td>
 &lt;td>&lt;code>/tags/&lt;/code>&lt;/td>
 &lt;td>&lt;code>tags&lt;/code>&lt;/td>
 &lt;td>&lt;code>tags&lt;/code>&lt;/td>
 &lt;td>&lt;code>taxonomy&lt;/code> ※&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>タクソノミーリスト&lt;/td>
 &lt;td>&lt;code>/tags/xxx/&lt;/code>&lt;/td>
 &lt;td>&lt;code>tags&lt;/code>&lt;/td>
 &lt;td>&lt;code>tags&lt;/code>&lt;/td>
 &lt;td>&lt;code>term&lt;/code> ※&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>404 ページ&lt;/td>
 &lt;td>nil&lt;/td>
 &lt;td>nil&lt;/td>
 &lt;td>&lt;code>page&lt;/code>&lt;/td>
 &lt;td>&lt;code>404&lt;/code>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>記事ページ（第 1 階層）&lt;/td>
 &lt;td>&lt;code>/mypage/&lt;/code>&lt;/td>
 &lt;td>nil&lt;/td>
 &lt;td>&lt;code>page&lt;/code>&lt;/td>
 &lt;td>&lt;code>page&lt;/code>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>記事ページ（第 2 階層）&lt;/td>
 &lt;td>&lt;code>/sec1/mypage/&lt;/code>&lt;/td>
 &lt;td>&lt;code>sec1&lt;/code>&lt;/td>
 &lt;td>&lt;code>sec1&lt;/code>&lt;/td>
 &lt;td>&lt;code>page&lt;/code>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>記事ページ（第 3 階層）&lt;/td>
 &lt;td>&lt;code>/sec1/sec2/mypage/&lt;/code>&lt;/td>
 &lt;td>&lt;code>sec1&lt;/code>&lt;/td>
 &lt;td>&lt;code>sec1&lt;/code>&lt;/td>
 &lt;td>&lt;code>page&lt;/code>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;td style="text-align: center">&lt;strong>true&lt;/strong>&lt;/td>
 &lt;td style="text-align: center">false&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ※ taxonomy と term という名前&lt;/span>
 &lt;span class="xNote_body">&lt;a href="https://github.com/gohugoio/hugo/issues/6911">Hugo v0.73&lt;/a> において &lt;code>taxonomyTerm → taxonomy&lt;/code>、&lt;code>taxonomy → term&lt;/code> という &lt;code>.Kind&lt;/code> 値の変更が入っているので、バージョンアップ時はご注意ください。&lt;/span>
&lt;/div>
&lt;p>上記の値は、次のようなテンプレートコードを、ベーステンプレート (&lt;code>layouts/_default/baseof.html&lt;/code>) に記述して調べています（2020-04-27: &lt;code>.IsSection&lt;/code> を追記、&lt;code>.URL&lt;/code> (deprecated) を &lt;code>.RelPermalink&lt;/code> に変更）。&lt;/p></description></item><item><title>Hugo のベーステンプレートを作成して、各種テンプレートの基本構成を統一する (baseof.html)</title><link>https://maku77.github.io/p/bbxj5pa/</link><pubDate>Wed, 10 Jan 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/bbxj5pa/</guid><description>&lt;h2 id="ベーステンプレートの仕組み">ベーステンプレートの仕組み&lt;/h2>
&lt;p>Hugo のベーステンプレート機能を利用すると、各種テンプレートの親テンプレートのようなものを作成することができます。
ベーステンプレートを作成することで、すべてのページの HTML 構成を統一することができ、個々のテンプレートの見通しもよくなります。&lt;/p>
&lt;p>Hugo では、リストテンプレートやシングルページテンプレートなど、用途によって別々のテンプレートファイルを用意することになっています。
でも、HTML 全体の大まかな構成は共通した部分が多いはずです。
例えば、どのページでも HTML は次のような構成になっているはずです。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;ja&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a href="https://gohugo.io/templates/base/">Hugo のベーステンプレート機能&lt;/a>を使用すると、上記のような全体の構成をベーステンプレート (&lt;strong>&lt;code>baseof.html&lt;/code>&lt;/strong>) として作成し、その中の部分的なブロックだけを通常のテンプレート（リストテンプレートやシングルページテンプレート）で定義した内容で置き換えるということができます。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="" width="740" height="auto" src="../p/bbxj5pa/img-001.svg" alt="/p/bbxj5pa/img-001.svg" />
 &lt;figcaption>図: ベーステンプレートの仕組み&lt;/figcaption>
&lt;/figure>

&lt;p>Hugo のベーステンプレート機能は、&lt;a href="https://golang.org/pkg/text/template/">Go のテンプレートライブラリ&lt;/a>の block template という仕組みを使用しており、&lt;strong>&lt;code>block&lt;/code>&lt;/strong> で定義した部分を、&lt;strong>&lt;code>define&lt;/code>&lt;/strong> で定義した内容で置き換えるという動作をします。
上の図を見ると分かりやすいと思いますが、ベーステンプレート (&lt;code>baseof.html&lt;/code>) を用意すると、基本的にすべてのページがベーステンプレートを利用してレンダリングされるようになり、その中の部分的なブロック（上記では &lt;code>main&lt;/code> という名前のブロック）が子テンプレートで定義した内容で置き換えられます。
このとき、どの子テンプレートが使用されるかは、ベーステンプレートの仕組みを使用しない場合と同様で、表示するページの種類によって決まります。
例えば、ホームページやセクションページなどのレンダリングには &lt;code>list.html&lt;/code> が使用され、個々の記事ページのレンダリングには &lt;code>single.html&lt;/code> が使用されます。&lt;/p>
&lt;h2 id="具体的なベーステンプレートの利用例">具体的なベーステンプレートの利用例&lt;/h2>
&lt;p>下記はベーステンプレートの具体的な記述例です。
&lt;code>main&lt;/code> 要素以下のメインコンテンツを block template の機能で置き換えるようにしています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/baseof.html（ベーステンプレート）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.LanguageCode&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;viewport&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;width=device-width,initial-scale=1.0&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">link&lt;/span> &lt;span class="na">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;stylesheet&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;assets/css/main.css&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">relURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.IsHome&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>｜&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;head/favicon&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;root&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;pageTitle&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">relURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;menu&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">main&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">block&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>main ブロックが見つかりません。&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">main&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/list.html（リストテンプレート）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">define&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;breadcrumb&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Content&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>ページリスト&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Data.Pages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html（シングルページテンプレート）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">define&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;breadcrumb&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;tags-in-page&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Content&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="子テンプレートにはテキスト出力するコードを入れない">子テンプレートにはテキスト出力するコードを入れない&lt;/h2>
&lt;p>ベーステンプレート（親テンプレート）を使用したレンダリングを行いたい場合は、子テンプレート側では何も出力しないようにする必要があるようです。
例えば、下記のシングルページテンプレートでは、部分テンプレート &lt;code>main&lt;/code> を定義していますが、その直後に「こんにちは！」と出力しています。&lt;/p></description></item><item><title>Hugo でサイト内の全ページの一覧をセクションの階層構造に従って表示する</title><link>https://maku77.github.io/p/xuwd7tn/</link><pubDate>Tue, 09 Jan 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/xuwd7tn/</guid><description>&lt;p>現在の階層のページ一覧を出力するテンプレートを再帰的に呼び出すようにすると、サイト内の全てのセクションとページを、ツリー構造で表示することができます。
すべてのページのリンクが出力されるので、サイトマップの出力に使用したり、ホームページ用のテンプレートに利用するとよいでしょう。&lt;/p>
&lt;h2 id="ツリー出力の基本">ツリー出力の基本&lt;/h2>
&lt;p>下記は、サイト内のすべてのページをツリー形式で表示するサンプルテンプレートです。
セクション変数の &lt;strong>&lt;code>.Pages&lt;/code>&lt;/strong> を参照すると、そのセクションに含まれるサブセクションや通常ページを取得することができるので、それを &lt;code>range&lt;/code> でループ処理しています。
部分テンプレート &lt;strong>&lt;code>hierarchy&lt;/code>&lt;/strong> を定義し、これをホームページ (&lt;code>.Site.Home&lt;/code>) から再帰的に呼び出すことで全ページのツリー構造を出力しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/index.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>全ページのリスト&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">define&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;hierarchy&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Pages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.IsSection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">template&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;hierarchy&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">template&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;hierarchy&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Home&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">出力結果のイメージ（実際には各項目がリンクになります）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">* タイトル A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* セクション 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * セクション 1-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * タイトル 1-1-A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * タイトル 1-1-B
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * タイトル 1-A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * タイトル 1-B
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* タイトル B
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* タイトル C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* セクション 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * セクション 2-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * タイトル 2-1-A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * タイトル 2-1-B&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは、&lt;code>hierarchy&lt;/code> のパラメータとして &lt;code>.Site.Home&lt;/code> を渡しているため、サイト全体のページツリーが出力されていますが、任意のセクションをルートにしてページツリーを出力することができます。
例えば、セクションテンプレートで次のように呼び出せば、現在のページが所属しているセクション (&lt;code>.CurrentSection&lt;/code>) 以下のセクションおよびページをツリー表示できます。&lt;/p></description></item><item><title>Hugo でパンくずリストを表示する</title><link>https://maku77.github.io/p/vemn3c4/</link><pubDate>Tue, 02 Jan 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/vemn3c4/</guid><description>&lt;p>パンくずリストは、親ページに素早くジャンプするための次のようなリンクです。&lt;/p>
&lt;pre tabindex="0">&lt;code>ホーム &amp;gt; セクション1 &amp;gt; セクション2 &amp;gt; ページタイトル
&lt;/code>&lt;/pre>&lt;p>ここでは、Hugo のテンプレート機能を使って、パンくずリストを出力する方法を説明します。&lt;/p>
&lt;h2 id="パンくずリストを表示するためのテンプレート">パンくずリストを表示するためのテンプレート&lt;/h2>
&lt;p>下記は、パンくずリストを出力するための &lt;code>breadcrumb&lt;/code> テンプレートの定義です（&lt;a href="https://gohugo.io/content-management/sections/#example-breadcrumb-navigation">Hugo 本家で紹介されているコード&lt;/a>を参考にしています）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">define&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;breadcrumb&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.node.Parent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">template&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;breadcrumb&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">dict&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;node&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.node.Parent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;start&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.start&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.node.IsHome&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">template&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;breadcrumb&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">dict&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;node&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.node.Site.Home&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;start&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.start&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">eq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.node&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.start&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.node.LinkTitle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.node.Permalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.node.LinkTitle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>実際にパンくずリストを出力したい部分で下記のように呼び出します。&lt;/p></description></item><item><title>Hugo テンプレート内で define による部分テンプレート定義を行う（関数もどき）</title><link>https://maku77.github.io/p/pkww45p/</link><pubDate>Mon, 01 Jan 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/pkww45p/</guid><description>&lt;p>Hugo のテンプレートファイル内で &lt;strong>&lt;code>define&lt;/code>&lt;/strong> を使用すると、部分的なテンプレートを定義することができ、別の場所から関数のように呼び出すことができます。&lt;/p>
&lt;h2 id="define-による部分テンプレート定義の基本">define による部分テンプレート定義の基本&lt;/h2>
&lt;p>Hugo のテンプレート定義は、基本は &lt;code>layouts&lt;/code> ディレクトリ内に置いたテンプレートファイル（HTML ファイル）単位で行うのですが、そのテンプレートファイルの中で、&lt;strong>&lt;code>define&lt;/code>&lt;/strong> アクションを使用することで、入れ子でテンプレート定義を行うことができます。
&lt;strong>テンプレートファイル内で使える関数定義のようなもの&lt;/strong> だと思うと分かりやすいです。&lt;/p>
&lt;p>次の例では、&lt;code>define&lt;/code> を使用して、&lt;code>showParentSection&lt;/code> というテンプレートを定義しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">showParentSection テンプレートを定義する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">{{/* セクションの一覧を出力します */}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">define&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;showParentSection&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>セクション一覧&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Sections&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>define&lt;/code> で定義したテンプレートを呼び出すには、&lt;strong>&lt;code>template&lt;/code>&lt;/strong> 関数を使用します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">template&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;showParentSection&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>2 番目のパラメータで渡した値が、部分テンプレート側のドットコンテキスト (&lt;strong>&lt;code>.&lt;/code>&lt;/strong>) として参照できるようになります。
多くの場合は、上記のようにドット (&lt;code>.&lt;/code>) を指定し、&lt;code>Page&lt;/code> オブジェクトを参照できるようにします。&lt;/p>
&lt;h2 id="複数のパラメータを受け取る部分テンプレートを定義する">複数のパラメータを受け取る部分テンプレートを定義する&lt;/h2>
&lt;p>&lt;code>template&lt;/code> 関数を使って部分テンプレートを呼び出すときは、引数に &lt;code>.&lt;/code> を指定して &lt;code>Page&lt;/code> オブジェクトを渡すことが多いのですが、単純な文字列や数値をパラメータとして渡すこともできます。
次の例では、パラメータで渡された名前を使って挨拶文を出力する &lt;code>greet&lt;/code> テンプレートを定義しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">greet テンプレートを定義する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">define&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;greet&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Hello, &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>この &lt;code>greet&lt;/code> テンプレートを呼び出すには次のようにします。&lt;/p></description></item><item><title>Hugo で記事ページに付けられたターム一覧（タグ一覧）を表示する</title><link>https://maku77.github.io/p/topd7uy/</link><pubDate>Mon, 01 Jan 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/topd7uy/</guid><description>&lt;p>シングルページテンプレートにおいて、その記事ページに付けられたタグの一覧を表示するようにしておくと、関連する記事（同じタグの付けられた記事）を探しやすくなります。&lt;/p>
&lt;p>タクソノミーターム（タグやカテゴリ）は、各ページの front matter 部分で定義するので、ページ変数 (&lt;strong>&lt;code>.Params&lt;/code>&lt;/strong>) 経由でその情報を取得することができます。
次のパーシャルテンプレートは、記事ページに付けられたタグの情報を取得し、リスト形式で出力します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/tags-in-page.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;tags&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Params.tags&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;/tags/&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">relLangURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">urlize&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>タグが設定されていない場合に、先頭の ul 要素ごと出力しないようにするには、ちょっとだけ変えて下記のようにします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Params.tags&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;tags&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;/tags/&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">relLangURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">urlize&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>上記のパーシャルテンプレートを使用するときは、シングルページテンプレート内で次のように記述します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;tags-in-page&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>デフォルトでは、&lt;code>li&lt;/code> 要素は単純な箇条書きのリスト形式で表示されてしまいます。
次のようなスタイルを定義しておくと、それっぽく横並びで表示されてよい感じになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">CSS&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-css" data-lang="css">&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">tags&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">tags&lt;/span> &lt;span class="nt">li&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">display&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">inline-block&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c">/* 横に並べる */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">list-style-type&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">none&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">margin-right&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="kt">em&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">tags&lt;/span> &lt;span class="nt">li&lt;/span> &lt;span class="nt">a&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">display&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">block&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c">/* 選択範囲を広げる */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">text-decoration&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">none&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">padding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">0.5&lt;/span>&lt;span class="kt">em&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="kt">em&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">background&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">lightgray&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">color&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mh">#333&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">.&lt;/span>&lt;span class="nc">tags&lt;/span> &lt;span class="nt">li&lt;/span> &lt;span class="nt">a&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nd">hover&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">background&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mh">#555&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">color&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">white&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>実際に表示すると次のような感じになります。&lt;/p></description></item><item><title>Hugo で記事ページに複数のターム（カテゴリ）を割り当てた場合にエラーにする</title><link>https://maku77.github.io/p/5v7o2xp/</link><pubDate>Mon, 01 Jan 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/5v7o2xp/</guid><description>&lt;p>Hugo の仕組みでは、1 つのタクソノミーに割り当てられるタームの数を制限することはできません。
ここでは、複数のタームを割り当ててしまった場合に、エラー表示を行う方法を紹介します。&lt;/p>
&lt;p>１つの記事ページに複数のタグを付けるのはよくあることですが、Web サイトのポリシーによっては、1 つの記事に付けられるカテゴリーは 1 つまでに制限したい、ということがあるかもしれません。
Hugo のデフォルトの仕組みでは、そのような制限はできないのですが、複数のカテゴリが付けられた記事を表示したときに、ログとページ上にメッセージを表示することはできます。&lt;/p>
&lt;p>下記のシングルページテンプレートでは、&lt;code>categories&lt;/code> タクソノミーに 2 つ以上の値（ターム）が設定されている場合に警告メッセージを出力しています。
&lt;strong>&lt;code>errorf&lt;/code>&lt;/strong> 関数を使ってテキスト出力を行うことで、画面上への出力と同時に、コンソール上にもエラーメッセージを出力することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Params.categories&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">gt&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">len&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Params.categories&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">errorf&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;カテゴリが 1 つ以上設定されています！&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">b&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">&lt;code>len .Params.categories&lt;/code> を実行するときに、&lt;code>.Params.categories&lt;/code> が存在しないと nil dereference のエラーが発生してしまいます。
そのため、最初に &lt;code>if .Params.categories&lt;/code> という存在チェックを入れています。&lt;/span>
&lt;/div>
&lt;p>例えば、記事ページの先頭のフロントマターで、下記のように複数のカテゴリを割り当てるような記述をすると、上記の警告メッセージが表示されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/sample-page.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;サンプルページ&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">categories&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;カテゴリ1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;カテゴリ2&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">サンプルページの本文。&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Hugo でサイト全体のターム一覧（タグ一覧）を表示する</title><link>https://maku77.github.io/p/tfk4tdg/</link><pubDate>Sun, 31 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/tfk4tdg/</guid><description>&lt;p>Web サイトのサイドバーなどに、タクソノミータームの一覧（つまりタグの一覧、タグクラウドなど）を表示しておくと、同じ系統の記事に素早くアクセスできて便利です。
ここでは、タクソノミーとして Hugo デフォルトの &lt;code>tags&lt;/code> と &lt;code>categories&lt;/code> が定義されていることを前提とします。&lt;/p>
&lt;h2 id="特定のタクソノミーのターム一覧を表示タグの一覧を表示する">特定のタクソノミーのターム一覧を表示（タグの一覧を表示する）&lt;/h2>
&lt;p>ここでは、tags タクソノミーに含まれているターム一覧を表示する例を示します（つまりタグの一覧です）。
多くのサイトでは、使用するタクソノミーの数は限られている（デフォルトの tags や categories で間に合うことが多い）ので、この使い方が一番多いかもしれません。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレートの実装&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ一覧&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$termName&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$entries&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Taxonomies.tags&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;/tags/&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">relLangURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$termName&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">urlize&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$termName&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$entries&lt;/span>&lt;span class="na">.Count&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">出力結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ一覧&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/tags/%E3%82%BF%E3%82%B01&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ1&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/tags/%E3%82%BF%E3%82%B02&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ2&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/tags/%E3%82%BF%E3%82%B03&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ3&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (15)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>各リンクの後ろには、そのタグを含むページの数を表示しています。&lt;/p>
&lt;p>ページ数の多い順に列挙するには次のようにします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレートの実装&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ一覧&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Taxonomies.tags.ByCount&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;/tags/&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">relLangURL&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Term&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">urlize&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Term&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Count&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">出力結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ一覧&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/tags/%E3%82%BF%E3%82%B03&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ3&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (15)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/tags/%E3%82%BF%E3%82%B02&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ2&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (10)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/tags/%E3%82%BF%E3%82%B01&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>タグ1&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (5)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="ターム一覧とそのタームに所属するページを列挙する">ターム一覧と、そのタームに所属するページを列挙する&lt;/h2>
&lt;p>タグ別にページの一覧まで表示してしまいたい場合は次のようにします。&lt;/p></description></item><item><title>Hugo でタクソノミー関連のテンプレートを定義する</title><link>https://maku77.github.io/p/aqchnnq/</link><pubDate>Sun, 31 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/aqchnnq/</guid><description>&lt;p>あるタクソノミーに所属するタームの一覧（例えばタグの一覧）などを表示するページは Hugo によって自動的に生成されます。
ただし、そのためのレイアウト（テンプレート）ファイルをあらかじめ作成しておく必要があります。&lt;/p>
&lt;h2 id="タクソノミー関連の２種類のテンプレート">タクソノミー関連の２種類のテンプレート&lt;/h2>
&lt;p>タクソノミー関連のテンプレートには、大きく分けて下記の２種類があります。&lt;/p>
&lt;dl>
&lt;dt>タクソノミー・ターム・テンプレート (Taxonomy Terms Template)&lt;/dt>
&lt;dd>あるタクソノミーに含まれているタームの一覧を表示するためのレイアウトです。
&lt;code>https://example.com/tags/&lt;/code> といった URL にアクセスしたときに使用されます。&lt;/dd>
&lt;dt>タクソノミー・リスト・テンプレート (Taxonomy List Template)&lt;/dt>
&lt;dd>あるタームが付加されているページの一覧を表示するためのレイアウトです。
&lt;code>https://example.com/tags/mytag/&lt;/code> といった URL にアクセスしたときに使用されます。&lt;/dd>
&lt;/dl>
&lt;p>以下、それぞれのテンプレートをどのように作成するかを説明していきます。&lt;/p>
&lt;h2 id="タクソノミータームテンプレートを作成する">タクソノミー・ターム・テンプレートを作成する&lt;/h2>
&lt;p>タクソノミー・ターム・テンプレートは、&lt;strong>あるタクソノミーに所属するタームの一覧&lt;/strong> を表示するときに使用されるテンプレートです。
例えば、&lt;code>tags&lt;/code> というタクソノミーが定義されている時、このテンプレートによって &lt;code>https://example.com/tags/&lt;/code> という URL でアクセスできる&lt;strong>タグ一覧ページ&lt;/strong>が生成されます。&lt;/p>
&lt;p>下記のテンプレートファイルのうち、最初に見つかったファイルがタクソノミー・ターム・テンプレートとして使用されます。&lt;/p>
&lt;ol>
&lt;li>&lt;code>/layouts/taxonomy/&amp;lt;単数系のタクソノミー名&amp;gt;.terms.html&lt;/code>&lt;/li>
&lt;li>&lt;strong>&lt;code>/layouts/_default/terms.html&lt;/code>&lt;/strong>&lt;/li>
&lt;li>&lt;code>/themes/&amp;lt;テーマ名&amp;gt;/layouts/taxonomy/&amp;lt;単数系のタクソノミー名&amp;gt;.terms.html&lt;/code>&lt;/li>
&lt;li>&lt;code>/themes/&amp;lt;テーマ名&amp;gt;/layouts/_default/terms.html&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>全てのタクソノミーで共通のレイアウトを使用するのであれば、まずは &lt;strong>&lt;code>layouts/_default/terms.html&lt;/code>&lt;/strong> を作成しておけばよいでしょう。&lt;/p>
&lt;p>下記のサンプルテンプレートは、対象のタクソノミーに所属するタームの一覧を表示します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/terms.html（抜粋）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$plural&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Data.Plural&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$index&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$term&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Data.Terms.Alphabetical&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.LanguagePrefix&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">/&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$plural&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">/&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$term&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">urlize&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$term&lt;/span>&lt;span class="na">.Name&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> (&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$term&lt;/span>&lt;span class="na">.Count&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは、簡略化のために &lt;code>&amp;lt;head&amp;gt;&lt;/code> 要素などの記述を省略していますが、本番環境では、正しく全体の HTML コードを出力するようにしてください。&lt;/p></description></item><item><title>Hugo のタクソノミー機能の基本（タグやカテゴリなど）</title><link>https://maku77.github.io/p/mtfmaxr/</link><pubDate>Sun, 31 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/mtfmaxr/</guid><description>&lt;h2 id="タクソノミーとターム">タクソノミーとターム&lt;/h2>
&lt;p>Hugo では、多くのブログツールや CMS ツールと同様に、各ページに「タグ」や「カテゴリ」といった付加情報を付けてグルーピング（分類）することができます。
このグルーピング（分類）のことを &lt;strong>タクソノミー (taxonomy)&lt;/strong> と呼んでいます。&lt;/p>
&lt;dl>
&lt;dt>タクソノミー (taxonomy)&lt;/dt>
&lt;dd>グルーピング（分類）のための項目名。
例えば、「タグ」や「カテゴリ」といった分類名自体がタクソノミーです。
Hugo は、デフォルトで &lt;strong>tags&lt;/strong> と &lt;strong>categories&lt;/strong> というタクソノミーが定義されています。&lt;/dd>
&lt;dt>ターム (term)&lt;/dt>
&lt;dd>タクソノミーに割り当てる具体的な値。
例えば、あるページのタグとして、「経済」と「日本」という値を割り当てたとすると、「経済」と「日本」のことをタームと呼びます。
タグの一覧ページで表示される個々のタグ名がタームです。&lt;/dd>
&lt;/dl>
&lt;h2 id="コンテンツページにタクソノミータームを割り当てる">コンテンツ（ページ）にタクソノミー・タームを割り当てる&lt;/h2>
&lt;p>コンテンツにタクソノミーを割り当てるには、記事先頭のフロントマター部分に、タクソノミー名とそこに割り当てるターム配列を記述します。
次の例では、&lt;code>tags:&lt;/code> と &lt;code>categories:&lt;/code> というところでタクソノミーの設定を行なっています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/page.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;記事のタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2017-12-31&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">tags&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;タグ1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;タグ2&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">categories&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;カテゴリ1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;カテゴリ2&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">この記事では、`tags` タクソノミーとして「タグ1」「タグ2」というターム、&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">`categories` タクソノミーとして「カテゴリ1」「カテゴリ2」というタームを割り当てています。&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>Hugo のデフォルトのタクソノミーとして、&lt;code>tags&lt;/code> と &lt;code>categories&lt;/code> が用意されています。
上記ではそれぞれのタクソノミーに &lt;code>タグ1&lt;/code> や &lt;code>カテゴリ1&lt;/code> といったタームを設定しています。&lt;/p>
&lt;p>それぞれのタクソノミーの使い方は自由ですが、 どのタクソノミーにも複数のタームを割り当てることができます。
逆に、「1 種類のタクソノミーには 1 つのタームしか割り当てられない」という設定はできません。
そのような場合は、単純にフロントマターで &lt;code>categories&lt;/code> に割り当てるタームを 1 つだけにする、といった運用でカバーします（それよりは、セクションの機能（ディレクトリ階層）で分けた方がよいですね）。
参考までに、1 つのページに複数のカテゴリを割り当ててしまった場合にエラー表示する方法を &lt;a href="../p/5v7o2xp/">こちらで紹介しています&lt;/a>。&lt;/p></description></item><item><title>Hugo でセクションを持たない記事ページ（ルートの記事ページ）の一覧を表示する (.Site.Home.RegularPages)</title><link>https://maku77.github.io/p/4sxmnfi/</link><pubDate>Sat, 30 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/4sxmnfi/</guid><description>&lt;h2 id="home-ページ直下の記事ページ--セクションを持たないページ">Home ページ直下の記事ページ ＝ セクションを持たないページ&lt;/h2>
&lt;p>ホームページを示す &lt;code>Page&lt;/code> オブジェクトの &lt;strong>&lt;code>RegularPages&lt;/code>&lt;/strong> プロパティを参照すると、&lt;strong>&lt;code>content&lt;/code> ディレクトリ直下に置かれた通常ページの一覧&lt;/strong> を取得することができます。
つまり、どのセクションにも所属していない記事ページの一覧です。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>セクションを持たない記事ページ一覧（タイトル順）&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ol&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Home.RegularPages.ByTitle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ol&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>さらに &lt;strong>&lt;code>first&lt;/code>&lt;/strong> 関数を組み合わせて使用すれば、最初の 5 件のみに絞り込んで表示することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>セクションを持たない記事ページ一覧（最初の５件）&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ol&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">first&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Home.RegularPages.ByTitle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ol&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="コラムhugo-v0580-より前のバージョンでのやり方">（コラム）Hugo v0.58.0 より前のバージョンでのやり方&lt;/h2>
&lt;p>Hugo v0.58.0 より前のバージョンでは、ホームページの &lt;code>Page&lt;/code> オブジェクトの &lt;code>.RegularPages&lt;/code> が、サイト全体の記事ページを返してしまっていたので、別の方法でセクションに所属していない記事ページを取得する必要がありました。
例えば、&lt;code>$.Site.RegularPages&lt;/code> で取得したサイト内の記事ページの一覧（&lt;code>Page&lt;/code> 配列）を、&lt;code>where&lt;/code> 関数を使ってフィルタすることで、目的の記事ページだけに絞り込んでいました。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>セクションを持たない記事ページ一覧（タイトル順）&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ol&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.RegularPages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Section&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="na">.ByTitle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ol&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Hugo でサイトのヘッダーとフッターをパーシャルファイルに分離する</title><link>https://maku77.github.io/p/wvi3n7q/</link><pubDate>Wed, 27 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/wvi3n7q/</guid><description>&lt;h2 id="パーシャルテンプレートでページ構成を分割する">パーシャルテンプレートでページ構成を分割する&lt;/h2>
&lt;p>サイト内で共通のヘッダー部分とフッター部分を Hugo の &lt;strong>パーシャルテンプレートファイル&lt;/strong> として作成しておくと、全てのテンプレートから参照できるため、テンプレートの記述をシンプルにすることができます。
Hugo のテンプレート構成では、下記のような感じでテンプレート前半部分と後半部分をまるごとパーシャルファイルで構成してしまうのが一般的のようです。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="" width="404" height="296" src="../p/wvi3n7q/img-001.png" alt="/p/wvi3n7q/img-001.png" />
 &lt;figcaption>図: ヘッダーとフッターをパーシャルテンプレート化&lt;/figcaption>
&lt;/figure>

&lt;p>上記ではリストテンプレート (&lt;code>list.html&lt;/code>) の例を示していますが、ホームページテンプレート (&lt;code>layouts/index.html&lt;/code>) や、セクションテンプレート (&lt;code>layouts/_default/section.html&lt;/code>)、シングルページテンプレート (&lt;code>layouts/_default/single.html&lt;/code>) などを記述する際も同様に構成します。
つまり、パーシャルファイルとして作成する &lt;code>header.html&lt;/code> や &lt;code>footer.html&lt;/code> は、どのテンプレートファイルからでも使用できるように、汎用的な記述をしておく必要があります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/header.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.LanguageCode&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;UTF-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;viewport&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;width=device-width,initial-scale=1.0&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">link&lt;/span> &lt;span class="na">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;stylesheet&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/assets/css/main.css&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">not&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.IsHome&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> | &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;header-favicon&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/partials/footer.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のようなパーシャルテンプレートは、各レイアウト用のテンプレートから次のように使用します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/list.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;header&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">main&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Content&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">main&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">partial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;footer&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは、リストテンプレート内で使用する方法を示していますが、ホームテンプレートや、シングルページテンプレートなどでも同様に使用できます。&lt;/p></description></item><item><title>Hugo でサイト内の全セクションの一覧を表示する (.Site.Sections)</title><link>https://maku77.github.io/p/vczuozw/</link><pubDate>Fri, 22 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/vczuozw/</guid><description>&lt;p>&lt;strong>&lt;code>.Site.Sections&lt;/code>&lt;/strong> を参照すると、サイト内のすべてのセクションページを示す &lt;strong>&lt;code>Page&lt;/code>&lt;/strong> 配列を取得することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/index.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>全セクションのリスト&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Sections&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここで参照できるセクションページは、第一階層に存在するセクションのみであることに注意してください。
下のようなコンテンツ構造だとすると、&lt;code>.Site.Sections&lt;/code> に含まれるのは、★のついたセクションページのみです。&lt;/p>
&lt;pre tabindex="0">&lt;code>content/
 +-- dir1/_index.md ★
 | +-- dir1-1/_index.md
 | +-- dir1-2/_index.md
 +-- dir2/_index.md ★
 +-- dir2-1/_index.md
 +-- dir2-2/_index.md
&lt;/code>&lt;/pre></description></item><item><title>Hugo でサイト内の全ページの一覧を表示する (.Site.Pages)</title><link>https://maku77.github.io/p/sgrjpfu/</link><pubDate>Fri, 22 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/sgrjpfu/</guid><description>&lt;p>&lt;strong>&lt;code>.Site.Pages&lt;/code>&lt;/strong> を参照すると、サイト内のすべてのページを示す &lt;strong>&lt;code>Page&lt;/code>&lt;/strong> 配列を取得することができます。
下記はホームページテンプレート内で、サイト内のすべてのページのリンクを表示する例です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/index.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>全ページのリスト&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Pages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>.Site.Pages&lt;/code> はデフォルトで、日時 (&lt;code>.Date&lt;/code>) の一番新しいものから昇順に並べられた &lt;code>Page&lt;/code> 配列を返します。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">&lt;code>.Site.Pages&lt;/code> は、現在選択中の言語内でのページ一覧を返します。
全言語を含むページ一覧を取得したいときは、代わりに &lt;strong>&lt;code>.Site.AllPages&lt;/code>&lt;/strong> を参照してください。&lt;/span>
&lt;/div></description></item><item><title>Hugo でホームページの Page オブジェクトを取得する</title><link>https://maku77.github.io/p/ffr2bku/</link><pubDate>Fri, 22 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ffr2bku/</guid><description>&lt;p>Hugo テンプレートの中で、ホームページを表す Page オブジェクトを取得するには次のようにします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$home&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Home&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">printf&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;%#v&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$home&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a href="https://gohugo.io/variables/site/">公式ドキュメントの .Site 変数のページ&lt;/a>には書いてないのですが、上記のように簡単にホームページの &lt;code>Page&lt;/code> オブジェクトを取得できるみたいです。
2 行目では、取得した &lt;code>Page&lt;/code> オブジェクトの内容を出力して確認しています。&lt;/p>
&lt;p>&lt;code>GetPage&lt;/code> 関数を使用して、Kind パラメータに &lt;code>&amp;quot;home&amp;quot;&lt;/code> を指定するというのもありです。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$home&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.GetPage&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;home&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">printf&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;%v&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">eq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$home&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Home&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> &lt;span class="cm">{{/* true になるはず */}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>このような取得方法を知るまでは、次のような感じでものすごく面倒な書き方してました。。。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$home&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="nx">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Site.Pages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;URL&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;==&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>まず、&lt;code>where&lt;/code> 関数を使い、全ページ (&lt;code>.Site.Pages&lt;/code>) 中で URL が &lt;code>/&lt;/code> であるものの &lt;code>Page&lt;/code> オブジェクトの配列を取得しています。
実際にはホームページは 1 つだけなのですが、&lt;code>where&lt;/code> は &lt;code>Page&lt;/code> オブジェクトの配列を返すので、&lt;code>index&lt;/code> 関数を使って 1 番目の要素だけを取り出しています。
なんて非効率的な（＾＾；&lt;/p></description></item><item><title>Hugo テンプレートで数値によるループ処理を行う (range, seq)</title><link>https://maku77.github.io/p/8vm6xqm/</link><pubDate>Fri, 22 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/8vm6xqm/</guid><description>&lt;p>Hugo のテンプレート内では、Go 言語のような &lt;code>for&lt;/code> を使用した数値ループは記述できません。
代わりに &lt;code>range&lt;/code> を使用します。&lt;/p>
&lt;p>次の例では、&lt;a href="https://gohugo.io/functions/seq/">seq 関数&lt;/a> を使用して 1 から 5 の数値シーケンスを作成し、それらを &lt;code>range&lt;/code> を使ってループ処理しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレート内での記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$val&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">seq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$val&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">出力結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>戻り値を 2 つの変数で受け取れば、0 始まりのインデックスも同時に得ることができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレート内での記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$index&lt;/span>&lt;span class="o">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$val&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">seq&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> : &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$val&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">出力結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>0 : 1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>1 : 2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>2 : 3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>3 : 4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>4 : 5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Hugo で同一セクション内のページ／セクションの一覧を表示する</title><link>https://maku77.github.io/p/pgub54h/</link><pubDate>Fri, 22 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/pgub54h/</guid><description>&lt;h2 id="そのセクション内のページ一覧を取得する-pagesregularpages">そのセクション内のページ一覧を取得する (.Pages、.RegularPages)&lt;/h2>
&lt;p>リストテンプレートやセクションテンプレートの中で、&lt;strong>&lt;code>.Pages&lt;/code>&lt;/strong> を参照すると、そのセクション（やタクソノミー）直下の記事ページ (regular page) とセクションページ (list page) の一覧を &lt;strong>&lt;code>Page&lt;/code>&lt;/strong> オブジェクトの配列として取得することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/section.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>セクションに含まれる記事ページ（あるいはセクションページ）の一覧&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Pages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>記事ページ (regular page) のみを列挙したい場合は、&lt;code>.Pages&lt;/code> の部分を &lt;strong>&lt;code>.RegularPages&lt;/code>&lt;/strong> に変更してください。
逆に、セクションページ (list page) のみを列挙したい場合は、&lt;code>.Pages&lt;/code> の部分を &lt;strong>&lt;code>Sections&lt;/code>&lt;/strong> に変更してください。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>.Pages&lt;/code>&lt;/strong> &amp;hellip; セクションページと記事ページの一覧&lt;/li>
&lt;li>&lt;strong>&lt;code>.RegularPages&lt;/code>&lt;/strong> &amp;hellip; 記事ページの一覧&lt;/li>
&lt;li>&lt;strong>&lt;code>.Sections&lt;/code>&lt;/strong> &amp;hellip; セクションページの一覧&lt;/li>
&lt;/ul>
&lt;p>上記のようなテンプレートは、タクソノミーテンプレート（タグの一覧ページ）でも同様に使用することができます。&lt;/p>
&lt;p>ただし、&lt;code>.Pages&lt;/code> や &lt;code>.RegularPages&lt;/code> は、リスト系のページから参照することが想定されているため、シングルページテンプレート内で参照すると、&lt;strong>サイズ 0 の配列&lt;/strong> が返されることに注意してください。
そのため、基本的には上記のコードはリスト系のテンプレートでのみ使用することができます。&lt;/p>
&lt;p>シングルページテンプレートからも、同一セクション内のページの一覧を取得したい場合は、まず &lt;strong>&lt;code>.CurrentSection&lt;/code>&lt;/strong> でカレントセクションを示す &lt;code>Page&lt;/code> オブジェクトを取得するとよいでしょう（下記参照)。&lt;/p>
&lt;h2 id="同一セクション内のページ一覧を取得する-currentsectionpages">同一セクション内のページ一覧を取得する (.CurrentSection.Pages)&lt;/h2>
&lt;p>下記のテンプレートコードは、現在の記事ページ（あるいはセクションページ）が所属するセクションの直下のページ（記事ページおよびセクションページ）の一覧を表示します。&lt;/p>
&lt;p>例えば、ホームページを含むトップレベルの階層に置いた記事で実行された場合は、第一階層にあるセクションおよび記事ページの一覧が表示されます。
何らかのセクション内の記事で実行された場合は、その記事が所属するセクション内のサブセクションおよび記事ページの一覧が表示されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html など&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>同じセクション内のページ一覧（セクションページを含む）&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h3&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.CurrentSection&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Pages&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.RelPermalink&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>.Pages&lt;/code> 変数はリスト系ページ（セクションページなど）の &lt;code>Page&lt;/code> オブジェクトにしか要素が格納されない（記事ページでは空配列）になってしまうので、まずは自分自身の記事ページが所属するセクションに対応する &lt;code>Page&lt;/code> オブジェクトを、&lt;code>.CurrentSection&lt;/code> で取得してから処理を行うようにしています。&lt;/p></description></item><item><title>Hugo テンプレート内でマップ（辞書）変数を扱う (dict, index, range)</title><link>https://maku77.github.io/p/yhqogz6/</link><pubDate>Sat, 16 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/yhqogz6/</guid><description>&lt;p>Hugo テンプレート内で辞書変数を定義すると、キーと値のマップ情報を管理することができます。&lt;/p>
&lt;h2 id="マップを定義する-dict">マップを定義する (dict)&lt;/h2>
&lt;p>&lt;a href="https://gohugo.io/functions/dict/">dict 関数&lt;/a> のパラメータに、キーと値のペアを並べていくと、マップ変数を作成することができます。
下記の例では、3 つのキー＆値を持つマップを定義して、その内容を出力しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレート内でのマップ定義例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$d&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">dict&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;key1&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">100&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;key2&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">200&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;key3&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">300&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">printf&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;%#v&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$d&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">実行結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">map[string]interface {}{&amp;#34;key1&amp;#34;:100, &amp;#34;key2&amp;#34;:200, &amp;#34;key3&amp;#34;:300}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">関数名が &lt;code>dict&lt;/code> なので、「辞書」と訳したほうがよいのかもしれませんが、内部的には Go の &lt;code>map&lt;/code> オブジェクトなので、ここでは「マップ」と呼ぶことにします。
Go のテンプレート内で使用できる文法は、Go 言語の文法とは異なっています。
&lt;a href="../p/5cgjnqt/">Go 言語でマップを定義する&lt;/a> ときは &lt;code>map&lt;/code> を使用しますが、Hugo のテンプレート内でマップ（辞書）を定義するときは &lt;code>dict&lt;/code> 関数を使用しなければいけないことに注意してください。&lt;/span>
&lt;/div>
&lt;h2 id="マップの要素を参照する-index">マップの要素を参照する (index)&lt;/h2>
&lt;p>マップ変数の後ろに、ドットで繋げてキー名を指定すると、そのキーに対応する要素の値を参照することができます（存在しないキーを指定した場合は何も出力されません）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレート内での記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$d&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">dict&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;key1&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">100&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;key2&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">200&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;key3&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">300&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$d&lt;/span>&lt;span class="na">.key1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$d&lt;/span>&lt;span class="na">.key2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$d&lt;/span>&lt;span class="na">.key3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">実行結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>100
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>300
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ただし、このようにドットを使ってキーを指定する方法は、キー名がアルファベット（やアンダースコア）で始まっている場合にしか使用できません。
より汎用的なキー（数字始まりなど）を使用して、マップ内の要素を参照するには、&lt;a href="https://gohugo.io/functions/index-function/">index 関数&lt;/a> を使用します。&lt;/p></description></item><item><title>Hugo テンプレート内で変数を扱う</title><link>https://maku77.github.io/p/y39gzkc/</link><pubDate>Fri, 15 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/y39gzkc/</guid><description>&lt;p>Hugo テンプレート内で変数を定義するときは、変数名のプレフィックスとして &lt;strong>&lt;code>$&lt;/code>&lt;/strong> を付けます。&lt;/p>
&lt;h2 id="変数定義の基本">変数定義の基本&lt;/h2>
&lt;p>Hugo テンプレート内で変数を定義するには、下記のような構文を使用します。
&lt;code>=&lt;/code> ではなくて、&lt;strong>&lt;code>:=&lt;/code>&lt;/strong> を使用することに注意してください。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$変数名&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">初期値&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>上記の構文から分かるように、独自の変数を定義する場合は、変数名のプレフィックスとして &lt;strong>&lt;code>$&lt;/code>&lt;/strong> を付けます。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">より正確に言うと、上記のように &lt;code>$&lt;/code> で始まるようにアクションを記述すると、それが変数定義のためのアクションだと見なされるということです。&lt;/span>
&lt;/div>
&lt;p>次の例では、数値変数 &lt;code>$x&lt;/code> と、文字列変数 &lt;code>$y&lt;/code> を定義し、それらの値を出力しています。
変数定義のアクションを実行しただけでは、その変数の値は出力されないので、変数出力のためのアクションを続けて記述しています（下の例では &lt;strong>&lt;code>{{ $x }}&lt;/code>&lt;/strong> や &lt;strong>&lt;code>{{ $y }}&lt;/code>&lt;/strong> という部分）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレート内での記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">100&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$y&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$y&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">出力結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>100&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Hello&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="処理結果を変数に格納する">処理結果を変数に格納する&lt;/h2>
&lt;p>ある値をパイプで関数に渡して、処理を行った結果を変数に格納する、といったこともできます。
次の例では、文字列 &lt;code>maku&lt;/code> を &lt;strong>&lt;code>printf&lt;/code>&lt;/strong> 関数に渡し、その結果をさらに &lt;code>printf&lt;/code> 関数に渡しています。
変数 &lt;code>$x&lt;/code> には、その最終的な結果が格納されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレート内での記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;maku&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">printf&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Hello %s.&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">printf&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;%s What&amp;#39;s up?&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">出力結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Hello maku. What&amp;#39;s up?&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記では、文字列 &lt;code>maku&lt;/code> をパイプで &lt;code>printf&lt;/code> 関数に渡していますが、次のように &lt;code>printf&lt;/code> 関数のパラメータとして指定することもできます。&lt;/p></description></item><item><title>Hugo テンプレート内で配列（スライス）変数を扱う (slice, index, range)</title><link>https://maku77.github.io/p/7bvjywy/</link><pubDate>Fri, 15 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/7bvjywy/</guid><description>&lt;p>Hugo テンプレートの中で slice 関数を使用すると、渡されたパラメータ群から新しいスライス（配列）を作成することができます。&lt;/p>
&lt;h2 id="配列スライスを定義する-slice">配列（スライス）を定義する (slice)&lt;/h2>
&lt;p>Hugo テンプレートでは、新しくスライス（配列）を定義するための構文は用意されていないため、そのような場合はスライス（配列）を戻り値として返す &lt;a href="https://gohugo.io/functions/slice/">slice 関数&lt;/a> を使用する必要があります。
下記の例では、&lt;code>slice&lt;/code> 関数に 3 つのパラメータを渡し、それらの要素からなるスライスを生成しています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレート内での記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$arr&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">slice&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;AAA&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;BBB&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;CCC&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">printf&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;%#v&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$arr&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">実行結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">[]interface {}{&amp;#34;AAA&amp;#34;, &amp;#34;BBB&amp;#34;, &amp;#34;CCC&amp;#34;}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">Go のテンプレート内で使用できる文法は、Go 言語の文法とは異なっています。
スライスを定義するときに、Go 言語と同じ構文で、&lt;code>$arr := []string{&amp;quot;AAA&amp;quot;, &amp;quot;BBB&amp;quot;, &amp;quot;CCC&amp;quot;}&lt;/code> と記述することはできないことに注意してください。&lt;/span>
&lt;/div>
&lt;h2 id="配列スライスの要素を参照する-index">配列（スライス）の要素を参照する (index)&lt;/h2>
&lt;p>インデックス番号指定で配列（スライス）内の要素を参照するには、&lt;a href="https://gohugo.io/functions/index-function/">index 関数&lt;/a> を使用します。
この書き方は、慣れるまでは若干わかりにくいかもしれません。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">テンプレート内での記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$arr&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">:=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">slice&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;AAA&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;BBB&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;CCC&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$arr&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$arr&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">index&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">$arr&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">実行結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>AAA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>BBB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>CCC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="配列スライスをループで処理する-range">配列（スライス）をループで処理する (range)&lt;/h2>
&lt;p>配列の全要素をループで処理したい場合は、&lt;strong>&lt;code>range&lt;/code>&lt;/strong> を使って以下のように記述します。&lt;/p></description></item><item><title>Hugo テンプレート内にコメントを記述する</title><link>https://maku77.github.io/p/5zwytgx/</link><pubDate>Fri, 15 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/5zwytgx/</guid><description>&lt;p>Hugo のテンプレートファイル内では、C/C++ や Java に似た形式（&lt;strong>&lt;code>/*&lt;/code>&lt;/strong> と &lt;strong>&lt;code>*/&lt;/code>&lt;/strong>）でコメントを記述することができます。
コメントとして記述した部分は、HTML ファイルに出力するときに削除されます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="cm">/* a comment */&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>複数行にまたがるコメントを記述することもできます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> comment
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> comment
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> comment
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Hugo テンプレート内で if や with で分岐処理する</title><link>https://maku77.github.io/p/ewoqwrk/</link><pubDate>Mon, 11 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ewoqwrk/</guid><description>&lt;p>Hugo テンプレートの中で、&lt;strong>&lt;code>if&lt;/code>&lt;/strong> アクションや &lt;strong>&lt;code>with&lt;/code>&lt;/strong> アクションを使用することで、分岐処理を行うことができます。&lt;/p>
&lt;h2 id="if-による分岐処理">if による分岐処理&lt;/h2>
&lt;h3 id="if-の構文">if の構文&lt;/h3>
&lt;p>Hugo のテンプレート内で分岐処理を行うには、下記のように &lt;code>if&lt;/code> ~ &lt;code>end&lt;/code> を使用します。
必要に応じて、&lt;code>else&lt;/code> や &lt;code>else if&lt;/code> を挟むことができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">●&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> ... &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">●&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> ... &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> ... &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">●&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> ... &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">▲&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> ... &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">●&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> ... &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">▲&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> ... &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span> ... &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>{{&lt;/code>&lt;/strong> と &lt;strong>&lt;code>}}&lt;/code>&lt;/strong> で囲まれた部分は、Go のテンプレートでは &lt;strong>アクション&lt;/strong> と呼ばれている部分で、基本的に 1 つのアクションだけを記述することができます（関数をパイプで結んだりすることはできる）。
&lt;code>if&lt;/code> による条件式を記述する部分と、&lt;code>end&lt;/code> でブロックを閉じる部分は、上記のように分けて記述する必要があるため、若干まわりくどくなってしまうケースがあるかもしれませんが、そこは我慢するしかありません。&lt;/p></description></item><item><title>Hugo でセクションの階層構造を取得する (.CurrentSection、.Parent、.Sections)</title><link>https://maku77.github.io/p/8vrj4ui/</link><pubDate>Tue, 05 Dec 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/8vrj4ui/</guid><description>&lt;p>Hugo のテンプレートファイル内から参照できる &lt;strong>&lt;code>.Parent&lt;/code>&lt;/strong> や &lt;strong>&lt;code>.Sections&lt;/code>&lt;/strong> といった Page 変数を参照すると、親セクションの情報や、子セクションの情報を取得することができます。
セクション系の情報を取得するための &lt;a href="https://gohugo.io/variables/page/">Page 変数&lt;/a> には下記のようなものがあります。&lt;/p>
&lt;dl>
&lt;dt>&lt;code>.CurrentSection&lt;/code>&lt;/dt>
&lt;dd>自分自身が所属するセクションの情報。自分自身がセクションページであったり、ホームページである場合は、自分自身のページの情報。型は &lt;code>Page&lt;/code> オブジェクト。通常の記事ページ、ホームページ、セクションページ以外では &lt;code>nil&lt;/code> になります（例えば、タクソノミーリストのページでは &lt;code>nil&lt;/code> になります）。&lt;/dd>
&lt;dt>&lt;code>.Parent&lt;/code>&lt;/dt>
&lt;dd>自分自身がセクションページの場合、親セクションの情報。自分自身が通常ページの場合、自分が所属するセクションの情報。型は &lt;code>Page&lt;/code> オブジェクト。&lt;/dd>
&lt;dt>&lt;code>.Sections&lt;/code>&lt;/dt>
&lt;dd>自分自身のセクションが含む子セクションの配列（ホームページテンプレート、あるいは、セクションテンプレートのみで意味を持つ）。型は &lt;code>Page&lt;/code> オブジェクトの配列。&lt;/dd>
&lt;/dl>
&lt;p>レイアウトファイル内で、これらのセクション情報を参照することで、&lt;strong>階層構造に応じたナビゲーション用リンクを自動で生成&lt;/strong> したりすることができるようになります。
ここでは、下記のような階層構造のコンテンツを用意して、それぞれのページで参照できるセクション情報がどのように変化するかを見てみましょう。&lt;/p>
&lt;pre tabindex="0">&lt;code>contents/
 +-- _index.md (home page)
 +-- dir1/
 | +-- _index.md (section page)
 | +-- page.md (single page)
 | +-- dir1-1/
 | | +-- _index.md (section page)
 | | +-- page.md (single page)
 | +-- dir1-2/
 | +-- _index.md (section page)
 | +-- page.md (single page)
 +-- dir2/
 | +-- _index.md (section page)
 +-- dir3/
 +-- _index.md (section page)
&lt;/code>&lt;/pre>&lt;h2 id="currentsection自分が所属するセクション">.CurrentSection（自分が所属するセクション）&lt;/h2>
&lt;p>テンプレートファイル内で &lt;strong>&lt;code>.CurrentSection&lt;/code>&lt;/strong> を参照すると、自分自身のページが所属するセクション (同一階層の &lt;code>_index.md&lt;/code>）の &lt;code>Page&lt;/code> オブジェクトを取得することができます。
テンプレートファイル（レイアウトファイル）内で、&lt;code>.CurrentSection&lt;/code> の値を出力して、どのような値が格納されているかを調べてみましょう。
ここでは、次のような３種類のテンプレートファイルを用意することにします。&lt;/p></description></item><item><title>Hugo のセクションテンプレート (section.html) の中でセクションのタイトルを表示する</title><link>https://maku77.github.io/p/mn4ji9o/</link><pubDate>Tue, 28 Nov 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/mn4ji9o/</guid><description>&lt;p>セクションテンプレートの中では、&lt;strong>&lt;code>.Title&lt;/code>&lt;/strong> や &lt;strong>&lt;code>.Section&lt;/code>&lt;/strong> を利用してセクションページ用のタイトルを生成することができます。
それぞれの変数の違いについて説明します。&lt;/p>
&lt;h2 id="セクションテンプレートとは">セクションテンプレートとは&lt;/h2>
&lt;p>&lt;a href="https://gohugo.io/templates/section-templates/">セクションテンプレート&lt;/a>（あるいはセクションページテンプレート）は、content ディレクトリ内の各セクションのインデックスファイル (&lt;strong>&lt;code>_index.md&lt;/code>&lt;/strong>) をレンダリングするときに使用されるテンプレートファイルです。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ディレクトリ構成の例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">content/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +-- mysection1/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | +-- _index.md ★このファイルや、
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | +-- page1.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> | +-- page2.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +-- mysection2/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +-- _index.md ★このファイルに適用されるレイアウトです
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +-- page1.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> +-- page2.md&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>どのようなファイルがセクションテンプレートとして使用されるかは、本家サイトの下記ページに詳しく説明されています。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/templates/section-templates/#section-template-lookup-order">Section Template Lookup Order&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>すべてのセクションで共通のテンプレートを使用したいのであれば、まずは下記のようなパスにテンプレートファイルを用意するのがよいでしょう。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>/layouts/_default/section.html&lt;/code> （セクション専用のテンプレート）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>/layouts/_default/list.html&lt;/code> （セクション以外にも様々なリスト系ページで使われるテンプレート）
＜
テーマとしてテンプレートファイルを提供したいときは、テーマディレクトリの下に同じ構成でファイルを作成すれば OK です。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>/themes/&amp;lt;テーマ名&amp;gt;/layouts/_default/section.html&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>/themes/&amp;lt;テーマ名&amp;gt;/layouts/_default/list.html&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>&lt;code>list.html&lt;/code>&lt;/strong> の方は、ホームページ（ルートの &lt;code>_index.md&lt;/code>）や、タグやカテゴリーのインデックスページなどにも使用されます。
セクションのインデックスページとしてのみ適用したいテンプレートであれば、&lt;strong>&lt;code>section.html&lt;/code>&lt;/strong> という名前で作成しましょう。&lt;/p>
&lt;h2 id="セクションテンプレートから-title-を参照する">セクションテンプレートから .Title を参照する&lt;/h2>
&lt;p>セクションテンプレート &lt;code>layouts/_default/section.html&lt;/code>（存在しない場合は &lt;code>list.html&lt;/code>）の中で &lt;strong>&lt;code>{{ .Title }}&lt;/code>&lt;/strong> と記述すると、そのセクションの &lt;code>_index.md&lt;/code> ファイルのフロントマターに定義した &lt;code>title&lt;/code> の情報が参照されます。
これはすなわち「セクションページのタイトル」として使用できるものです。&lt;/p></description></item><item><title>Hugo のレイアウト用テンプレートの種類を理解する</title><link>https://maku77.github.io/p/zg4n7q9/</link><pubDate>Tue, 28 Nov 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/zg4n7q9/</guid><description>&lt;p>Hugo では様々なタイプのテンプレートファイルを用意することができ、コンテンツファイルのパスに応じて、どのテンプレートファイルを使ってレンダリングされるかが決定されます。&lt;/p>
&lt;h2 id="hugo-のテンプレートファイル">Hugo のテンプレートファイル&lt;/h2>
&lt;p>Hugo で Web サイトを作成する場合、コンテンツファイルとして Markdown ファイルを作成していきます。
この Markdown ファイルが HTML の形にレンダリングされるとき、&lt;strong>テンプレートファイル&lt;/strong> が使用されます。
Hugo のテンプレートの仕組みを理解することは、Hugo を使いこなすキモとなります。
ここでは、どのような種類のテンプレートファイルが、どのようなコンテンツに対して適用されてレンダリングされるのかを把握しましょう。&lt;/p>
&lt;p>ここでは、下記のようなコンテンツ階層があるものとして説明していきます。&lt;/p>
&lt;h4 id="コンテンツのディレクトリ階層">コンテンツのディレクトリ階層&lt;/h4>
&lt;pre tabindex="0">&lt;code>content/
 +-- _index.md （ホームページ）
 +-- page1.md （通常のページ）
 +-- page2.md （通常のページ）
 +-- section1/
 | +-- _index.md （セクションのインデックスページ ＝ セクションページ）
 | +-- pagel-1.md （通常のページ）
 | +-- page1-2.md （通常のページ）
 +-- section2/
 +-- _index.md （セクションのインデックスページ ＝ セクションページ）
 +-- page2-1.md （通常のページ）
 +-- page2-2.md （通常のページ）
&lt;/code>&lt;/pre>&lt;h2 id="ホームページテンプレート-homepage-template">ホームページテンプレート (Homepage Template)&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/templates/homepage/">Homepage Template&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>最上位の &lt;strong>&lt;code>_index.md&lt;/code>&lt;/strong> をレンダリングするときは、&lt;strong>ホームページテンプレート&lt;/strong> が使用されます。&lt;/p>
&lt;pre tabindex="0">&lt;code>content/
 +-- _index.md ★ホームページテンプレートを使用してレンダリング
 +-- page1.md
 +-- page2.md
 +-- section1/
 | +-- _index.md
 | +-- pagel-1.md
 | +-- page1-2.md
 +-- section2/
 +-- _index.md
 +-- page2-1.md
 +-- page2-2.md
&lt;/code>&lt;/pre>&lt;p>ホームページテンプレートといっても、特定のテンプレートファイルが適用されるのではなく、下記のようなファイルのうち最初に見つかったテンプレートファイルが使用されることになります。&lt;/p></description></item><item><title>複数の Hugo サイトで同じテーマディレクトリを参照する (themesDir)</title><link>https://maku77.github.io/p/4m7gqfx/</link><pubDate>Sat, 14 Oct 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/4m7gqfx/</guid><description>&lt;p>ローカル PC 上でいくつもの Hugo サイトを作成していて、さらに共通したテーマも同時に作成している場合は、同一のテーマディレクトリを参照して開発できると便利です。&lt;/p>
&lt;p>複数の Hugo プロジェクトから、同一のテーマを参照するには、下記のような方法があります。&lt;/p>
&lt;ol>
&lt;li>GitHub などにテーマ用のリポジトリを作成して、そのリポジトリを複数の Hugo プロジェクトに clone する。&lt;/li>
&lt;li>各 Hugo プロジェクトの &lt;code>themes&lt;/code> ディレクトリを、共通のテーマディレクトリへのシンボリックリンクへ置き換える。&lt;/li>
&lt;li>設定ファイル (&lt;code>config.toml&lt;/code>) で、共通のテーマディレクトリを参照するように設定する。&lt;/li>
&lt;/ol>
&lt;p>1 番目の方法は王道ですが、Git を介して各サイトのテーマを同一に保つのは、開発段階ではちょっと手間がかかって面倒かもしれません。
そんなときオススメなのは 2 番目と 3 番目の方法です。&lt;/p>
&lt;h2 id="シンボリックリンクで共通のテーマディレクトリを参照する">シンボリックリンクで共通のテーマディレクトリを参照する&lt;/h2>
&lt;p>Linux や macOS などのようにシンボリックリンクを作成できる OS では、共通のテーマディレクトリをシンボリックリンクで参照してしまうのがお手軽です。
例えば、下記のように共通で使用するテーマディレクトリ (&lt;code>hugo_themes&lt;/code>) と、参照元となる３つの Hugo プロジェクト (&lt;code>site1&lt;/code>、&lt;code>site2&lt;/code>、&lt;code>site3&lt;/code>) があるとします。&lt;/p>
&lt;pre tabindex="0">&lt;code>- hugo_themes/ （共通のテーマディレクトリ）
 +-- mytheme/
 +-- archetypes/
 +-- layouts/
 +-- static/
 +-- ...
- site1/ （Hugo サイト 1）
- site2/ （Hugo サイト 2）
- site3/ （Hugo サイト 3）
&lt;/code>&lt;/pre>&lt;p>各 Hugo プロジェクト内の &lt;code>themes&lt;/code> ディレクトリを、&lt;code>hugo_themes&lt;/code> へのシンボリックリンクに置き換えてしまえば、すべてのサイトから同じテーマディレクトリを参照できます。&lt;/p></description></item><item><title>複数の Hugo サーバーを 1 つのコマンドプロンプト上で立ち上げる</title><link>https://maku77.github.io/p/yg4o9rb/</link><pubDate>Tue, 10 Oct 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/yg4o9rb/</guid><description>&lt;h2 id="hugo-サーバーの複数起動について">Hugo サーバーの複数起動について&lt;/h2>
&lt;p>複数のサイトを Hugo で運用しているケースでは、ひとつのコマンドプロンプトから同時にサーバー起動できると便利です。&lt;/p>
&lt;p>ここでは、下記のようにホームディレクトリ以下に複数の Hugo プロジェクトが存在するとします。&lt;/p>
&lt;ul>
&lt;li>&lt;code>C:/website/site1&lt;/code>&lt;/li>
&lt;li>&lt;code>C:/website/site2&lt;/code>&lt;/li>
&lt;li>&lt;code>C:/website/site3&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>各 Hugo プロジェクトに対して Hugo サーバーを起動するには、例えば次のように実行していきます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ポート番号を指定して Hugo サーバーを複数起動する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">C:\&amp;gt; hugo server -p 50001 -s C:/website/site1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">C:\&amp;gt; hugo server -p 50002 -s C:/website/site2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">C:\&amp;gt; hugo server -p 50003 -s C:/website/site3&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;ul>
&lt;li>参考: &lt;a href="../p/wdyk5n7/">カレントディレクトリを気にせずに hugo コマンドを実行する&lt;/a>&lt;/li>
&lt;li>参考: &lt;a href="../p/jj7rcvf/">ポート番号を指定して Hugo サーバーを起動する&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ただし、上記のようにすると、1 つのサーバープロセスが 1 つのコマンドプロンプトを占有するため、複数の Hugo サーバーを起動しているときに複数のコマンドプロンプトを開いたままにしなければいけません。&lt;/p>
&lt;h2 id="1-つのターミナルで複数の-hugo-サーバーを起動する">1 つのターミナルで複数の Hugo サーバーを起動する&lt;/h2>
&lt;h3 id="windows-の場合">Windows の場合&lt;/h3>
&lt;p>Windows の &lt;strong>&lt;code>start&lt;/code>&lt;/strong> コマンドを使用すると、バックグラウンドで &lt;code>hugo&lt;/code> コマンドを実行することができるので、追加でコマンドプロンプトを開くことなしに複数の Hugo サーバーを起動することができます。
例えば、下記のバッチファイルは、３つの Hugo サーバーをバックグラウンドで起動します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">start-servers.bat&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bat" data-lang="bat">&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">echo&lt;/span> off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">start&lt;/span> /b hugo server -p 50001 -s C:/website/site1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">start&lt;/span> /b hugo server -p 50002 -s C:/website/site2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">start&lt;/span> /b hugo server -p 50003 -s C:/website/site3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">title&lt;/span> Hugo Servers&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">最後の行の &lt;strong>&lt;code>title Hugo Servers&lt;/code>&lt;/strong> では、コマンドプロンプトのウィンドウタイトルを Hugo Servers に変更しています。
ウィンドウタイトルを変更しておくと、タスクバーを見ただけで何のためのウィンドウなのかを判別しやすくなるのでお勧めです。&lt;/span>
&lt;/div>
&lt;p>バックグラウンドで動作している Hugo サーバーをまとめて終了するには、例えば、&lt;strong>&lt;code>taskkill&lt;/code>&lt;/strong> コマンドを使用して、&lt;code>hugo.exe&lt;/code> によるプロセスをまとめて終了します。&lt;/p></description></item><item><title>Hugo のセクション機能の基本（記事を階層化する）</title><link>https://maku77.github.io/p/8ihz7es/</link><pubDate>Wed, 04 Oct 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/8ihz7es/</guid><description>&lt;p>Hugo では、記事ファイルをディレクトリ内に格納するだけで、その名前の &lt;strong>セクション&lt;/strong> に所属する記事として扱うことができます。
この機能は、記事を物理的な階層構造で管理するために使用することができます。&lt;/p>
&lt;h2 id="セクションの基本">セクションの基本&lt;/h2>
&lt;p>Hugo の記事ファイル（&lt;code>.md&lt;/code> ファイル）は、&lt;strong>&lt;code>content&lt;/code>&lt;/strong> ディレクトリに格納していきますが、&lt;code>content&lt;/code> ディレクトリの下にさらにディレクトリを作成して、そこに格納することもできます。
例えば、次のように &lt;code>author&lt;/code> というサブディレクトリを作成して、その下に &lt;code>.md&lt;/code> ファイルを配置することができます。&lt;/p>
&lt;ul>
&lt;li>&lt;code>/content/author/maku.md&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>このようなディレクトリ階層を作成すると、&lt;code>maku.md&lt;/code> という記事は、&lt;code>author&lt;/code> という &lt;strong>セクションに所属する記事&lt;/strong> として扱われるようになります。
セクションはディレクトリ階層で表現されるため、1 つの記事は、1 つのセクションにしか所属できません。&lt;/p>
&lt;p>セクション名は、記事のテンプレート内から &lt;strong>&lt;code>{{ .Section }}&lt;/code>&lt;/strong> で参照することができます（Page オブジェクトのプロパティ）。
個々の記事のレイアウトは、&lt;strong>&lt;code>single.html&lt;/code>&lt;/strong> というテンプレートファイル (&lt;a href="https://gohugo.io/templates/single-page-templates/">single page template&lt;/a>) によって行われるため、まずはこのテンプレートファイルを作成しましょう。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/_default/single.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">セクション名: &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">with&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Section&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>なし&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">main&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Content&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">main&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">ここで使用している &lt;code>with&lt;/code> という構文は、&lt;code>if&lt;/code> の拡張構文です。
指定した値が存在する場合、シンプルに &lt;code>{{ . }}&lt;/code> でその値を参照できます。
上記のテンプレートファイルの例では、&lt;code>.Section&lt;/code> が存在する場合だけその値を表示し、存在しない場合は「なし」と表示するようにしています。&lt;/span>
&lt;/div>
&lt;p>記事ファイル (&lt;code>.md&lt;/code>) としては、次の 2 種類を用意してどのように表示されるか比べてみます。&lt;/p></description></item><item><title>Hugo のショートコードの中からフロントマターのパラメータを参照する ($.Page.Params)</title><link>https://maku77.github.io/p/t4sdxi3/</link><pubDate>Mon, 02 Oct 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/t4sdxi3/</guid><description>&lt;p>Hugo のショートコードの中で &lt;strong>&lt;code>$.Page.Params&lt;/code>&lt;/strong> を参照すると、コンテンツファイルのフロントマターに記述したパラメータにアクセスすることができます。
下記の &lt;code>hello&lt;/code> ショートコードは、コンテンツファイル (.md) のフロントマターに記述された &lt;code>title&lt;/code> パラメータと &lt;code>date&lt;/code> パラメータの値を表示します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/title-and-date.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Page.Params.title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Page.Params.date&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">dateFormat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Mon, 02 Jan 2006&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">&lt;p>時刻情報は &lt;strong>&lt;code>dateFormat&lt;/code>&lt;/strong> 関数に渡すことで、任意のフォーマットで出力することができます。
パイプで渡すのではなく、関数の第 2 パラメータとして次のように渡すこともできます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">dateFormat&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;Mon, 02 Jan 2006&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Page.Params.date&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Go 言語の時刻の扱いに関しては &lt;a href="../p/sy58beh/">こちらを参照&lt;/a> してください。&lt;/p>
&lt;/span>
&lt;/div>
&lt;p>作成した &lt;code>title-and-date&lt;/code> ショートコードは、コンテンツファイルの中から次のように使用します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/page1.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ページタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2017-10-02&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line hl">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="l">&amp;lt; title-and-date &amp;gt;}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のショートコードの部分は、HTML ファイル出力時に次のように展開されます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">Page1 Title&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Mon, 02 Oct 2017
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Hugo のショートコードの中から設定ファイルのパラメータを参照する ($.Site.Params)</title><link>https://maku77.github.io/p/53patex/</link><pubDate>Mon, 02 Oct 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/53patex/</guid><description>&lt;p>Hugo のショートコードの中で &lt;strong>&lt;code>$.Site.Params&lt;/code>&lt;/strong> を参照すると、設定ファイル (&lt;code>config.toml&lt;/code>) の &lt;strong>&lt;code>params&lt;/code>&lt;/strong> セクションに記述した情報を取得することができます。
例えば、設定ファイルに下記のように記述されていたとします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">config.toml&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">baseURL&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;http://example.org/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">languageCode&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;ja-jp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">title&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;わたしのブログ&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">theme&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;my-theme&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">params&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">subtitle&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;Hugo を使って日記を書いています&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">authors&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Maku&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Ponyo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記の &lt;code>params&lt;/code> セクションに記述した設定値は、ショートコードの中から &lt;strong>&lt;code>$.Site.Params.&amp;lt;パラメータ名&amp;gt;&lt;/code>&lt;/strong> で参照することができます。
下記の &lt;code>site-info&lt;/code> ショートコードは、サイトのタイトルとサブタイトル、筆者情報を表示するショートコードの実装例です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/site-info.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.Title&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;subtitle&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.Params.subtitle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">range&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">$.Site.Params.authors&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="cp">{{-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">-}}&lt;/span>&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">end&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">上記のコードの中で、&lt;strong>&lt;code>{{- . -}}&lt;/code>&lt;/strong> と書いてある部分は、ループ処理で取り出した著者の名前を出力することを示しています。
&lt;code>{{ . }}&lt;/code> と記述する代わりに、前後にハイフンを入れておくことで、出力時に前後の余計なスペースを取り除いてくれます。&lt;/span>
&lt;/div>
&lt;p>コンテンツファイル (&lt;code>.md&lt;/code>) の中からは、下記のようにしてショートコードを呼び出すことができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ページタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2017-10-02&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="l">&amp;lt; site-info &amp;gt;}}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ショートコードの部分は、下記のように展開されます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>わたしのブログ&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;subtitle&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Hugo を使って日記を書いています&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Maku
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">li&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Ponyo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">ul&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Hugo で独自のショートコードを作成する</title><link>https://maku77.github.io/p/ttfyk5o/</link><pubDate>Fri, 29 Sep 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ttfyk5o/</guid><description>&lt;p>Hugo で独自のショートコードを作成すると、定型の HTML コードを記事内に簡単に埋め込めるようになります。&lt;/p>
&lt;h2 id="ショートコード作成の基本">ショートコード作成の基本&lt;/h2>
&lt;p>ショートコードは、&lt;strong>&lt;code>layouts/shortcodes&lt;/code>&lt;/strong> ディレクトリ内に &lt;strong>&lt;code>.html&lt;/code>&lt;/strong> 拡張子のファイルとして作成します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/my-shortcode.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">This is my first short code.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ファイル名から拡張子を除いたものが、ショートコード名となります。
上記の例の場合、&lt;code>my-shortcode&lt;/code> というショートコードを作成したことになります。
記事（Markdown ファイル）の中から、下記のように呼び出すと、上記の内容がそこに展開されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/page1.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;ページタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line hl">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="l">&amp;lt; my-shortcode &amp;gt;}}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="ショートコードにパラメータを渡す-get">ショートコードにパラメータを渡す (.Get)&lt;/h2>
&lt;h3 id="単純なパラメータ">単純なパラメータ&lt;/h3>
&lt;p>ショートコード呼び出し時に、パラメータを渡すことができます。
下記の例では、２つのパラメータ &lt;code>red&lt;/code>、&lt;code>32px&lt;/code> を渡しています。&lt;/p>
&lt;pre tabindex="0">&lt;code>{{&amp;lt; my-shortcode red 32px &amp;gt;}}
&lt;/code>&lt;/pre>&lt;p>渡されたパラメータは、ショートコードの中で &lt;strong>&lt;code>{{ .Get インデックス番号 }}&lt;/code>&lt;/strong> のように参照することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">layouts/shortcodes/my-shortcode.html&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go-html-template" data-lang="go-html-template">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;color:&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">; font-size:&lt;/span>&lt;span class="cp">{{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="na">.Get&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nx">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="cp">}}&lt;/span>&lt;span class="s">;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> This is my first short code.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="名前付きパラメータ">名前付きパラメータ&lt;/h3>
&lt;p>上記の例では、参照するパラメータをインデックス番号 (0, 1, 2, &amp;hellip;) で指定していますが、2 つ以上のパラメータを持つショートコードを作成するときは、&lt;strong>名前付きパラメータ&lt;/strong> の仕組みを使うと分かりやすくなります。&lt;/p></description></item><item><title>Hugo のショートコードで本文内に HTML スニペットを埋め込む</title><link>https://maku77.github.io/p/tsfzj4n/</link><pubDate>Fri, 29 Sep 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/tsfzj4n/</guid><description>&lt;p>記事の中に定型のコード（YouTube 動画表示用 HTML など）を埋め込みたいときは、Hugo のショートコード (Shortcode) の機能を使用すると便利です。&lt;/p>
&lt;h2 id="ショートコードの基本">ショートコードの基本&lt;/h2>
&lt;p>Hugo は基本的にマークダウン形式で記事を記述していくのですが、マークダウンの表現力には限界があるので、ときには HTML を直接記述したくなることがあります。
しかし、毎回同じような HTML を記述するのでは、マークダウン形式を使用する意味がなくなってしまいます。
このような場合に、HTML 部分をショートコードとして外部ファイルに保存しておくと、記事の中に簡単にその HTML を埋め込めるようになります。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">ショートコードは記事（コンテンツファイル）の中から呼び出すことができますが、テンプレートファイルの中からは呼び出せないことに注意してください。
テンプレートの中から同様のことを行いたい場合は、パーシャルテンプレートの仕組みを使用します。&lt;/span>
&lt;/div>
&lt;p>Hugo には、いくつかの組み込みのショートコードが用意されています。
例えば、下記は Youtube の動画や、Instagram の投稿を埋め込むためのショートコードの使い方の例です。&lt;/p>
&lt;h3 id="例-youtube-動画を記事内に埋め込む">例: Youtube 動画を記事内に埋め込む&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&amp;lt;&lt;/span> &lt;span class="nx">youtube&lt;/span> &lt;span class="nx">w7Ft2ymGmfc&lt;/span> &lt;span class="p">&amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&amp;lt;&lt;/span> &lt;span class="nx">youtube&lt;/span> &lt;span class="nx">id&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;w7Ft2ymGmfc&amp;#34;&lt;/span> &lt;span class="nx">autoplay&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span> &lt;span class="p">&amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="例-instagram-の投稿を記事内に埋め込む">例: Instagram の投稿を記事内に埋め込む&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&amp;lt;&lt;/span> &lt;span class="nx">instagram&lt;/span> &lt;span class="nx">BWNjjyYFxVx&lt;/span> &lt;span class="p">&amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="例-ツイートを記事内に埋め込む">例: ツイートを記事内に埋め込む&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&amp;lt;&lt;/span> &lt;span class="nx">tweet&lt;/span> &lt;span class="mi">877500564405444608&lt;/span> &lt;span class="p">&amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ショートコードの呼び出し方">ショートコードの呼び出し方&lt;/h2>
&lt;p>記事内からショートコードを呼び出すには、下記のような構文を使用します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&amp;lt;&lt;/span> &lt;span class="nx">shortcode&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="nx">param1&lt;/span> &lt;span class="nx">param2&lt;/span> &lt;span class="p">&amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>名前付きのパラメータを使用する場合は、&lt;code>param1=&amp;quot;value1&amp;quot;&lt;/code> のように記述します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&amp;lt;&lt;/span> &lt;span class="nx">shortcode&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="nx">param1&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;value1&amp;#34;&lt;/span> &lt;span class="nx">param2&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;value2&amp;#34;&lt;/span> &lt;span class="p">&amp;gt;}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>HTML タグのように、開始タグと終了タグで内部テキストを囲むこともできます (paired shortcode)。&lt;/p>
&lt;pre tabindex="0">&lt;code>{{&amp;lt; shortcode-name &amp;gt;}}
長めのテキストをショートコードへの入力として扱う場合は、このように開始タグと終了タグで囲む方式を使うとよいです。
この部分のテキストは、ショートコードの実装の中で .Inner という変数で参照できます。
{{&amp;lt; /shortcode-name &amp;gt;}}
&lt;/code>&lt;/pre>&lt;p>内部テキストの中で Markdown 記法を使う場合は、&lt;code>{{&amp;lt;&lt;/code> と &lt;code>&amp;gt;}}&lt;/code> の代わりに、&lt;code>{{%&lt;/code> と &lt;code>%}}&lt;/code> でショートコード名を囲みます。&lt;/p>
&lt;pre tabindex="0">&lt;code>{{% shortcode-name %}}
内部テキストの中で __強調テキスト__ や `inline code` などの Markdown 記法を使うことができます。
{{% /shortcode-name %}}
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>参考: &lt;a href="../p/ttfyk5o/">独自のショートコードを作成する&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Hugo で独自のテーマを作成する</title><link>https://maku77.github.io/p/s4qbuez/</link><pubDate>Sun, 10 Sep 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/s4qbuez/</guid><description>&lt;h2 id="独自テーマの新規作成">独自テーマの新規作成&lt;/h2>
&lt;p>Hugo には、ネット上に公開されているテンプレートがたくさんありますが、思い通りのデザインをするときは、自分でテーマを作成することになります。
テーマを作成するときは、まずは下記のコマンドで雛形を出力します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo new theme &amp;lt;テーマ名&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>例えば下記のように実行すると、&lt;strong>&lt;code>themes/my-theme&lt;/code>&lt;/strong> ディレクトリが生成されます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo new theme my-theme
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>生成されるファイル群は下記のようになっていて、ディレクトリ構成はバッチシできていますが、ファイル内の記述はほとんど空っぽです。
このファイル群をベースにして、テンプレートを作成していきます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">独自テーマの雛形&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">themes/my-theme/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── LICENSE.md （MIT ライセンス）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── archetypes/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   └── default.md （ほぼ空っぽ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── layouts/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   ├── 404.html （空っぽ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   ├── _default/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   │   ├── list.html （空っぽ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   │   └── single.html （空っぽ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   ├── index.html （空っぽ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   └── partials/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   ├── footer.html （空っぽ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   └── header.html （空っぽ）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── static/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   ├── css/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │   └── js/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── theme.toml （デフォルトの設定ファイル）&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="トップページのレイアウト-layoutsindexhtml-を作成する">トップページのレイアウト (layouts/index.html) を作成する&lt;/h2>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="600" height="236" src="../p/s4qbuez/img-001_hu11664817131038979490.png" alt="/p/s4qbuez/img-001.png" />
 &lt;figcaption>図: 独自テーマを使ったはじめてのページ&lt;/figcaption>
&lt;/figure>

&lt;p>テーマディレクトリ内の &lt;strong>&lt;code>layouts/index.html&lt;/code>&lt;/strong> は、サイトのトップページ用のテンプレートファイルです。
もし、ひとつの HTML ファイルだけで構成されるサイト (SPA: Single Page Application) を作成するのであれば、このファイルだけを作成すればよいことになります。
初期状態では何も記述されていないので、まずは手始めに、サイト名だけを表示するように修正してみましょう。&lt;/p></description></item><item><title>Hugo で日本語を正しく扱えるようにしてページサマリーが長くなるのを防ぐ (hasCJKLanguage, isCJKLanguage)</title><link>https://maku77.github.io/p/rqcwgyj/</link><pubDate>Tue, 29 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/rqcwgyj/</guid><description>&lt;p>Hugo の記事一覧ページでは、記事の先頭部分を特定の単語数 (70 words) だけサマリー表示するようになっています。
ただし、このワードカウントはデフォルトでは英語などの単語数をベースに計算されているので、日本語などでは正しくカウントされずに、長大なサマリーが表示されてしまいます。&lt;/p>
&lt;p>日本語の文字数を正しく数えて、短いサマリーを表示できるようにするには、設定ファイルで下記のように &lt;strong>&lt;code>hasCJKLanguage&lt;/code>&lt;/strong> を &lt;code>true&lt;/code> に設定します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">config.toml の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">hasCJKLanguage&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">config.yaml の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">hasCJKLanguage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>これで、Hugo 内部の &lt;strong>&lt;code>.Summary&lt;/code>&lt;/strong> や &lt;strong>&lt;code>.WordCount&lt;/code>&lt;/strong> が日本語で正しく動作するようになり、短いサマリー文章が表示されるようになります。&lt;/p>
&lt;p>各ページごとに設定を行いたい場合は、下記のようにフロントマターで、&lt;strong>&lt;code>isCJKLanguage&lt;/code>&lt;/strong> を &lt;code>true&lt;/code> に設定します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;記事のタイトル&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2017-08-29&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">isCJKLanguage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">記事の本文&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>設定ファイルでは &lt;code>hasCJKLanguage&lt;/code> を設定し、Markdown ファイルのフロントマターでは &lt;code>isCJKLanguage&lt;/code> を設定することに注意してください。&lt;/p></description></item><item><title>Hugo で特定の記事を常にリスト上方に表示する（weight プロパティ）</title><link>https://maku77.github.io/p/utmg42x/</link><pubDate>Mon, 28 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/utmg42x/</guid><description>&lt;p>Hugo で記事（コンテンツ）の一覧を表示しようとすると、通常は記事の作成日時順に表示されます。
一覧ページで特定の記事を最初に表示したい場合は、記事のフロントマターの &lt;strong>&lt;code>weight&lt;/code>&lt;/strong> プロパティで、記事の重要度（整数値）を設定します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">記事のヘッダ (Front matter) の記述例&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;重要な記事&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;2017-08-28&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">weight&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">...&lt;/span>&lt;span class="l">本文...&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>weight&lt;/code> プロパティに設定した値は、小さいほど重要度が高いと認識されます。
つまり、&lt;code>weight&lt;/code> 値を 1 にすると、重要な記事として上の方に表示されます。
2 はその次、3 はさらにその次、というように、昇順に表示されます。
0 は特別で、&lt;code>weight&lt;/code> 値を指定していないのと同じ意味になります。&lt;/p>
&lt;p>&lt;code>weight&lt;/code> 値には、実はマイナスの値も設定することができるため、-99999 といった値を設定しておくと、1 や 2 と設定したものよりも上位に表示されます（優先度がものすごく高いと見なされる）。&lt;/p>
&lt;p>&lt;code>weight&lt;/code> 値の設定されていない（あるいは &lt;code>weight: 0&lt;/code> に設定した）通常の記事は、どのような &lt;code>weight&lt;/code> 値を持つ記事よりも優先度が低いと見なされませます（後ろに表示されます）。&lt;/p></description></item><item><title>Hugo で記事を作成する</title><link>https://maku77.github.io/p/q7sdwgy/</link><pubDate>Fri, 25 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/q7sdwgy/</guid><description>&lt;h2 id="記事ファイルを作成する">記事ファイルを作成する&lt;/h2>
&lt;p>Hugo で公開する Web サイトの記事は、&lt;strong>&lt;code>content&lt;/code>&lt;/strong> ディレクトリに Markdown ファイルとして作成します（例: &lt;code>sample.md&lt;/code>）。
記事ファイルは、空っぽのテキストファイルから作成していくこともできますが、&lt;strong>&lt;code>hugo new&lt;/code>&lt;/strong> コマンドを使用することで、記事のひな形ファイル (&lt;strong>&lt;code>archetypes/default.md&lt;/code>&lt;/strong>) をベースにして Markdown ファイルを自動生成することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">記事ファイル（Markdown ファイル）を作成&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo new sample.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">/Users/maku/my_site/content/sample.md created
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように実行すると、&lt;code>content&lt;/code> ディレクトリ内に &lt;code>sample.md&lt;/code> ファイルが作成されます。
作成されたファイルの先頭部分には、下記のような Front matter というヘッダが記述されています。
このヘッダが、&lt;code>archetypes/default.md&lt;/code> をもとにして自動生成されたものです。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">content/sample.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;Sample&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="ld">2017-08-25T22:55:55&lt;/span>&lt;span class="m">+09&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">00&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">draft&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>あとは、タイトル (&lt;code>title&lt;/code>) を適切なものに書き換え、Front matter ヘッダ以降に記事の本文を記述していきます。
公開できるレベルまで記述できたら、ヘッダ部分の &lt;strong>&lt;code>draft: true&lt;/code>&lt;/strong> の行を削除します。&lt;/p>
&lt;h2 id="archetypes">Archetypes&lt;/h2>
&lt;p>ここで、ベースとなっている &lt;code>archetypes/default.md&lt;/code> を覗いてみましょう。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">archetypes/default.md&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">replace .TranslationBaseName &amp;#34;-&amp;#34; &amp;#34; &amp;#34; | title }}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">date&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">.Date }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">draft&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>title&lt;/code> フィールドには &lt;code>hugo new&lt;/code> コマンドで指定した名前が自動で入り、&lt;code>date&lt;/code> フィールドには現在の時刻が自動で入るようになっています。
このファイルの内容をもとに、記事ファイルが作成されていることが分かりますね。&lt;/p></description></item><item><title>Hugo のテーマを設定する</title><link>https://maku77.github.io/p/h2cku5d/</link><pubDate>Fri, 25 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/h2cku5d/</guid><description>&lt;h2 id="テーマをダウンロードする">テーマをダウンロードする&lt;/h2>
&lt;p>Hugo で Web サイトを生成するときは、外観のベースとなる &lt;strong>テーマ&lt;/strong> を設定する必要があります。
テーマを設定せずに &lt;code>hugo&lt;/code> コマンドで Web サイトを出力しても、真っ白なページが表示されてしまうだけです。
テーマは自分で作成することもできますが、&lt;a href="https://themes.gohugo.io/">Hugo Themes&lt;/a> というサイトに、有志の人によって作られたテーマが公開されていますので、まずはここからダウンロードして使ってみるのがよいでしょう。
使用方法はテーマごとに少しずつことなるので、詳細はそれぞれのテーマの説明 (&lt;code>README.md&lt;/code>) を読んでください。&lt;/p>
&lt;h3 id="テーマの-zip-ファイルをダウンロードする方法">テーマの ZIP ファイルをダウンロードする方法&lt;/h3>
&lt;p>例えば、下記の bootstrap4-blog というテーマがよさそうであれば、&lt;strong>Download&lt;/strong> ボタンを押します。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="800" height="410" src="../p/h2cku5d/img-001_hu17512080529367599835.png" alt="/p/h2cku5d/img-001.png" />
&lt;/figure>

&lt;p>通常は、GitHub のサイトに飛ぶので、&lt;strong>Clone or download&lt;/strong> のボタンを押してテーマをダウンロードしてください。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="800" height="389" src="../p/h2cku5d/img-002_hu11360609321131056317.png" alt="/p/h2cku5d/img-002.png" />
&lt;/figure>

&lt;p>ダウンロードしたテーマは、プロジェクトの &lt;strong>&lt;code>themes&lt;/code>&lt;/strong> ディレクトリに配置します。
このケースでは、&lt;code>themes/bootstrap4-blog&lt;/code> ディレクトリとして配置します。&lt;/p>
&lt;h3 id="テーマを-git-で取得する方法">テーマを Git で取得する方法&lt;/h3>
&lt;p>テーマは GitHub 上で管理されていますので、&lt;a href="../git/">Git&lt;/a> コマンドが使える環境であれば、下記のように &lt;code>git clone&lt;/code> してしまうのが簡単です（もちろん先にリポジトリの URL は調べておく必要はありますが）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> git clone https://github.com/alanorth/hugo-theme-bootstrap4-blog.git themes/bootstrap4-blog
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>もし、自分のサイトを Git 管理しているのであれば、次のようにテーマを &lt;a href="../p/dsctaq7/">Git サブモジュール&lt;/a> として取り込んでしまうがよいです。
Git サブモジュールのコマンド (&lt;code>git submodule&lt;/code>) はちょっと難しいですが、テーマをサブモジュールとして管理すれば、テーマ側の更新を適宜反映できるようになります。&lt;/p></description></item><item><title>カレントディレクトリを気にせずに hugo コマンドを実行する</title><link>https://maku77.github.io/p/wdyk5n7/</link><pubDate>Fri, 25 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/wdyk5n7/</guid><description>&lt;p>&lt;code>hugo&lt;/code> コマンドを実行するときに、&lt;strong>&lt;code>-s (--source)&lt;/code>&lt;/strong> オプションを使用することで、ソースディレクトリのパスを指定して起動することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: ~/mysite 以下のソースコードを使って Hugo サーバーを起動する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo server -s ~/mysite
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: ~/mysite 以下の記事を新規作成する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo new sample.md -s ~/mysite
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記の例では、&lt;code>-s ~/mysite&lt;/code> というソースディレクトリの指定を末尾に持ってきましたが、&lt;code>hugo&lt;/code> の直後に指定しても動作するようです。
これを利用して、下記のようなコマンドエイリアスを作成しておけば、どのディレクトリからでもすぐに記事作成を始められて便利です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.bash_profile&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> hugo-mysite&lt;span class="o">=&lt;/span>hugo -s ~/mysite&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>例えば、下記のように使用することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo-mysite new sample.md &lt;span class="c1"># 記事の作成&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo-mysite server &lt;span class="c1"># Hugo サーバーを起動&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo-mysite &lt;span class="c1"># サイトをビルド（~/mysite/public に出力）&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ポート番号を指定して Hugo サーバーを起動する</title><link>https://maku77.github.io/p/jj7rcvf/</link><pubDate>Fri, 25 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/jj7rcvf/</guid><description>&lt;p>Hugo サーバーを &lt;code>hugo server&lt;/code> コマンドで起動すると、デフォルトでは &lt;strong>1313&lt;/strong> ポートを使用する Web サーバが立ち上がります。
ただし、複数の Hugo サーバーを同時に立ち上げようとすると、2 つめ以降の Hugo サーバーにはランダムなポート番号が割り当てられます（おそらく Private ports である 49152～65535 の範囲のポート番号が使用されます）。&lt;/p>
&lt;p>任意のポート番号を使うように指定するには、下記のように &lt;strong>&lt;code>-p (--port)&lt;/code>&lt;/strong> オプションを使用します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: ポート番号 51234 で Hugo サーバーを立ち上げる&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo server -p &lt;span class="m">51234&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>たくさんの Hugo サーバーを同時に起動するようなケースでは、それぞれのサイトでどのポート番号を使用するかを決めておくとよいでしょう。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 3 つの Hugo サーバーを同時に立ち上げる&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo server -p &lt;span class="m">50001&lt;/span> -s ~/mysite1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo server -p &lt;span class="m">50002&lt;/span> -s ~/mysite2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo server -p &lt;span class="m">50003&lt;/span> -s ~/mysite3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように立ち上げた Web サイトは、それぞれ下記のようなアドレスでアクセスできるようになります。&lt;/p>
&lt;ul>
&lt;li>&lt;code>http://localhost:50001/&lt;/code>&lt;/li>
&lt;li>&lt;code>http://localhost:50002/&lt;/code>&lt;/li>
&lt;li>&lt;code>http://localhost:50003/&lt;/code>&lt;/li>
&lt;/ul></description></item><item><title>Hugo でドラフトページを作成する</title><link>https://maku77.github.io/p/m2oatdw/</link><pubDate>Thu, 24 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/m2oatdw/</guid><description>&lt;h2 id="ドラフト記事">ドラフト記事&lt;/h2>
&lt;p>Hugo のドラフト機能は、未完成の記事ファイルを一時的にほかの記事と同じ場所に保存しておくための機能です。
ページの Front matter 部分に、&lt;code>draft: true&lt;/code> という記述があると、そのページはドラフトとして扱われます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">YAML 形式の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">draft&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">本文&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">TOML 形式の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-md" data-lang="md">&lt;span class="line">&lt;span class="cl">+++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">draft = true
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+++
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">本文&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ドラフトとして作成された記事は、デフォルトでは HTML ファイルとして出力されません。
ドラフト記事も出力するようにするには、&lt;code>hugo&lt;/code> コマンドに &lt;strong>&lt;code>-D&lt;/code>&lt;/strong> (&lt;strong>&lt;code>--buildDrafts&lt;/code>&lt;/strong>) オプションを指定します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ドラフト記事を出力&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo -D &lt;span class="c1"># サイトを生成する場合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo server -D &lt;span class="c1"># サーバーを立ち上げる場合&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="public-ディレクトリに出力されたドラフト記事に注意">public ディレクトリに出力されたドラフト記事に注意&lt;/h2>
&lt;p>&lt;code>hugo&lt;/code> コマンドは、デフォルトで &lt;code>public&lt;/code> ディレクトリに HTML ファイルなどを出力しますが、このとき、&lt;code>public&lt;/code> ディレクトリ内に既に存在するドラフト記事を削除することはありません。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo -D &lt;span class="c1"># ここでドラフト記事も含めて生成される&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo &lt;span class="c1"># 次にドラフトモード OFF で生成しても、既存のドラフト記事が削除されない&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Web サイトを公開するときは、ドラフト記事が間違ってアップロードされないように気を付けてください。
記事のアップロード前は、&lt;code>public&lt;/code> ディレクトリを削除してから &lt;code>hugo&lt;/code> コマンドで再生成すると安全です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Linux / macOS の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> rm -Rf public &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> hugo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Windows の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">C:\&amp;gt; rmdir /s /q public &amp;amp; hugo&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="ドラフト記事の一覧を表示する">ドラフト記事の一覧を表示する&lt;/h2>
&lt;h3 id="コマンドラインから">コマンドラインから&lt;/h3>
&lt;p>コマンドラインで &lt;strong>&lt;code>hugo list drafts&lt;/code>&lt;/strong> と実行すると、&lt;code>contents&lt;/code> ディレクトリ内の記事のうち、ドラフトとしてマークされている（フロントマターに &lt;code>draft: true&lt;/code> と記述されている）ファイルの一覧を確認することができます。&lt;/p></description></item><item><title>Hugo で新規の Web サイトを作成する</title><link>https://maku77.github.io/p/bt5enw6/</link><pubDate>Wed, 23 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/bt5enw6/</guid><description>&lt;p>ここでは、Hugo を使用して、新しく Web サイトを構築するための手順を示します。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="761" height="283" src="../p/bt5enw6/img-001.png" alt="/p/bt5enw6/img-001.png" />
 &lt;figcaption>図: Hugo で生成したサイトの例&lt;/figcaption>
&lt;/figure>

&lt;h2 id="サイトのスケルトンを生成する">サイトのスケルトンを生成する&lt;/h2>
&lt;p>まずは &lt;a href="../p/r8ufyk5/">Hugo をインストールして&lt;/a>、&lt;code>hugo&lt;/code> コマンドを使用できる状態にしてください。
下記のように &lt;strong>&lt;code>hugo new site&lt;/code>&lt;/strong> コマンドを使用して、Web サイトのひな型を作成することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">新しい Web サイト (my_site) を作成する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo new site my_site
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Congratulations! Your new Hugo site is created in C:\Users\maku\my_site.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">Just a few more steps and you&amp;#39;re ready to go:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">1. Download a theme into the same-named folder.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> Choose a theme from https://themes.gohugo.io/, or
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> create your own with the &amp;#34;hugo new theme &amp;lt;THEMENAME&amp;gt;&amp;#34; command.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">2. Perhaps you want to add some content. You can add single files
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go"> with &amp;#34;hugo new &amp;lt;SECTIONNAME&amp;gt;\&amp;lt;FILENAME&amp;gt;.&amp;lt;FORMAT&amp;gt;&amp;#34;.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">3. Start the built-in live server via &amp;#34;hugo server&amp;#34;.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="go">Visit https://gohugo.io/ for quickstart guide and full documentation.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>生成されるファイル群はものすごくシンプルで、下記のようにファイル２つと、いくつかのディレクトリだけです。&lt;/p></description></item><item><title>Hugo とは／Hugo をインストールする</title><link>https://maku77.github.io/p/r8ufyk5/</link><pubDate>Wed, 23 Aug 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/r8ufyk5/</guid><description>&lt;h2 id="hugo-とは">Hugo とは&lt;/h2>


&lt;figure class="xImage">
 &lt;img style="" width="841" height="453" src="../p/r8ufyk5/img-001.png" alt="/p/r8ufyk5/img-001.png" />
&lt;/figure>

&lt;ul>
&lt;li>&lt;a href="https://gohugo.io/">Hugo (https://gohugo.io/)&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Hugo は Jekyll や &lt;a href="../middleman/">Middleman&lt;/a> と同様の静的サイトジェネレータです。
Markdown 形式などで記述したコンテンツから、HTML ファイルを作成してくれます。&lt;/p>
&lt;p>Hugo は Google の &lt;strong>Go 言語&lt;/strong> で作成されており、他のサイトジェネレータに比べて &lt;strong>動作が非常に速い&lt;/strong> という特徴を持っています（それに比べて Jekyll は特に遅いですね ^^;）。
公式サイトでも動作の高速さをアピールしており、今後もその方針は変わらなさそうなので安心です。&lt;/p>
&lt;p>また、インストールに関しても、他の（Ruby 製や Python 製の）サイトジェネレータは、さまざまな外部モジュールをインストールしなければいけないので時間がかかったりすることがありますが、Hugo であれば一瞬で終わります。
例えば、Windows の実行環境を構築する場合も、&lt;code>hugo.exe&lt;/code> という１ファイルを置くだけで終わります。
LiveReload などの機能もデフォルトで組み込まれており、立ち上げまでの導入が非常にシンプルです。&lt;/p>
&lt;h2 id="hugo-のインストール">Hugo のインストール&lt;/h2>
&lt;h3 id="mac-os-の場合">Mac OS の場合&lt;/h3>
&lt;p>Mac の場合は、Homebrew (&lt;code>brew&lt;/code>) で簡単に &lt;strong>Hugo をインストール&lt;/strong> できます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> brew install hugo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>すでに Hugo がインストールされている状態で、&lt;strong>Hugo を最新バージョンに更新&lt;/strong> したいときは次のようにします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> brew upgrade hugo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>現在インストールされている &lt;strong>Hugo のバージョン&lt;/strong> は次のように確認できます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> hugo version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="windows-の場合">Windows の場合&lt;/h3>
&lt;p>Windows の場合は、&lt;a href="https://github.com/gohugoio/hugo/releases">Hugo の Releases ページ&lt;/a>から zip アーカイブ（&lt;code>hugo_extended_0.110.0_windows-amd64.zip&lt;/code> など）をダウンロードしてしまうのが手っ取り早いでしょう。
Sass などの機能を使う場合は、&lt;code>hugo_extended&lt;/code> で始まるファイルを使わないといけないことに注意してください。&lt;/p></description></item></channel></rss>