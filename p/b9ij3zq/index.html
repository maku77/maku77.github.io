<!doctype html><html lang=ja-jp><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Androidメモ: Preference フレームワークを使って設定画面を簡単に作成する - まくまく Android ノート</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X5962TDYXS"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-X5962TDYXS")</script><link rel=icon sizes="16x16 32x32 48x48 64x64" href=../../assets/img/favicon/favicon.ico><link rel=icon sizes=192x192 href=../../assets/img/favicon/192x192.png><link rel=apple-touch-icon href=../../assets/img/favicon/180x180.png><meta name=twitter:card content="summary"><meta property="og:site_name" content="天才まくまくノート"><meta property="og:title" content="Androidメモ: Preference フレームワークを使って設定画面を簡単に作成する"><meta property="og:type" content="article"><meta property="og:url" content="https://maku77.github.io/p/b9ij3zq/"><meta property="og:locale" content="ja_JP"><meta property="og:image" content="https://maku77.github.io/img/site-logo.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:description" content="図: Preference フレームワークを使った設定画面 Preferences フレームワーク Android が提供する Preferences フレームワークを使用すると、SharedPreferences による設定リソースをベースにした設定画面を簡単に作成することができます。 設定画面の表示は Android が用意している PreferenceFragmentCompat クラスにより行われるため、ユーザーが使い慣れた UI で設定画面を表示することができます。 設定画面に表示する項目は、PreferenceScreen 要素をルートにした XML ファイルを作成することで定義できます（コード内で動的に PreferenceScreen オブジェクトを構築することもできます）。
PreferenceFragmentCompat クラス 設定画面を表示するためのベースとなる Fragment クラスです。 （コラム）API level 28 以前は、設定画面用のクラスとして PreferenceActivity が使われていましたが、今は PreferenceFragmentCompat クラスを使用します。 PreferenceScreen レイアウトファイル PreferenceActivity で表示する設定項目の階層構造を定義した XML ファイルです。ユーザーが選択できる項目のリストを管理したり、SharedPreferences のキーを関連付けたりすることができます。 ライブラリの依存関係の追加 PreferenceFragmentCompat クラスを使用するには、androidx.preference:preference ライブラリへの依存を追加しておく必要があります。 ライブラリのバージョン番号は こちらのリリースページ で確認できます（2020年4月15日のリリースは 1.1.1）。
app/build.gradle dependencies { implementation 'androidx.preference:preference:1.1.1' } （コラム）Preferences 系のクラスは、以前は support ライブラリとして提供されており、名前空間は android.preference でした。現在は androidx.preference という名前空間で提供されている Jetpack ライブラリ (AndroidX) の方を使用する必要があります。"><meta property="fb:app_id" content="447708168769292"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6317852277883092" crossorigin=anonymous></script><link rel=stylesheet href=../../css/mm/all.min.03f769de5588c124e5b7baaab243e1f44bc5ccf6139987424d26c43c9491512f.css><link rel=stylesheet href=../../css/all.min.dfed075b80927eec3d408410bcff6d7ec1bbbd82933e2853c49a99f55ed6689b.css></head><body><div class=l-pageHeader><header class=header><a href=../../android/><img class=header__icon src=../../android/_index.svg></a><div class=header__right><div class=header__category><a href=../../android/>まくまく Android ノート</a></div><h1 class=header__title>Androidメモ: Preference フレームワークを使って設定画面を簡単に作成する</h1></div></header></div><div class=l-withSidebar><div class=l-withSidebar__sidebarLeft><style>#tocStub{position:-webkit-sticky;position:sticky;top:2rem;margin-top:2rem;line-height:1.5;max-height:calc(100vh - 4rem);overflow-y:auto;-webkit-overflow-scrolling:touch}#tocStub ul{font-size:.9em;list-style:none;padding:0;border-top:solid 1px #ccc}#tocStub li{border:solid 1px #ccc;border-right:none;margin-top:-1px}#tocStub a{color:#666;padding:.6em .3em .6em .5em;display:block;text-decoration:none;font-weight:400}.level-2{margin-left:.8em}.level-3{padding-left:1.6em}</style><div id=tocStub></div><script>document.addEventListener("DOMContentLoaded",()=>{function e(e){const t=document.createElement("a");return t.setAttribute("id",e),t}function t(t,n){n.parentNode.insertBefore(e(t),n)}function n(e,t,n){const s=document.createElement("li");return s.classList.add("level-"+e),s.innerHTML='<a href="#'+t+'">'+n+"</a>",s}function s(){const e=document.createElement("ul");return document.querySelectorAll("h2, h3").forEach((s,o)=>{const i="section-"+o;t(i,s);const a=s.tagName.charAt(1)-1;e.appendChild(n(a,i,s.textContent))}),e}document.getElementById("tocStub").appendChild(s())})</script></div><div class=l-withSidebar__content><article class=article itemscope itemtype=https://schema.org/BlogPosting><div class=article__header><div class=breadcrumb><a href=../../>&#x1F3E0;HOME</a> > <a href=../../android/>まくまく Android ノート</a></div><div style=text-align:right><div class=mm-snsButtons><a rel="nofollow noopener noreferrer" target=_blank href="https://twitter.com/intent/post?url=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f"><span class=mm-snsButtons__icon><svg fill="#000" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932zM17.61 20.644h2.039L6.486 3.24H4.298z"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://www.threads.net/intent/post?text=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f" name=HOGE><span class=mm-snsButtons__icon><svg fill="#000" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Threads</title><path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18.0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853.0 013.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844.0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65zm1.003-11.69c-.242.0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5.0 00-2.215-.221z"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://www.facebook.com/share.php?u=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f"><span class=mm-snsButtons__icon><svg fill="#0866ff" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Facebook</title><path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401.0.955.042 1.468.103a8.68 8.68.0 011.141.195v3.325a8.623 8.623.0 00-.653-.036 26.805 26.805.0 00-.733-.009c-.707.0-1.259.096-1.675.309a1.686 1.686.0 00-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647z"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://timeline.line.me/social-plugin/share?url=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f&text=Android%e3%83%a1%e3%83%a2:%20Preference%20%e3%83%95%e3%83%ac%e3%83%bc%e3%83%a0%e3%83%af%e3%83%bc%e3%82%af%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e8%a8%ad%e5%ae%9a%e7%94%bb%e9%9d%a2%e3%82%92%e7%b0%a1%e5%8d%98%e3%81%ab%e4%bd%9c%e6%88%90%e3%81%99%e3%82%8b%20-%20%e5%a4%a9%e6%89%8d%e3%81%be%e3%81%8f%e3%81%be%e3%81%8f%e3%83%8e%e3%83%bc%e3%83%88"><span class=mm-snsButtons__icon><svg fill="#00c300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LINE</title><path d="M19.365 9.863c.349.0.63.285.63.631.0.345-.281.63-.63.63H17.61v1.125h1.755c.349.0.63.283.63.63.0.344-.281.629-.63.629h-2.386c-.345.0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346.0.627.285.627.63.0.349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211.0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346.0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195.0.375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345.0.63.285.63.63v4.771zm-5.741.0c0 .344-.282.629-.631.629-.345.0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346.0.628.285.628.63v4.771zm-2.466.629H4.917c-.345.0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348.0.63.285.63.63v4.141h1.756c.348.0.629.283.629.63.0.344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943.0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://b.hatena.ne.jp/entry?url=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f"><span class=mm-snsButtons__icon><svg fill="#00a4de" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Hatena Bookmark</title><path d="M20.47.0C22.42.0 24 1.58 24 3.53v16.94c0 1.95-1.58 3.53-3.53 3.53H3.53C1.58 24 0 22.42.0 20.47V3.53C0 1.58 1.58.0 3.53.0h16.94zm-3.705 14.47c-.78.0-1.41.63-1.41 1.41s.63 1.414 1.41 1.414 1.41-.645 1.41-1.425-.63-1.41-1.41-1.41zM8.61 17.247c1.2.0 2.056-.042 2.58-.12.526-.084.976-.222 1.32-.412.45-.232.78-.564 1.02-.99s.36-.915.36-1.48c0-.78-.21-1.403-.63-1.87-.42-.48-.99-.734-1.74-.794.66-.18 1.156-.45 1.456-.81.315-.344.465-.824.465-1.424.0-.48-.103-.885-.3-1.26-.21-.36-.493-.645-.883-.87-.345-.195-.735-.315-1.215-.405-.464-.074-1.29-.12-2.474-.12H5.654v10.486H8.61zm.736-4.185c.705.0 1.185.088 1.44.262.27.18.39.495.39.93.0.405-.135.69-.42.855-.27.18-.765.254-1.44.254H8.31v-2.297h1.05zm8.656.706v-7.06h-2.46v7.06H18zM8.925 9.08c.71.0 1.185.08 1.432.24.245.16.367.435.367.83.0.38-.13.646-.39.804-.265.154-.747.232-1.452.232h-.57V9.08h.615z"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://getpocket.com/edit?url=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f&title=Android%e3%83%a1%e3%83%a2:%20Preference%20%e3%83%95%e3%83%ac%e3%83%bc%e3%83%a0%e3%83%af%e3%83%bc%e3%82%af%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e8%a8%ad%e5%ae%9a%e7%94%bb%e9%9d%a2%e3%82%92%e7%b0%a1%e5%8d%98%e3%81%ab%e4%bd%9c%e6%88%90%e3%81%99%e3%82%8b%20-%20%e5%a4%a9%e6%89%8d%e3%81%be%e3%81%8f%e3%81%be%e3%81%8f%e3%83%8e%e3%83%bc%e3%83%88"><span class=mm-snsButtons__icon><svg fill="#ef3f56" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Pocket</title><path d="M18.813 10.259l-5.646 5.419c-.32.305-.73.458-1.141.458-.41.0-.821-.153-1.141-.458l-5.646-5.419c-.657-.628-.677-1.671-.049-2.326.63-.657 1.671-.679 2.325-.05l4.511 4.322 4.517-4.322c.66-.631 1.697-.607 2.326.049.631.645.615 1.695-.045 2.326l-.011.001zm5.083-7.546c-.299-.858-1.125-1.436-2.041-1.436H2.179c-.9.0-1.717.564-2.037 1.405-.094.25-.142.511-.142.774v7.245l.084 1.441c.348 3.277 2.047 6.142 4.682 8.139.045.036.094.07.143.105l.03.023c1.411 1.03 2.989 1.728 4.694 2.072.786.158 1.591.24 2.389.24.739.0 1.481-.067 2.209-.204.088-.029.176-.045.264-.06.023.0.049-.015.074-.029 1.633-.36 3.148-1.036 4.508-2.025l.029-.031.135-.105c2.627-1.995 4.324-4.862 4.686-8.148L24 10.678V3.445c0-.251-.031-.5-.121-.742l.017.01z"/></svg></span></a></div></div><div class=article__date><time class=pageDate>2019-08-19</time></div></div><div class=article__body><figure class=xImage><img style="border:solid #ccc 2px" width=240 height=400 src=../../p/b9ij3zq/img-001.png alt=/p/b9ij3zq/img-001.png><figcaption>図: Preference フレームワークを使った設定画面</figcaption></figure><h2 id=preferences-フレームワーク>Preferences フレームワーク</h2><p>Android が提供する Preferences フレームワークを使用すると、<code>SharedPreferences</code> による設定リソースをベースにした設定画面を簡単に作成することができます。
設定画面の表示は Android が用意している <strong><code>PreferenceFragmentCompat</code></strong> クラスにより行われるため、ユーザーが使い慣れた UI で設定画面を表示することができます。
設定画面に表示する項目は、<strong><code>PreferenceScreen</code></strong> 要素をルートにした XML ファイルを作成することで定義できます（コード内で動的に <code>PreferenceScreen</code> オブジェクトを構築することもできます）。</p><ul><li><a href=https://developer.android.com/reference/androidx/preference/PreferenceFragmentCompat.html>PreferenceFragmentCompat クラス</a><ul><li>設定画面を表示するためのベースとなる Fragment クラスです。</li><li>（コラム）API level 28 以前は、設定画面用のクラスとして <code>PreferenceActivity</code> が使われていましたが、今は <code>PreferenceFragmentCompat</code> クラスを使用します。</li></ul></li><li><code>PreferenceScreen</code> レイアウトファイル<ul><li><code>PreferenceActivity</code> で表示する設定項目の階層構造を定義した XML ファイルです。ユーザーが選択できる項目のリストを管理したり、<code>SharedPreferences</code> のキーを関連付けたりすることができます。</li></ul></li></ul><h2 id=ライブラリの依存関係の追加>ライブラリの依存関係の追加</h2><p><code>PreferenceFragmentCompat</code> クラスを使用するには、<code>androidx.preference:preference</code> ライブラリへの依存を追加しておく必要があります。
ライブラリのバージョン番号は <a href="https://developer.android.com/jetpack/androidx/releases/preference?hl=ja">こちらのリリースページ</a> で確認できます（2020年4月15日のリリースは <code>1.1.1</code>）。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>app/build.gradle</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span> <span class=s1>&#39;androidx.preference:preference:1.1.1&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></figure><p>（コラム）Preferences 系のクラスは、以前は support ライブラリとして提供されており、名前空間は <code>android.preference</code> でした。現在は <code>androidx.preference</code> という名前空間で提供されている Jetpack ライブラリ (AndroidX) の方を使用する必要があります。</p><h2 id=設定項目を定義する>設定項目を定義する</h2><p>Android アプリのレイアウトファイルは通常 <code>res/layout</code> ディレクトリに配置しますが、Preferences フレームワークを使って設定画面を表示する場合は、<strong><code>res/xml</code></strong> ディレクトリに XML ファイルを配置します。</p><p>ファイル名は任意ですが、ここでは <code>preferences.xml</code> とします（プログラム内からは <code>R.xml.preferences</code> と参照することになります）。
この XML ファイルのルート要素は <strong><code>androidx.preference.PreferenceScreen</code></strong> にする必要があります。</p><p>下記は、2 つのスイッチ項目と、2 つのチェックボックス項目を持つ PreferenceScreen レイアウトの例です。
それぞれを <code>PreferenceCategory</code> でグルーピングして表示しています。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>res/xml/preferences.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;androidx.preference.PreferenceScreen</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:android=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;PreferenceCategory</span> <span class=na>android:title=</span><span class=s>&#34;スイッチによる設定&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;SwitchPreferenceCompat</span>
</span></span><span class=line><span class=cl>      <span class=na>android:key=</span><span class=s>&#34;switch1&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:title=</span><span class=s>&#34;スイッチ1&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:summary=</span><span class=s>&#34;1つ目のスイッチだよ&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:defaultValue=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;SwitchPreferenceCompat</span>
</span></span><span class=line><span class=cl>      <span class=na>android:key=</span><span class=s>&#34;switch2&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:title=</span><span class=s>&#34;スイッチ2&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:summary=</span><span class=s>&#34;2つ目のスイッチだよ&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:defaultValue=</span><span class=s>&#34;false&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/PreferenceCategory&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;PreferenceCategory</span> <span class=na>android:title=</span><span class=s>&#34;チェックボックスによる設定&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;CheckBoxPreference</span>
</span></span><span class=line><span class=cl>      <span class=na>android:key=</span><span class=s>&#34;checkbox1&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:title=</span><span class=s>&#34;チェックボックス1&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:summary=</span><span class=s>&#34;1つ目のチェックボックスだよ&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:defaultValue=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;CheckBoxPreference</span>
</span></span><span class=line><span class=cl>      <span class=na>android:key=</span><span class=s>&#34;checkbox2&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:title=</span><span class=s>&#34;チェックボックス2&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:summary=</span><span class=s>&#34;2つ目のチェックボックスだよ&#34;</span>
</span></span><span class=line><span class=cl>      <span class=na>android:defaultValue=</span><span class=s>&#34;false&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;/PreferenceCategory&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;/androidx.preference.PreferenceScreen&gt;</span></span></span></code></pre></div></div></figure><p><code>PreferenceScreen</code> 要素以下には、様々な種類の <code>Preference</code> 要素を配置することができます。
下記は代表的な <code>Preference</code> 要素の例で、すべて <code>Preference</code> クラスのサブクラスとして定義されています。</p><table><thead><tr><th>Preference 要素</th><th>表示内容</th></tr></thead><tbody><tr><td><a href=https://developer.android.com/reference/androidx/preference/SwitchPreferenceCompat.html>SwitchPreferenceCompat</a></td><td>ON/OFF の設定（スイッチ）</td></tr><tr><td><a href=https://developer.android.com/reference/androidx/preference/CheckBoxPreference>CheckBoxPreference</a></td><td>ON/OFF の設定（チェックボックス）</td></tr><tr><td><a href=https://developer.android.com/reference/androidx/preference/ListPreference>ListPreference</a></td><td>リストで選択項目を表示</td></tr><tr><td><a href=https://developer.android.com/reference/androidx/preference/DropDownPreference>DropDownPreference</a></td><td>ドロップダウンで選択項目を表示（ListPreference の拡張）</td></tr><tr><td><a href=https://developer.android.com/reference/androidx/preference/EditTextPreference>EditTextPreference</a></td><td>テキスト入力のダイアログを表示</td></tr><tr><td><a href=https://developer.android.com/reference/androidx/preference/PreferenceCategory.html>PreferenceCategory</a></td><td>設定項目をグルーピングして title を表示</td></tr></tbody></table><h3 id=設定項目の-key-属性>設定項目の key 属性</h3><p>各 <code>Preference</code> 要素には <code>key</code> 属性を設定することができ、自動的に <strong>アプリケーションのデフォルトの <code>SharedPreferences</code> ファイル</strong> にそのキー名で設定値が保存されるようになります。
設定ファイルのパスは下記のようになります。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>設定ファイルのパス</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>/data/data/&lt;package名&gt;/shared_prefs/&lt;pacakge名&gt;_preferences.xml</span></span></code></pre></div></div></figure><p>上記のサンプルコードを用いた場合、出力は下記のようになります。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>com.example.myapp_preferences.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39; standalone=&#39;yes&#39; ?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;map&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;boolean</span> <span class=na>name=</span><span class=s>&#34;switch1&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;boolean</span> <span class=na>name=</span><span class=s>&#34;switch2&#34;</span> <span class=na>value=</span><span class=s>&#34;false&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;boolean</span> <span class=na>name=</span><span class=s>&#34;checkbox1&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;boolean</span> <span class=na>name=</span><span class=s>&#34;checkbox2&#34;</span> <span class=na>value=</span><span class=s>&#34;false&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/map&gt;</span></span></span></code></pre></div></div></figure><p>各 <code>Preference</code> 要素の <code>key</code> 属性の値は、このように、デフォルトの <code>SharedPreferences</code> 設定ファイルの <code>name</code> 属性にマッピングされるため、その中で一意になるように管理しておく必要があります。
名前にはドットなどの記号を含めることができるので、必要に応じて <code>display.color.main</code> のように階層化した名前で管理するとよいでしょう。</p><p>ファイルに保存された設定値は、次に設定画面を開くときに自動的に読み込まれます。
アプリケーション内で設定情報を参照したい場合は、下記のような感じでデフォルトの <code>SharedPreferences</code> インスタンスを取得します（詳しくは <a href=../../p/d7dho89/>こちらの記事</a> を参照）。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>設定値の参照方法</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=c1>// SharedPreference インスタンスを取得
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>val</span> <span class=py>prefs</span> <span class=p>=</span> <span class=nc>PreferenceManager</span><span class=p>.</span><span class=n>getDefaultSharedPreferences</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// あとは各設定値を参照するだけ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>val</span> <span class=py>userName</span> <span class=p>=</span> <span class=n>prefs</span><span class=p>.</span><span class=n>getString</span><span class=p>(</span><span class=s2>&#34;userName&#34;</span><span class=p>,</span> <span class=s2>&#34;名無しさん&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>userAge</span> <span class=p>=</span> <span class=n>prefs</span><span class=p>.</span><span class=n>getInt</span><span class=p>(</span><span class=s2>&#34;userAge&#34;</span><span class=p>,</span> <span class=p>-</span><span class=m>1</span><span class=p>)</span></span></span></code></pre></div></div></figure><h3 id=設定画面の階層化>設定画面の階層化</h3><p>XML ファイルのルート要素として配置する <code>&lt;PreferenceScreen></code> は、一画面分の設定項目をまとめる単位です。
以前はこの要素を入れ子構造にすることで、2 階層以上の設定画面を構成する方法がサポートされていましたが、今はこのやり方はサポートされていません。
代わりに、<code>&lt;Preference></code> 要素にフラグメント名を対応付け、その要素がタップされたときに新しくそのフラグメントを起動するように実装する必要があります。詳しくは下記のドキュメントを参照してください。</p><ul><li><a href=https://developer.android.com/guide/topics/ui/settings/organize-your-settings>Organize your settings ｜ Android Developers</a></li></ul><h2 id=設定画面を表示する>設定画面を表示する</h2><p><strong><code>PreferenceFragmentCompat</code></strong> クラスは、設定項目を表示するためのベース <code>Fragment</code> クラスとして使用できます。
このクラスを継承する形で独自の <code>Fragment</code> クラスを実装し、上記で作成した XML ファイルを <strong><code>setPreferencesFromResource()</code></strong> メソッドで読み込みます。
つまり、このメソッドで <strong>読み込む XML ファイルを切り替えるだけで、複数の設定画面を切り替えて表示することができます</strong>。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>MyPreferenceFragment.kt</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>package</span> <span class=nn>com.example.myapp</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>android.os.Bundle</span>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>androidx.preference.PreferenceFragmentCompat</span>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>com.example.myapp.R</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyPreferenceFragment</span> <span class=p>:</span> <span class=n>PreferenceFragmentCompat</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>onCreatePreferences</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>:</span> <span class=n>Bundle</span><span class=p>?,</span> <span class=n>rootKey</span><span class=p>:</span> <span class=n>String</span><span class=p>?)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// res/xml/preferences.xml ファイルに従って設定画面を構成
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>setPreferencesFromResource</span><span class=p>(</span><span class=nc>R</span><span class=p>.</span><span class=n>xml</span><span class=p>.</span><span class=n>preferences</span><span class=p>,</span> <span class=n>rootKey</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></figure><p>この <code>Fragment</code> を表示するための <code>Activity</code> も作った方がよさそうですが、ここでは <code>MainActivity</code> の上に表示してしまうことにしましょう。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>layout/activity_main.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;androidx.constraintlayout.widget.ConstraintLayout</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:android=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:tools=</span><span class=s>&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>android:layout_width=</span><span class=s>&#34;match_parent&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>android:layout_height=</span><span class=s>&#34;match_parent&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>tools:context=</span><span class=s>&#34;.MainActivity&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;FrameLayout</span>
</span></span><span class=line><span class=cl>        <span class=na>android:id=</span><span class=s>&#34;@+id/settings_container&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:layout_width=</span><span class=s>&#34;match_parent&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:layout_height=</span><span class=s>&#34;match_parent&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span></span></span></code></pre></div></div></figure><figure class=xCodeBlock><figcaption class=xCodeBlock_title>MainActivity.kt</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>package</span> <span class=nn>com.example.myapp</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>androidx.appcompat.app.AppCompatActivity</span>
</span></span><span class=line><span class=cl><span class=k>import</span> <span class=nn>android.os.Bundle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MainActivity</span> <span class=p>:</span> <span class=n>AppCompatActivity</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>onCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>:</span> <span class=n>Bundle</span><span class=p>?)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>super</span><span class=p>.</span><span class=n>onCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>setContentView</span><span class=p>(</span><span class=nc>R</span><span class=p>.</span><span class=n>layout</span><span class=p>.</span><span class=n>activity_main</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 設定用の Fragment を表示
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>supportFragmentManager</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>beginTransaction</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>replace</span><span class=p>(</span><span class=nc>R</span><span class=p>.</span><span class=n>id</span><span class=p>.</span><span class=n>settings_container</span><span class=p>,</span> <span class=n>MyPreferenceFragment</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>commit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></figure><h2 id=sharedpreferences-のデフォルト値>SharedPreferences のデフォルト値</h2><p>Preference XML ファイルの <code>defaultValue</code> 属性で設定したデフォルト値は、設定画面を開いたときに初めて使用されます。
でもこれでは、先に <code>SharedPreferences</code> オブジェクトの getter 系メソッドを呼び出したときにデフォルト値として取得できません。</p><h3 id=setdefaultvalues-を使う方法>setDefaultValues を使う方法</h3><p><strong><code>PreferenceManager.setDefaultValues</code></strong> 関数を呼び出すと、Preference XML の <code>defaultValue</code> 属性の値を読み込んで、<code>SharedPreferences</code> オブジェクトの初期値として先回りして設定しておくことができます。
このメソッドは、アプリの <code>MainActivity</code> となるクラスで呼び出すべきとされているので、下記のように <code>Application</code> クラスや <code>MainActivity</code> の <code>onCreate</code> で呼んでおけばよいでしょう（I/O アクセスが若干気になりますが）。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>デフォルト値の設定例</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>class</span> <span class=nc>App</span> <span class=p>:</span> <span class=n>Application</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>lateinit</span> <span class=k>var</span> <span class=py>prefs</span><span class=p>:</span> <span class=n>SharedPreferences</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>onCreate</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>super</span><span class=p>.</span><span class=n>onCreate</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Start loading preferences as early as possible to avoid ANR when
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// referring the configuration for the first time.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nc>PreferenceManager</span><span class=p>.</span><span class=n>setDefaultValues</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nc>R</span><span class=p>.</span><span class=n>xml</span><span class=p>.</span><span class=n>preferences</span><span class=p>,</span> <span class=k>false</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>prefs</span> <span class=p>=</span> <span class=nc>PreferenceManager</span><span class=p>.</span><span class=n>getDefaultSharedPreferences</span><span class=p>(</span><span class=k>this</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></figure><p>このやり方のイケてないところは、<code>setDefaultValues</code> 自体の処理が重く、それにもかかわらずメインスレッドから実行することを前提とした実装になっているところです。
コルーチンの中から呼び出していると、<code>android.view.InflateException</code> 例外で落ちたりします（少なくとも Android 10 時点では NG）。
なので、デフォルト値を扱うときは下記の方法をオススメします。</p><h3 id=リソースにデフォルト値をまとめる方法オススメ>リソースにデフォルト値をまとめる方法（オススメ）</h3><p>SharedPreferences のデフォルト値を扱うときのオススメの方法は、リソースファイルでデフォルト値を定義し、その値を Preference XML ファイルと、<code>SharedPreferences#getString()</code> の両方のデフォルト値として参照する方法です。</p><p>例えば、下記のような感じで、リソースファイルに設定画面用の表示ラベルと一緒にデフォルト値を定義しておきます。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>res/values/settings.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;resources&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;string</span> <span class=na>name=</span><span class=s>&#34;settings_fps_key&#34;</span><span class=nt>&gt;</span>settings.fps<span class=nt>&lt;/string&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;string</span> <span class=na>name=</span><span class=s>&#34;settings_fps_title&#34;</span><span class=nt>&gt;</span>FPS<span class=nt>&lt;/string&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;string</span> <span class=na>name=</span><span class=s>&#34;settings_fps_summary_on&#34;</span><span class=nt>&gt;</span>Show<span class=nt>&lt;/string&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;string</span> <span class=na>name=</span><span class=s>&#34;settings_fps_summary_off&#34;</span><span class=nt>&gt;</span>Hide<span class=nt>&lt;/string&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;bool</span> <span class=na>name=</span><span class=s>&#34;settings_fps_default&#34;</span><span class=nt>&gt;</span>false<span class=nt>&lt;/bool&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/resource&gt;</span></span></span></code></pre></div></div></figure><p>設定画面を構成するための Preference XML ファイルからは、下記のように参照します。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>res/xml/preferences.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;androidx.preference.PreferenceScreen</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:app=</span><span class=s>&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>app:title=</span><span class=s>&#34;MyApp Settings&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;SwitchPreference</span>
</span></span><span class=line><span class=cl>        <span class=na>app:key=</span><span class=s>&#34;@string/settings_fps_key&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>app:title=</span><span class=s>&#34;@string/settings_fps_title&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>app:summaryOn=</span><span class=s>&#34;@string/settings_fps_summary_on&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>app:summaryOff=</span><span class=s>&#34;@string/settings_fps_summary_off&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>app:defaultValue=</span><span class=s>&#34;@bool/settings_fps_default&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/androidx.preference.PreferenceScreen&gt;</span></span></span></code></pre></div></div></figure><p>プログラムの中からは、下記のようにデフォルト値を参照します。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>リソースからデフォルト値を参照</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>prefs</span> <span class=p>=</span> <span class=nc>PreferenceManager</span><span class=p>.</span><span class=n>getDefaultSharedPreferences</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=py>isFpsOn</span> <span class=p>=</span> <span class=n>prefs</span><span class=p>.</span><span class=n>getBoolean</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>context</span><span class=p>.</span><span class=n>resources</span><span class=p>.</span><span class=n>getString</span><span class=p>(</span><span class=nc>R</span><span class=p>.</span><span class=n>string</span><span class=p>.</span><span class=n>settings_fps_key</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>context</span><span class=p>.</span><span class=n>resources</span><span class=p>.</span><span class=n>getBoolean</span><span class=p>(</span><span class=nc>R</span><span class=p>.</span><span class=n>bool</span><span class=p>.</span><span class=n>settings_fps_default</span><span class=p>))</span></span></span></code></pre></div></div></figure><p>これで、重い <code>SharedPreferences.setDefaultValues()</code> を使わずに、初回起動時のデフォルト設定値をうまく扱うことができます。</p><p>ちなみに、<code>res/values</code> ディレクトリ以下に配置するリソースファイルの名前は何でもよいって知ってました？
ここでは <code>strings.xml</code> ではなく、<code>settings.xml</code> という名前で作成してみました。
このルールを知っていれば、特定の機能で使うリソースを複数ファイルにバラバラに定義しなくて済みます。</p><h2 id=いろいろな-preference-要素>いろいろな Preference 要素</h2><h3 id=リストから選択-listpreference>リストから選択 (ListPreference)</h3><figure class=xImage><img style="border:solid #ccc 2px" width=240 height=400 src=../../p/b9ij3zq/img-002.png alt=/p/b9ij3zq/img-002.png></figure><p><code>Preference</code> 要素として <strong><code>ListPreference</code></strong> を使用すると、いくつかの項目の中からユーザに選択させることができます。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>res/xml/preferences.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;androidx.preference.PreferenceScreen</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:android=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;ListPreference</span>
</span></span><span class=line><span class=cl>        <span class=na>android:key=</span><span class=s>&#34;fruit&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:title=</span><span class=s>&#34;Favorite fruit&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:entries=</span><span class=s>&#34;@array/fruit_labels&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:entryValues=</span><span class=s>&#34;@array/fruit_values&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:dialogTitle=</span><span class=s>&#34;Favorite fruit&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:defaultValue=</span><span class=s>&#34;apple&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/androidx.preference.PreferenceScreen&gt;</span></span></span></code></pre></div></div></figure><p>選択項目ごとのラベルや値は下記のように配列リソースとして定義しておきます。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>res/values/arrays.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;resources&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;string-array</span> <span class=na>name=</span><span class=s>&#34;fruit_labels&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;item&gt;</span>りんご<span class=nt>&lt;/item&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;item&gt;</span>バナナ<span class=nt>&lt;/item&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;item&gt;</span>オレンジ<span class=nt>&lt;/item&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/string-array&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;string-array</span> <span class=na>name=</span><span class=s>&#34;fruit_values&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;item&gt;</span>apple<span class=nt>&lt;/item&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;item&gt;</span>banana<span class=nt>&lt;/item&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;item&gt;</span>orange<span class=nt>&lt;/item&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/string-array&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/resources&gt;</span></span></span></code></pre></div></div></figure><p>ちなみに、数値の配列だとしても、タグは <code>string-array</code> を使用する必要があるみたいです（<code>integer-array</code> などにすると <code>ListPreference</code> が <code>NullPointerException</code> で落ちます）。</p><h3 id=他の-activity-を起動する>他の Activity を起動する</h3><p><code>Preference</code> 要素内に <code>intent</code> 要素を入れておくと、その設定項目を選択したときにインテントを発行して任意の <code>Activity</code> を起動することができます。
下記は、Android のディスプレイ設定画面を起動する例です。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>res/xml/preferences.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;androidx.preference.PreferenceScreen</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:android=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;Preference</span> <span class=na>android:title=</span><span class=s>&#34;ディスプレイ設定を起動&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;intent</span> <span class=na>android:action=</span><span class=s>&#34;android.settings.DISPLAY_SETTINGS&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/Preference&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/androidx.preference.PreferenceScreen&gt;</span></span></span></code></pre></div></div></figure><h3 id=on-状態と-off-状態で-summary-テキストの表示を切り替える>ON 状態と OFF 状態で summary テキストの表示を切り替える</h3><p><figure class=xImage><img style="border:solid #ccc 2px" width=240 height=140 src=../../p/b9ij3zq/img-003.png alt=/p/b9ij3zq/img-003.png></figure><figure class=xImage><img style="border:solid #ccc 2px" width=240 height=140 src=../../p/b9ij3zq/img-004.png alt=/p/b9ij3zq/img-004.png></figure></p><p><code>SwitchPreferenceCompat</code> 要素の <code>summary</code> 属性の代わりに、<strong><code>summaryOn</code></strong> 属性と <strong><code>summaryOff</code></strong> 属性を使用すると、設定の ON/OFF に応じて表示テキストを切り替えることができます。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>summaryOn/summaryOff 属性の使用例</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;androidx.preference.PreferenceScreen</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:android=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;SwitchPreferenceCompat</span>
</span></span><span class=line><span class=cl>        <span class=na>android:key=</span><span class=s>&#34;check_updates&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:title=</span><span class=s>&#34;Check updates&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:summaryOn=</span><span class=s>&#34;起動時に最新データに更新します&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:summaryOff=</span><span class=s>&#34;データの更新を行いません&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/androidx.preference.PreferenceScreen&gt;</span></span></span></code></pre></div></div></figure><h3 id=edittextpreference-や-listpreference-の-summary-領域に入力したテキストを自動で表示する>EditTextPreference や ListPreference の summary 領域に入力したテキストを自動で表示する</h3><p><figure class=xImage><img style="border:solid #ccc 2px" width=240 height=180 src=../../p/b9ij3zq/img-005.png alt=/p/b9ij3zq/img-005.png></figure><figure class=xImage><img style="border:solid #ccc 2px" width=240 height=180 src=../../p/b9ij3zq/img-006.png alt=/p/b9ij3zq/img-006.png></figure><figure class=xImage><img style="border:solid #ccc 2px" width=240 height=180 src=../../p/b9ij3zq/img-007.png alt=/p/b9ij3zq/img-007.png></figure></p><p><code>EditTextPreference</code> や <code>ListPreference</code> の <code>useSimpleSummaryProvider</code> 属性を <code>true</code> に設定しておくと、ユーザーの入力したテキスト（あるいは選択した値）が自動的に summary 領域に表示されるようになります。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>res/xml/preferences.xml</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;androidx.preference.PreferenceScreen</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:android=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:app=</span><span class=s>&#34;http://schemas.android.com/apk/res-auto&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;EditTextPreference</span>
</span></span><span class=line><span class=cl>        <span class=na>android:key=</span><span class=s>&#34;username&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:title=</span><span class=s>&#34;User name&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:dialogTitle=</span><span class=s>&#34;User name&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:defaultValue=</span><span class=s>&#34;名無しさん&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>app:useSimpleSummaryProvider=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/androidx.preference.PreferenceScreen&gt;</span></span></span></code></pre></div></div></figure><p>ネームスペースは、<code>xmlns:android="http://schemas.android.com/apk/res/android</code> ではなく、<code>xmlns:app="http://schemas.android.com/apk/res-auto</code> の方を使わないと、「そんな属性はない」と怒られてしまうので注意してください。</p><p>この機能は、<a href=https://developer.android.com/jetpack/androidx/releases/preference#1.1.0-alpha01>anrdoidx.preferences の version 1.1.0-alpha01</a> 以降からサポートされているため、<code>build.gradle</code> でそれ以上のバージョンを指定しておく必要があります。</p><figure class=xCodeBlock><figcaption class=xCodeBlock_title>app/build.gradle</figcaption><div class=xCodeBlock_code><div class=highlight><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span> <span class=s1>&#39;androidx.preference:preference:1.1.0-rc01&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></figure><ul><li>参考: <a href=https://developer.android.com/guide/topics/ui/settings/customize-your-settings#dynamically_update_summaries>Dynamically update summaries ｜ Android Developers</a></li></ul><h2 id=読んでおくべきドキュメント>読んでおくべきドキュメント</h2><p><a href=https://source.android.com/devices/tech/settings/settings-guidelines>Android Settings Design Guidelines</a></p><p>コーディング方法というより、一般的な設定 UI はこうあるべき、という下記のようなガイドラインが示されています。
こういった知識は Android 以外のアプリ開発にも活用できるので読んでおいて損はないです。</p><ul><li>よく使う項目から並べる</li><li>1ページに表示する項目は多くても10～15項目</li><li>多くの設定項目をリスト表示するときはグルーピング機能、区切り線を使う</li><li>設定画面はコンテキストに応じて複数用意することを考慮する（設定<strong>項目</strong>は複数の設定画面から共有して表示してよい）</li><li>タイトル名の付け方（&ldquo;General Settings&rdquo; などは避ける）</li><li>設定項目に親子関係がある場合、マスター設定項目を用意して、子項目をまとめて Enable/Disable できるようにする</li><li>ラジオボタンは個別の設定画面で表示する（他の設定項目と一緒にリストに並べない）</li><li>ユーザ入力を受け付けるボタンやリンクなどは、アプリのテーマに沿った色で表示する</li><li>ボタンを表示するときは、Positive なアクションはテーマカラーで、Negative なアクション（アンインストールとか）はグレーで表示する</li><li>Advanced な設定はデフォルトでは閉じた状態で表示する</li><li>チェックボックスよりもスイッチを使う。でも項目が多い場合や、Negative な項目（通知ブロック）などはチェックボックスの方がわかりやすいことがある。</li></ul></div><div class=article__footer><div class=article__date><time class=pageDate>2019-08-19</time></div><div style=text-align:right><div class=mm-snsButtons><a rel="nofollow noopener noreferrer" target=_blank href="https://twitter.com/intent/post?url=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f"><span class=mm-snsButtons__icon><svg fill="#000" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932zM17.61 20.644h2.039L6.486 3.24H4.298z"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://www.threads.net/intent/post?text=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f" name=HOGE><span class=mm-snsButtons__icon><svg fill="#000" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Threads</title><path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18.0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853.0 013.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844.0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65zm1.003-11.69c-.242.0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5.0 00-2.215-.221z"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://www.facebook.com/share.php?u=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f"><span class=mm-snsButtons__icon><svg fill="#0866ff" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Facebook</title><path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401.0.955.042 1.468.103a8.68 8.68.0 011.141.195v3.325a8.623 8.623.0 00-.653-.036 26.805 26.805.0 00-.733-.009c-.707.0-1.259.096-1.675.309a1.686 1.686.0 00-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647z"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://timeline.line.me/social-plugin/share?url=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f&text=Android%e3%83%a1%e3%83%a2:%20Preference%20%e3%83%95%e3%83%ac%e3%83%bc%e3%83%a0%e3%83%af%e3%83%bc%e3%82%af%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e8%a8%ad%e5%ae%9a%e7%94%bb%e9%9d%a2%e3%82%92%e7%b0%a1%e5%8d%98%e3%81%ab%e4%bd%9c%e6%88%90%e3%81%99%e3%82%8b%20-%20%e5%a4%a9%e6%89%8d%e3%81%be%e3%81%8f%e3%81%be%e3%81%8f%e3%83%8e%e3%83%bc%e3%83%88"><span class=mm-snsButtons__icon><svg fill="#00c300" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LINE</title><path d="M19.365 9.863c.349.0.63.285.63.631.0.345-.281.63-.63.63H17.61v1.125h1.755c.349.0.63.283.63.63.0.344-.281.629-.63.629h-2.386c-.345.0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346.0.627.285.627.63.0.349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211.0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346.0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195.0.375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345.0.63.285.63.63v4.771zm-5.741.0c0 .344-.282.629-.631.629-.345.0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346.0.628.285.628.63v4.771zm-2.466.629H4.917c-.345.0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348.0.63.285.63.63v4.141h1.756c.348.0.629.283.629.63.0.344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943.0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://b.hatena.ne.jp/entry?url=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f"><span class=mm-snsButtons__icon><svg fill="#00a4de" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Hatena Bookmark</title><path d="M20.47.0C22.42.0 24 1.58 24 3.53v16.94c0 1.95-1.58 3.53-3.53 3.53H3.53C1.58 24 0 22.42.0 20.47V3.53C0 1.58 1.58.0 3.53.0h16.94zm-3.705 14.47c-.78.0-1.41.63-1.41 1.41s.63 1.414 1.41 1.414 1.41-.645 1.41-1.425-.63-1.41-1.41-1.41zM8.61 17.247c1.2.0 2.056-.042 2.58-.12.526-.084.976-.222 1.32-.412.45-.232.78-.564 1.02-.99s.36-.915.36-1.48c0-.78-.21-1.403-.63-1.87-.42-.48-.99-.734-1.74-.794.66-.18 1.156-.45 1.456-.81.315-.344.465-.824.465-1.424.0-.48-.103-.885-.3-1.26-.21-.36-.493-.645-.883-.87-.345-.195-.735-.315-1.215-.405-.464-.074-1.29-.12-2.474-.12H5.654v10.486H8.61zm.736-4.185c.705.0 1.185.088 1.44.262.27.18.39.495.39.93.0.405-.135.69-.42.855-.27.18-.765.254-1.44.254H8.31v-2.297h1.05zm8.656.706v-7.06h-2.46v7.06H18zM8.925 9.08c.71.0 1.185.08 1.432.24.245.16.367.435.367.83.0.38-.13.646-.39.804-.265.154-.747.232-1.452.232h-.57V9.08h.615z"/></svg></span></a><a rel="nofollow noopener noreferrer" target=_blank href="https://getpocket.com/edit?url=https%3a%2f%2fmaku77.github.io%2fp%2fb9ij3zq%2f&title=Android%e3%83%a1%e3%83%a2:%20Preference%20%e3%83%95%e3%83%ac%e3%83%bc%e3%83%a0%e3%83%af%e3%83%bc%e3%82%af%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e8%a8%ad%e5%ae%9a%e7%94%bb%e9%9d%a2%e3%82%92%e7%b0%a1%e5%8d%98%e3%81%ab%e4%bd%9c%e6%88%90%e3%81%99%e3%82%8b%20-%20%e5%a4%a9%e6%89%8d%e3%81%be%e3%81%8f%e3%81%be%e3%81%8f%e3%83%8e%e3%83%bc%e3%83%88"><span class=mm-snsButtons__icon><svg fill="#ef3f56" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Pocket</title><path d="M18.813 10.259l-5.646 5.419c-.32.305-.73.458-1.141.458-.41.0-.821-.153-1.141-.458l-5.646-5.419c-.657-.628-.677-1.671-.049-2.326.63-.657 1.671-.679 2.325-.05l4.511 4.322 4.517-4.322c.66-.631 1.697-.607 2.326.049.631.645.615 1.695-.045 2.326l-.011.001zm5.083-7.546c-.299-.858-1.125-1.436-2.041-1.436H2.179c-.9.0-1.717.564-2.037 1.405-.094.25-.142.511-.142.774v7.245l.084 1.441c.348 3.277 2.047 6.142 4.682 8.139.045.036.094.07.143.105l.03.023c1.411 1.03 2.989 1.728 4.694 2.072.786.158 1.591.24 2.389.24.739.0 1.481-.067 2.209-.204.088-.029.176-.045.264-.06.023.0.049-.015.074-.029 1.633-.36 3.148-1.036 4.508-2.025l.029-.031.135-.105c2.627-1.995 4.324-4.862 4.686-8.148L24 10.678V3.445c0-.251-.031-.5-.121-.742l.017.01z"/></svg></span></a></div></div><div class=breadcrumb><a href=../../>&#x1F3E0;HOME</a> > <a href=../../android/>まくまく Android ノート</a></div></div></article><script>const SIDEBAR_HIDE_THRESHOLD=800,SIDEBAR_WIDTH=250,OFFSET=10;let w=window.innerWidth;w>=SIDEBAR_HIDE_THRESHOLD&&(w-=SIDEBAR_WIDTH),w-=OFFSET,w>=728?rakuten_size="728x200":w>=600?rakuten_size="600x200":w>=468?rakuten_size="468x160":w>=336?rakuten_size="336x280":w>=300?rakuten_size="300x250":w>=250?rakuten_size="250x250":rakuten_size="200x350",rakuten_design="slide",rakuten_affiliateId="1239b074.74af6526.1239b075.bc72ef6e",rakuten_items="ctsmatch",rakuten_genreId=0,rakuten_target="_blank",rakuten_theme="gray",rakuten_border="off",rakuten_auto_mode="on",rakuten_genre_title="off",rakuten_recommend="on",rakuten_txtColor="333333",rakuten_moverColor="30C030",rakuten_bgColor="FFFFFF",rakuten_captionColor="333333"</script><script src=https://xml.affiliate.rakuten.co.jp/widget/js/rakuten_widget.js></script></div><div class=l-withSidebar__sidebarRight><nav class=navigation><div class=navigation__header>カテゴリ一覧</div><ul><li><a class=navigation__item href=https://maku77.github.io/memo/>いろいろ</a><li><a class="navigation__item navigation__item--focused" href=https://maku77.github.io/android/>Android</a><li><a class=navigation__item href=https://maku.blog/p/8t6hr3d/>Ansible</a><li><a class=navigation__item href=https://maku77.github.io/blender/>Blender</a><li><a class=navigation__item href=https://maku77.github.io/cpp/>C/C++</a><li><a class=navigation__item href=https://maku77.github.io/docker/>Docker</a><li><a class=navigation__item href=https://maku77.github.io/git/>Git</a><li><a class=navigation__item href=https://maku77.github.io/go/>Go言語</a><li><a class=navigation__item href=https://maku77.github.io/gradle/>Gradle</a><li><a class=navigation__item href=https://maku77.github.io/web/>HTML/CSS</a><li><a class=navigation__item href=https://maku77.github.io/hugo/>Hugo</a><li><a class=navigation__item href=https://maku77.github.io/java/>Java</a><li><a class=navigation__item href=https://maku77.github.io/js/>JavaScript</a><li><a class=navigation__item href=https://maku77.github.io/kotlin/>Kotlin</a><li><a class=navigation__item href=https://maku77.github.io/linux/>Linux/Shell</a><li><a class=navigation__item href=https://maku.blog/p/somcgdw/>Mac</a><li><a class=navigation__item href=https://maku77.github.io/middleman/>Middleman</a><li><a class=navigation__item href=https://toushi.maku.blog/p/etedykx/>MetaTrader</a><li><a class=navigation__item href=https://maku77.github.io/nodejs/>Node.js</a><li><a class=navigation__item href=https://maku77.github.io/octave/>Octave</a><li><a class=navigation__item href=https://maku77.github.io/p4/>Perforce</a><li><a class=navigation__item href=https://maku77.github.io/perl/>Perl</a><li><a class=navigation__item href=https://maku77.github.io/php/>PHP</a><li><a class=navigation__item href=https://maku77.github.io/python/>Python</a><li><a class=navigation__item href=https://maku77.github.io/r/>R</a><li><a class=navigation__item href=https://maku77.github.io/ruby/>Ruby</a><li><a class=navigation__item href=https://maku77.github.io/rust/>Rust</a><li><a class=navigation__item href=https://maku77.github.io/sass/>Sass</a><li><a class=navigation__item href=https://maku77.github.io/sed/>sed/awk</a><li><a class=navigation__item href=https://maku77.github.io/sql/>SQL</a><li><a class=navigation__item href=https://maku77.github.io/tradestation/>トレードステーション</a><li><a class=navigation__item href=https://maku77.github.io/vagrant/>Vagrant</a><li><a class=navigation__item href=https://maku77.github.io/vba/>VBA</a><li><a class=navigation__item href=https://maku77.github.io/vim/>Vim</a><li><a class=navigation__item href=https://maku77.github.io/windows/>Windows</a></ul></nav><style>.codoc-support{display:inline-block;margin:0!important;padding:12px!important;width:200px!important;max-width:100%}.codoc-support .codoc-support-title{font-size:smaller!important;white-space:nowrap;margin-bottom:12px!important}.codoc-support .codoc-btn{width:160px!important}</style><script src=https://codoc.jp/js/cms.js data-css=black data-usercode=tp6ZPzTj3w defer></script><div id=codoc-entry-4gYwTntzzw class=codoc-entries data-without-body=1 data-support-button-text="（っ'-')╮シュッ🔴" data-show-like=0 data-show-about-codoc=0 data-show-powered-by=0 data-support-message=まくに投げ銭できます。></div></div></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("a[href^=http]");for(let n=0;n<e.length;++n){const t=e[n];if(t.href.startsWith("https://maku77.github.io"))continue;const s=t.getElementsByTagName("img");if(s.length>0)continue;const o=t.getElementsByTagName("svg");if(o.length>0)continue;t.classList.add("xExternalLinkIcon"),t.setAttribute("target","_blank"),t.setAttribute("rel","noopener")}})</script></body></html>