<!DOCTYPE html>
<html lang="ja">
<head prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb#">
  

  <meta charset="UTF-8">



<!-- Google Search Console -->
<meta name="google-site-verification" content="LhFi5Dhj5KOfXR186QkncucRdBpmVd8B19v-7zcAmlY" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

  <meta name="description" content="天才星人まくの Hugo ノート">

<meta name="keywords" content="Android,Awk,Best Practice,C/C++,CSS,Docker,Fintech,Git,GitHub,Gradle,HTML5,Java,JavaScript,Middleman,MetaTrader,MT4,MT5,Perforce,Python,Ruby,Sed,Shell Script,Vim">

<!-- You can use open graph tags to customize link previews.
Learn more: https://developers.facebook.com/docs/sharing/webmasters -->
<meta property="og:site_name" content="天才まくまくノート" />
<meta property="og:url"     content="https://maku77.github.io/p/u9r9p7n/" />
<meta property="og:type"    content="website" />
<meta property="og:image"   content="https://maku77.github.io/assets/img/logo-hugo.png" />

  <meta property="og:description" content="天才星人まくの Hugo ノート">

<meta property="fb:app_id"  content="447708168769292" />

<link rel="stylesheet" href="/assets/css/default.css">
<link rel="stylesheet" href="/assets/css/highlight.css">

<!-- Favicons start -->
  <link rel="icon" sizes="16x16 32x32 48x48 64x64" href="/assets/img/favicon/favicon.ico"/>
  <!--[if IE]>
  <link rel="shortcut icon" href="favicon.ico"/>
  <![endif]-->
  <!-- Optional: Android & iPhone -->
  <link rel="apple-touch-icon-precomposed" href="/assets/img/favicon/favicon-152.png"/>
<!-- Favicons end -->

<script src="/assets/js/jquery-3.2.1.min.js"></script>


  <!-- Google Ad Manager -->
  <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
<script>
  window.googletag = window.googletag || {cmd: []};
  googletag.cmd.push(function() {
    googletag.defineSlot('/22026661446/maku77-sidebar', [200, 200], 'div-gpt-ad-1590069504630-0').addService(googletag.pubads());
    googletag.pubads().enableLazyLoad();
    googletag.enableServices();
  });
</script>


  <!-- Codoc 投げ銭ライブラリ -->
  <style>
/* codoc サポートボタン用スタイル */
.codoc-support {
  display: inline-block;
  margin: 0 !important;
  padding: 12px !important;
  width: 400px;
  max-width: 100%;
  /* background: gray !important; */
}
.codoc-support .codoc-support-title {
  font-size: smaller !important;
  white-space: nowrap;
  margin-bottom: 12px !important;
}
.codoc-support .codoc-btn {
  width: 180px !important;
}
</style>
<script src="https://codoc.jp/js/cms.js" data-css="black" data-usercode="tp6ZPzTj3w" charset="UTF-8" defer></script>


  <!-- Google Analytics -->
  <!-- Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-63069513-1', 'auto');
  ga('send', 'pageview');
</script>



  <meta property="og:title" content="サイト構造を変えてもページの URL が変わらないようにする | まくまくHugoノート" />
  <title>サイト構造を変えてもページの URL が変わらないようにする - まくまくHugoノート</title>

  <!-- Ad (Google) -->
  
</head>
<body>

<div class="xPageHeader">
  <a href="/hugo/">
    <img src="/assets/img/logo-hugo.png" class="xPageHeader_logo">
  </a>
  <a href="/hugo/">
    <div class="xPageHeader_category">
    まくまくHugoノート
    </div>
  </a>
  <div class="xPageHeader_title">サイト構造を変えてもページの URL が変わらないようにする</div>
</div>

<div id="xBody">
  

<div class="xBreadCrumbContainer">
  <div class="xBreadCrumb"><a href="/">&#x1F3E0;HOME</a> &gt; <a href="/hugo/">Hugo</a></div>
  <div class="xPageDate">2022-07-27</div>
</div>

  

  <form action="https://www.google.co.jp/cse" id="cse-search-box">
  <div class="xSearchBar">
    <input type="hidden" name="cx" value="partner-pub-6317852277883092:5930376365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input class="xSearchBar_text" type="search" name="q" placeholder="ノートを検索できます…" size="55" results="5" autocomplete="off" /><input class="xSearchBar_button" type="submit" name="sa" value="&#128269; 検索 " />
  </div>
</form>



  <div id="xContainer">
    <div id="xContainer_main">
      <!-- SNS ボタン（上） -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">




<ul class="xSnsButtons">
  <!-- Twitter -->
  <li class="xSnsButtons_twitter">
    <a rel="nofollow" href="https://twitter.com/share?text=まくまくHugoノート： サイト構造を変えてもページの URL が変わらないようにする&url=https://maku77.github.io/p/u9r9p7n/"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'tweet_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-twitter"></i><span class="xSnsButtons_label">ツイート</span>
    </a>
  </li>

  <!-- Facebook -->
  <li class="xSnsButtons_facebook">
    <a rel="nofollow" href="https://www.facebook.com/share.php?u=https://maku77.github.io/p/u9r9p7n/"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'facebook_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-facebook-square"></i><span class="xSnsButtons_label">シェア</span>
    </a>
  </li>

  <!-- Pocket -->
  <li class="xSnsButtons_pocket">
    <a rel="nofollow" href="https://getpocket.com/edit?url=https://maku77.github.io/p/u9r9p7n/"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'pocket_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-get-pocket"></i><span class="xSnsButtons_label">Pocket</span>
    </a>
  </li>
</ul>



      

      <!-- 概要 -->
      

      <div class="xWidget">
        
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-6317852277883092"
     data-ad-slot="8099671242"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


      </div>

      <div class="xContent">
        <!-- 本文 -->
        <h2 id="各ページの-url-は変わってはいけない">各ページの URL は変わってはいけない</h2>

<p>Hugo によって出力される HTML ファイルのパスは、デフォルトでは <code class="language-plaintext highlighter-rouge">content</code> ディレクトリ以下のセクション構成（ディレクトリ構成）やファイル名によって決定されます。</p>

<p>サイトの規模が小さいうちはこれでもよいのですが、Markdown ファイル数が増えてくると、ディレクトリ構造を変えたり、ファイル名を整理したくなってきます。
それによってページの URL がころころ変わってしまうと、せっかくリンクを張ってくれたサイトがあっても、すべてリンク切れになってしまいます。</p>

<p>このようなリンク切れを起こさないようにするのが <strong>パーマリンク (permalink)</strong> という考え方で、各ページに不変の ID を割り当てて URL が変わらないようにします。
例えば、Amazon の各商品のページは 10 桁の ISBN-10 という ID でアクセスできるようになっています。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://www.amazon.co.jp/dp/4592146980/
</code></pre></div></div>

<p>Hugo でも、各ページにこのような ID ベースの URL を割り当てることができます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://&lt;your-hugo-site&gt;/p/abc1234/
</code></pre></div></div>

<h2 id="hugo-で出力するページに固定の-url-を割り当てる">Hugo で出力するページに固定の URL を割り当てる</h2>

<p>Markdown ファイルのフロントマターに <strong><code class="language-plaintext highlighter-rouge">url</code></strong> プロパティを設定すると、そのページの URL を固定することができます。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ページタイトル"</span>
<span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">p/abc1234/"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2019-10-20"</span>
<span class="nn">---</span>
</code></pre></div></div>

<p>例えば、上記のようなフロントマターを記述しておくと、そのページには必ず <code class="language-plaintext highlighter-rouge">https://ドメイン名/p/abc1234/</code> というアドレスでアクセスできるようになります。
一階層目のパスは別の用途で使用する可能性があるため、ここでは <code class="language-plaintext highlighter-rouge">p</code> という階層を掘って、permalink 化した記事を格納するようにしています（Amazon の <code class="language-plaintext highlighter-rouge">dp</code> と同様です）。</p>

<p>このようにすることで、Markdown ファイルのファイル名や記事タイトル、ディレクトリ構成を変えても、最終的な URL を変化させずに済みます。</p>

<h3 id="hugo-搭載の-permalink-機能は使わない">Hugo 搭載の permalink 機能は使わない</h3>

<p>Hugo には他にも、設定ファイルで permalink に関する設定を行う仕組みが用意されていますが、こちらは日付や記事タイトルに基づいて URL が決まるものであり、URL を固定する用途にはあまり向いていません。
また、フロントマターで <code class="language-plaintext highlighter-rouge">aliases</code> プロパティを指定することもできますが、こちらはリダイレクト用の HTML ファイルを追加出力するものであり、最終ターゲットとなるページの URL を制御することはできません。
このような理由により、ページのリンク切れの心配をなくすには、<strong><code class="language-plaintext highlighter-rouge">url</code> プロパティで変化しない ID を割り当てる</strong> ことをお勧めします。</p>

<h3 id="多言語対応ページでは-url-の先頭にスラッシュを付けない">多言語対応ページでは url の先頭にスラッシュを付けない</h3>

<p>Hugo は 1 つのページを <a href="https://gohugo.io/content-management/multilingual/">多言語化してホスティング</a> する機能を持っており、例えば、フランス語に翻訳したページの URL は、<code class="language-plaintext highlighter-rouge">/fr/p/xxxxxxx/</code> のように、先頭に <code class="language-plaintext highlighter-rouge">/fr</code> という言語プレフィックスが付いたものになります。
各言語用の <code class="language-plaintext highlighter-rouge">.md</code> ファイルは次のようなファイル名で作成するのですが、</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">hello.md</code>（デフォルト言語のページ）</li>
  <li><code class="language-plaintext highlighter-rouge">hello.en.md</code>（英語のページ）</li>
  <li><code class="language-plaintext highlighter-rouge">hello.fr.md</code>（フランス語のページ）</li>
</ul>

<p>このとき、フロントマターの <code class="language-plaintext highlighter-rouge">url</code> プロパティには <code class="language-plaintext highlighter-rouge">en</code> や <code class="language-plaintext highlighter-rouge">fr</code> やなどの言語プレフィックスを付ける必要はありません。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">p/abc1234/"</span>  <span class="s">← 全ページ共通でこの指定で OK</span>
</code></pre></div></div>

<p>多言語対応ページをビルドしたときに、自動的に言語プレフィックスを考慮したパスに HTML ファイルを出力してくれます（<a href="https://gohugo.io/content-management/urls/#set-url-in-front-matter">Hugo 0.55 以降</a>）。</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/p/abc1234/index.html</code></li>
  <li><code class="language-plaintext highlighter-rouge">/en/p/abc1234/index.html</code></li>
  <li><code class="language-plaintext highlighter-rouge">/fr/p/abc1234/index.html</code></li>
</ul>

<p>ただし、フロントマターの <code class="language-plaintext highlighter-rouge">url</code> プロパティの値をスラッシュ (<code class="language-plaintext highlighter-rouge">/</code>) で始めると、こういった言語プレフィックスの考慮はなくなり、指定したままのパスで HTML 出力されることになるので注意してください。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/p/abc1234/"</span>  <span class="s">← スラッシュで始めるように変えた</span>
</code></pre></div></div>

<p>上記のように記述すると、必ず次のようなパスで HTML 出力されることになります。</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/p/abc1234/index.html</code></li>
</ul>

<p>通常は、<strong><code class="language-plaintext highlighter-rouge">url</code> の値はスラッシュで始めないようにする</strong> のがよさそうです。</p>

<h2 id="ランダム-id-の生成方法">ランダム ID の生成方法</h2>

<p>本記事の例では、ページの URL に 7 桁の ID を割り当てていますが、この ID は下記のサイトでランダム文字列として生成することができます。</p>

<ul>
  <li><a href="https://maku.blog/p/3nx9is3">ランダムID生成 - まくろぐ</a></li>
</ul>

<p>毎回手動で ID を生成するのが面倒であれば、エディタのマクロなどで自動的に Markdown ファイルのフロントマターを挿入できるようにしておくと便利です。
下記にフロントマターの自動挿入方法をいくつか紹介します。</p>

<h3 id="応用archetypes-でフロントマターを自動挿入">（応用）Archetypes でフロントマターを自動挿入</h3>

<p>Hugo プロジェクトのルートに、<code class="language-plaintext highlighter-rouge">archetypes/default.md</code> というファイルを作成しておくと、<code class="language-plaintext highlighter-rouge">hugo new</code> コマンドで記事ページを生成したときに、その内容が雛形として使用されます（Hugo の Archetypes という機能です）。</p>

<p>次のサンプルでは、自動でフロントマターにランダムな <code class="language-plaintext highlighter-rouge">url</code> プロパティを挿入するようにしています。</p>

<h4 id="archetypesdefaultmd">archetypes/default.md</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
<span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">p/{{</span><span class="nv"> </span><span class="s">template</span><span class="nv"> </span><span class="s">"permanentId" }}/"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{</span><span class="nv"> </span><span class="s">now.Format</span><span class="nv"> </span><span class="s">"2006-01-02" }}"</span>
<span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">"</span><span class="pi">]</span>
<span class="nn">---</span>

<span class="pi">{{</span> <span class="nv">define "permanentId" -</span><span class="pi">}}</span>
  <span class="pi">{{</span><span class="nv">- $scratch</span> <span class="pi">:</span><span class="nv">= newScratch -</span><span class="pi">}}</span>
  <span class="pi">{{</span><span class="nv">- range (seq 7) -</span><span class="pi">}}</span>
    <span class="pi">{{</span><span class="nv">- $nextCh</span> <span class="pi">:</span><span class="nv">= slice "2" "3" "4" "5" "6" "7" "8" "9" "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z" | shuffle | first 1 -</span><span class="pi">}}</span>
    <span class="pi">{{</span><span class="nv">- $scratch.Add "id" $nextCh -</span><span class="pi">}}</span>
  <span class="pi">{{</span><span class="nv">- end -</span><span class="pi">}}</span>
  <span class="pi">{{</span><span class="nv">- delimit ($scratch.Get "id") "" -</span><span class="pi">}}</span>
<span class="pi">{{</span><span class="nv">- end -</span><span class="pi">}}</span>
</code></pre></div></div>

<p>ここでは、<code class="language-plaintext highlighter-rouge">permanentId</code> という内部テンプレートを定義して、<code class="language-plaintext highlighter-rouge">p/xpya1z3</code> という感じのランダム文字列を生成しています（もうちょっと綺麗に生成する方法があればいいんですが）。</p>

<p>Hugo プロジェクトのルートで次のようにコマンドを実行すれば、新しい記事ファイルが生成され、その先頭にフロントマターが挿入されます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ hugo new sample.md
</code></pre></div></div>

<p>例えば、次のような感じのファイルが生成されます（デフォルトで <code class="language-plaintext highlighter-rouge">content</code> ディレクトリ以下に生成されます）。</p>

<h4 id="contentsamplemd">content/sample.md</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
<span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">p/es3qakw/"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2020-03-16"</span>
<span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">"</span><span class="pi">]</span>
<span class="nn">---</span>
</code></pre></div></div>

<h3 id="応用vim-エディタでフロントマターを自動挿入">（応用）Vim エディタでフロントマターを自動挿入</h3>

<p>Vim などのエディタを使っている人は、エディタのマクロ機能でフロントマターを挿入できるようにしておくと便利です。
下記の Vim スクリプトは、現在編集中のファイルの先頭に、<code class="language-plaintext highlighter-rouge">date</code> プロパティや <code class="language-plaintext highlighter-rouge">url</code> プロパティを挿入する <code class="language-plaintext highlighter-rouge">Hugo</code> コマンドを定義します。</p>

<h4 id="vimrc_hugovim">~/vimrc_hugo.vim</h4>

<div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">" 0〜n-1 の範囲のランダム整数を生成する</span>
<span class="k">function</span><span class="p">!</span> <span class="nv">s:RandNum</span><span class="p">(</span><span class="k">n</span><span class="p">)</span>
  <span class="k">return</span> <span class="nb">reltime</span><span class="p">()[</span><span class="m">1</span><span class="p">]</span> % <span class="p">(</span><span class="nv">a:n</span><span class="p">)</span>
<span class="k">endfunction</span>

<span class="c">" 指定した長さのランダム文字列を生成する</span>
<span class="k">function</span><span class="p">!</span> <span class="nv">s:RandStr</span><span class="p">(</span>length<span class="p">)</span>
  <span class="k">let</span> chars <span class="p">=</span> <span class="s1">'23456789abcdefghijkmnopqrstuvwxzy'</span>
  <span class="k">let</span> <span class="k">n</span> <span class="p">=</span> <span class="nb">len</span><span class="p">(</span>chars<span class="p">)</span>
  <span class="k">let</span> result <span class="p">=</span> <span class="s1">''</span>
  <span class="k">for</span> <span class="k">i</span> <span class="k">in</span> <span class="nb">range</span><span class="p">(</span><span class="nv">a:length</span><span class="p">)</span>
    <span class="k">let</span> result <span class="p">.=</span> chars<span class="p">[</span><span class="nv">s:RandNum</span><span class="p">(</span><span class="k">n</span><span class="p">)]</span>
  <span class="k">endfor</span>
  <span class="k">return</span> result
<span class="k">endfunction</span>

<span class="c">" 先頭行に Hugo 用のフロントマターを挿入する</span>
<span class="k">function</span><span class="p">!</span> <span class="nv">s:InsertHugoFrontMatter</span><span class="p">()</span>
  <span class="k">let</span> <span class="nb">title</span> <span class="p">=</span> <span class="s2">"title: \"\"\n"</span>
  <span class="k">let</span> url <span class="p">=</span> <span class="s2">"url: \"p/"</span> <span class="p">.</span> <span class="nv">s:RandStr</span><span class="p">(</span><span class="m">7</span><span class="p">)</span> <span class="p">.</span> <span class="s2">"/\"\n"</span>
  <span class="k">let</span> date <span class="p">=</span> <span class="s2">"date: \""</span> <span class="p">.</span> <span class="nb">strftime</span><span class="p">(</span><span class="s2">"%Y-%m-%d"</span><span class="p">)</span> <span class="p">.</span> <span class="s2">"\"\n"</span>
  <span class="k">let</span> <span class="k">tags</span> <span class="p">=</span> <span class="s2">"tags: [\"\"]\n"</span>
  <span class="nb">execute</span> <span class="s2">":normal gg"</span>
  <span class="nb">execute</span> <span class="s2">":normal I"</span> <span class="p">.</span> <span class="s2">"---\n"</span> <span class="p">.</span> <span class="nb">title</span> <span class="p">.</span> url <span class="p">.</span> date <span class="p">.</span> <span class="k">tags</span> <span class="p">.</span> <span class="s2">"---\n\n"</span>
  <span class="nb">execute</span> <span class="s2">":normal gg"</span>
<span class="k">endfunction</span>

<span class="c">" Hugo コマンドを定義する</span>
command<span class="p">!</span> Hugo <span class="k">call</span> <span class="nv">s:InsertHugoFrontMatter</span><span class="p">()</span>
</code></pre></div></div>

<p>このスクリプトファイルを <code class="language-plaintext highlighter-rouge">~/.vimrc</code> などから下記のように読みこんでおくか、直接コードを <code class="language-plaintext highlighter-rouge">~/.vimrc</code> にコピペしておけば、Vim エディタ上で <code class="language-plaintext highlighter-rouge">Hugo</code> コマンドを実行できるようになります。</p>

<h4 id="vimrcwindows-の場合は-home_vimrc">~/.vimrc（Windows の場合は %HOME%/_vimrc）</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source &lt;sfile&gt;:p:h/vimrc_hugo.vim
</code></pre></div></div>

<p>ファイル名の前のあやしい記号群は、同じディレクトリにある別のファイルを読み込むためのおまじないです。
フルパスで指定しておいても OK です。</p>

<p>Vim エディタから下記のようにコマンドを実行すると、</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:Hugo
</code></pre></div></div>

<p>現在編集中のファイルに、次のようなフロントマターが挿入されます。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
<span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">p/4nzaju5/"</span>
<span class="na">date</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2019-10-20"</span>
<span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">"</span><span class="pi">]</span>
<span class="nn">---</span>
</code></pre></div></div>

<h2 id="応用github-の-issue-や-pullrequest-からショートカット記法でリンクを張る">（応用）GitHub の Issue や PullRequest からショートカット記法でリンクを張る</h2>

<p>GitHub のオートリンク機能を使うと、GitHub リポジトリの Issue や PR の Markdown ドキュメントの中から、簡単な ID 指定で Hugo のページにリンクを張れるようにようになります。</p>

<ul>
  <li>参考: <a href="/p/ias8kt3/">GitHub のオートリンク機能で外部サイトへ ID ベースでリンクする (autolink) - まくまくGitノート</a></li>
</ul>

<p>例えば、<code class="language-plaintext highlighter-rouge">https://blog.example.com/p/1234abc/</code> というアドレスの代わりに、<code class="language-plaintext highlighter-rouge">BLOG-1234abc</code> と記述するだけで済むようになります。
本記事で紹介したように Hugo のページを ID ベースで管理する場合は、GitHub のオートリンク機能も合わせて利用すると幸せになれるかもしれません。</p>

<h2 id="参考">参考</h2>

<p>出力される HTML ファイルのパスが変更されると、それに付随する画像ファイルとの位置関係が変わって、画像の表示ができなくなってしまうかもしれません。
下記の記事で紹介しているショートコードを使って画像を表示するようにしておくと、このような心配がなくなります。</p>

<ul>
  <li>参考: <a href="page-bundle.html">画像ファイルを Markdown ファイルと同じディレクトリに置く (Page Bundle)</a></li>
</ul>


      </div>

      <!-- Ad (楽天) -->
      
        <div class="xWidget"><!-- Rakuten Widget FROM HERE -->
<script>
  /* レスポンシブデザインもどき */
  var SIDEBAR_HIDE_THRESHOLD = 800;
  var SIDEBAR_WIDTH = 250;
  var OFFSET = 10;
  var w = window.innerWidth;
  if (w >= SIDEBAR_HIDE_THRESHOLD) {
    w -= SIDEBAR_WIDTH;
  }
  w -= OFFSET;

  if (w >= 728) {
    rakuten_size="728x200";
  } else if (w >= 600) {
    rakuten_size="600x200";
  } else if (w >= 468) {
    rakuten_size="468x160";
  } else if (w >= 336) {
    rakuten_size="336x280";
  } else if (w >= 300) {
    rakuten_size="300x250";
  } else if (w >= 250) {
    rakuten_size="250x250";
  } else {
    rakuten_size="200x350";
  }

  rakuten_design="slide";
  rakuten_affiliateId="1239b074.74af6526.1239b075.bc72ef6e";
  rakuten_items="ctsmatch";
  rakuten_genreId=0;
  rakuten_target="_blank";
  rakuten_theme="gray";
  rakuten_border="off";
  rakuten_auto_mode="on";
  rakuten_genre_title="off";
  rakuten_recommend="on";
  rakuten_txtColor="333333";
  rakuten_moverColor="30C030";
  rakuten_bgColor="FFFFFF";
  rakuten_captionColor="333333";
</script>
<script src="https://xml.affiliate.rakuten.co.jp/widget/js/rakuten_widget.js"></script>
<!-- Rakuten Widget TO HERE -->

</div>
      

      <!-- SNS ボタン（下） -->
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">




<ul class="xSnsButtons">
  <!-- Twitter -->
  <li class="xSnsButtons_twitter">
    <a rel="nofollow" href="https://twitter.com/share?text=まくまくHugoノート： サイト構造を変えてもページの URL が変わらないようにする&url=https://maku77.github.io/p/u9r9p7n/"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'tweet_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-twitter"></i><span class="xSnsButtons_label">ツイート</span>
    </a>
  </li>

  <!-- Facebook -->
  <li class="xSnsButtons_facebook">
    <a rel="nofollow" href="https://www.facebook.com/share.php?u=https://maku77.github.io/p/u9r9p7n/"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'facebook_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-facebook-square"></i><span class="xSnsButtons_label">シェア</span>
    </a>
  </li>

  <!-- Pocket -->
  <li class="xSnsButtons_pocket">
    <a rel="nofollow" href="https://getpocket.com/edit?url=https://maku77.github.io/p/u9r9p7n/"
        onclick="window.open(encodeURI(decodeURI(this.href)), 'pocket_window',
        'width=600, height=470, toolbar=no, scrollbars=yes, resizable=yes'); return false;">
      <i class="fa fa-get-pocket"></i><span class="xSnsButtons_label">Pocket</span>
    </a>
  </li>
</ul>



      
      <div class="xArticle_up">
        <a href="/hugo/"><span class="xArticle_up_label">まくまくHugoノート</span><br>へ戻る</a>
      </div>

    </div>

    <div id="xContainer_sidebar"><style>
.local-logo {
  position: relative;
  border: none;
  background: none;
}
.local-logo img {
  width: 100%;
  vertical-align: bottom;
  border: none;
  border-radius: 15px;
}
.local-logo figcaption {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  text-align: center;
  font-size: 12pt;
  color: white;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 15px 15px 0 0;
}
</style>

<div id="xContainer_sidebar_notFixed">
  <div data-sticky><nav class="xNav">
  <div class="xNav_header">カテゴリ一覧</div>
  <ul>
        <li><a href="/memo/">いろいろ</a>
        <li><a href="/android/">Android</a>
        <li><a href="/ansible/">Ansible</a>
        <li><a href="/blender/">Blender</a>
        <li><a href="/cpp/">C/C++</a>
        <li><a href="/docker/">Docker</a>
        <li><a href="/git/">Git</a>
        <li><a href="/go/">Go言語</a>
        <li><a href="/gradle/">Gradle</a>
        <li><a href="/web/">HTML/CSS</a>
        <li><a href="/hugo/">Hugo</a>
        <li><a href="/java/">Java</a>
        <li><a href="/js/">JavaScript</a>
        <li><a href="/kotlin/">Kotlin</a>
        <li><a href="/linux/">Linux/Shell</a>
        <li><a href="/mac/">Mac</a>
        <li><a href="/middleman/">Middleman</a>
        <li><a href="/mt/">Meta Trader</a>
        <li><a href="/nodejs/">Node.js</a>
        <li><a href="/octave/">Octave</a>
        <li><a href="/p4/">Perforce</a>
        <li><a href="/perl/">Perl</a>
        <li><a href="/php/">PHP</a>
        <li><a href="/python/">Python</a>
        <li><a href="/r/">R</a>
        <li><a href="/ruby/">Ruby</a>
        <li><a href="/rust/">Rust</a>
        <li><a href="/sass/">Sass</a>
        <li><a href="/sed/">sed/awk</a>
        <li><a href="/sql/">SQL</a>
        <li><a href="/tradestation/">トレードステーション</a>
        <li><a href="/vagrant/">Vagrant</a>
        <li><a href="/vba/">VBA</a>
        <li><a href="/vim/">Vim</a>
        <li><a href="/windows/">Windows</a>
  </ul>
</nav>

</div>

  
    <div data-sticky class="xContainer_sidebar_ad">
      <div style="text-align: right">
  <div id="codoc-entry-4gYwTntzzw" class="codoc-entries" data-without-body="1" data-support-button-text="（っ&#039;-&#039;)╮シュッ=͟͟͞͞ 💵" data-show-like="0" data-show-about-codoc="0" data-show-powered-by="0" data-support-message="まくに投げ銭できます。"></div>
</div>

    </div>
    <div data-sticky class="xContainer_sidebar_ad">
      
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- まくノート_サイド矩形 (200x200) -->
<ins class="adsbygoogle"
     style="display:inline-block;width:200px;height:200px"
     data-ad-client="ca-pub-6317852277883092"
     data-ad-slot="4284289561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


    </div>
    <div data-sticky class="xContainer_sidebar_ad">
      <!-- /22026661446/maku77-sidebar -->
<div id='div-gpt-ad-1590069504630-0' style='width: 200px; height: 200px;'>
  <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1590069504630-0'); });
  </script>
</div>

    </div>
  

  <div data-sticky class="xContainer_sidebar_ad">
    <a href="/">
      <figure class="local-logo">
        <img src="/assets/img/kuma_inu.jpg">
        <figcaption>天才まくまくノート</figcaption>
      </figure>
    </a>
  </div>

  <div data-sticky><form action="https://www.google.co.jp/cse" id="cse-search-box">
  <div class="xSearchBar">
    <input type="hidden" name="cx" value="partner-pub-6317852277883092:5930376365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input class="xSearchBar_text" type="search" name="q" placeholder="ノートを検索できます…" size="55" results="5" autocomplete="off" /><input class="xSearchBar_button" type="submit" name="sa" value="&#128269; 検索 " />
  </div>
</form>

</div>
</div>
<div id="xContainer_sidebar_fixed"></div>

</div>
  </div>

  <!-- <div class="xPageFooter"> -->
    

<div class="xBreadCrumbContainer">
  <div class="xBreadCrumb"><a href="/">&#x1F3E0;HOME</a> &gt; <a href="/hugo/">Hugo</a></div>
  <div class="xPageDate">2022-07-27</div>
</div>

  <!-- </div> -->
</div>

  <!-- MathJax -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script type="text/javascript" src="/assets/js/fix-sidebar.js"></script>

<!-- maku-common.js -->
<script>
$(function() {
  var $content = $('.xContent');
  // 外部リンクを必ず新しいタブで開く
  $content.find('a[href^=http]').attr('target', '_blank').attr('rel', 'noopener');
  // 外部リンクにクラス属性を付加する
  $content.find('a[href^=http]:not(:has(img))').addClass("xExternalLinkIcon");
});
</script>


</body>
</html>
