<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Vim on 天才まくまくノート</title><link>https://maku77.github.io/vim/</link><description>Recent content in Vim on 天才まくまくノート</description><generator>Hugo</generator><language>ja-jp</language><lastBuildDate>Mon, 24 Nov 2025 00:00:00 +0900</lastBuildDate><atom:link href="https://maku77.github.io/vim/index.xml" rel="self" type="application/rss+xml"/><item><title>Neovim設定例: ヤンク時に選択範囲をハイライト表示する (TextYankPost)</title><link>https://maku77.github.io/p/9qyei4z/</link><pubDate>Sat, 01 Nov 2025 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/9qyei4z/</guid><description>&lt;p>Vim/Neovim の &lt;strong>&lt;code>TextYankPost&lt;/code>&lt;/strong> イベントは、「テキストをヤンク（コピー、カットなども含む）した直後」に自動的に呼ばれるイベントです。
例えば y（ヤンク）や d（削除）、c（変更）などレジスタにテキストが書き込まれる操作の後に自動で発火します。​&lt;/p>
&lt;p>下記の AutoCmd 設定例では、ヤンク操作の直後に選択範囲を一時的にハイライト表示するようにしています。
これにより、どの部分がヤンクされたかを視覚的に確認できるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.config/nvim/init.lua&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 同じグループのオートコマンドが定義されている場合はクリアする&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">grp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_create_augroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;MyAutocmds&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">clear&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- ヤンク時に選択範囲をハイライト表示する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_create_autocmd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;TextYankPost&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">grp&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">desc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Highlight on yank&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">callback&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.highlight&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">on_yank&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="n">timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">300&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Neovim の設定ファイル (init.lua) を GitHub や Dropbox で管理する</title><link>https://maku77.github.io/p/pzakg36/</link><pubDate>Wed, 29 Oct 2025 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/pzakg36/</guid><description>&lt;p>Neovim の設定は &lt;code>~/.config/nvim/init.lua&lt;/code> ファイルに記述しますが、複数の PC で同じ設定を使いたい場合は、GitHub や Dropbox などのクラウドストレージを利用して設定ファイルを共有すると便利です。
ここでは、下記の 2 つの方法を紹介します。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>シンボリックリンク／ジャンクションを使う方法&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Neovim のランタイムパスを追加する方法&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>共有する設定ファイルは、下記のようなディレクトリ構造で Git 管理されているとします。&lt;/p>
&lt;pre tabindex="0">&lt;code>~/gitwork/nvim-config/
 ├── .git/
 ├── init.lua
 └── lua/
 ├── options.lua
 ├── keymaps.lua
 └── ...
&lt;/code>&lt;/pre>&lt;h2 id="シンボリックリンクジャンクションを使う方法">シンボリックリンク／ジャンクションを使う方法&lt;/h2>
&lt;p>特に問題がなければこの方法を使うのが簡単です。
Linux や macOS ではシンボリックリンク、Windows ではジャンクションの機能を使って、Neovim の設定ディレクトリ (&lt;code>~/.config/nvim&lt;/code>) の実体を、GitHub や Dropbox で管理されているディレクトリに結び付けるだけです。
Neovim の設定ディレクトリのパスは、OS ごとに異なることに注意してください。&lt;/p>
&lt;ul>
&lt;li>Linux/macOS: &lt;strong>&lt;code>~/.config/nvim&lt;/code>&lt;/strong>&lt;/li>
&lt;li>Windows: &lt;strong>&lt;code>%LOCALAPPDATA%\nvim&lt;/code>&lt;/strong> （通常は &lt;code>C:\Users\&amp;lt;ユーザー名&amp;gt;\AppData\Local\nvim&lt;/code>）&lt;/li>
&lt;/ul>
&lt;p>まず、Neovim の設定ディレクトリ (&lt;code>~/.config/nvim&lt;/code>) の中身を Git 管理された共有ディレクトリに移動して、元の &lt;code>~/.config/nvim&lt;/code> ディレクトリは削除しておきます。
その後、次のようにシンボリックリンク／ジャンクションとして &lt;code>~/.config/nvim&lt;/code> を作り直します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Linux/macOS の場合 ─ シンボリックリンクの作成&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">ln -s ~/gitwork/nvim-config ~/.config/nvim&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Windows (PowerShell) の場合 ─ ジャンクションの作成&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">New-Item -ItemType Junction -Path $env:LOCALAPPDATA\nvim -Target $env:USERPROFILE\gitwork\nvim-config&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>これで、&lt;code>~/.config/nvim/init.lua&lt;/code> にアクセスすると、実際には Git で管理されている &lt;code>~/gitwork/nvim-config/init.lua&lt;/code> ファイルが読み込まれるようになります。
ちなみに、Windows のディレクトリ・ジャンクションは管理者権限がなくても作成できます。&lt;/p></description></item><item><title>Neovim を manpager として使用する（man ページを Neovim で表示する）</title><link>https://maku77.github.io/p/hfwenni/</link><pubDate>Tue, 23 Sep 2025 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/hfwenni/</guid><description>&lt;h2 id="neovim-で-man-ページで開く">Neovim で man ページで開く&lt;/h2>
&lt;p>Neovim は標準でファイルタイププラグインとして &lt;strong>&lt;code>:Man&lt;/code>&lt;/strong> を提供しており、man ページを Neovim 内で表示することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim 上で man ページを開く&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">Man&lt;/span> {&lt;span class="nx">キーワード&lt;/span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>次のように &lt;strong>&lt;code>MANPAGER&lt;/code>&lt;/strong> 環境変数を設定しておくと、ターミナルから &lt;strong>&lt;code>man&lt;/code>&lt;/strong> コマンドを実行したときに、Neovim で開いてくれるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.zshrc など&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-zsh" data-lang="zsh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">MANPAGER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;nvim +Man!&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="man-の操作方法">:Man の操作方法&lt;/h2>
&lt;p>man ページを Neovim で開いた後の操作方法は、less ベースの操作方法と同様ですが、&lt;code>:Man&lt;/code> ならではの操作方法もあります。
下記あたりを覚えておくと便利です。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>gO&lt;/code>&lt;/strong> &amp;hellip; 目次を開く（目次から &lt;code>Enter&lt;/code> でジャンプできます）&lt;/li>
&lt;li>&lt;strong>&lt;code>Shift-K&lt;/code>&lt;/strong> / &lt;strong>&lt;code>Ctrl-]&lt;/code>&lt;/strong> &amp;hellip; カーソル下のキーワードの man ページへジャンプ&lt;/li>
&lt;li>&lt;strong>&lt;code>Ctrl-O&lt;/code>&lt;/strong> &amp;hellip; ジャンプ前の位置に戻る&lt;/li>
&lt;/ul></description></item><item><title>Vim のインサートモードを抜けるときに自動で IME をオフにする (macOS, Karabiner-Elements)</title><link>https://maku77.github.io/p/bbkb63f/</link><pubDate>Tue, 06 May 2025 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/bbkb63f/</guid><description>&lt;h2 id="何をするか">何をするか？&lt;/h2>
&lt;p>&lt;a href="https://karabiner-elements.pqrs.org/">Karabiner-Elements&lt;/a> は、macOS 用のキーボードカスタマイズツールです。
ここでは、Vim のインサートモードを抜けるときに IME を自動でオフにするための、Karabiner-Elements の設定を紹介します。&lt;/p>
&lt;h2 id="karabiner-elements-の設定">Karabiner-Elements の設定&lt;/h2>
&lt;h3 id="設定方法">設定方法&lt;/h3>
&lt;p>Karabiner-Elements のメニューから、&lt;/p>
&lt;ul>
&lt;li>&lt;code>Complex Modifications&lt;/code> ⇨ &lt;code>Add your own rules&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>を選択し、下記の JSON を貼り付ければ設定完了です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">vim-auto-ime-off.json&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Vim - Auto IME Off&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;manipulators&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;from&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;escape&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;to&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;japanese_eisuu&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;escape&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;basic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;from&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;open_bracket&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;modifiers&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;mandatory&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;left_control&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;to&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;japanese_eisuu&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;escape&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;basic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;from&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;caps_lock&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;modifiers&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;optional&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;any&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;to&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;set_variable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;caps_lock_pressed&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;caps_lock&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lazy&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;to_after_key_up&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;set_variable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;caps_lock_pressed&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;basic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;conditions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;caps_lock_pressed&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;variable_if&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;from&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;open_bracket&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;to&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;japanese_eisuu&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;key_code&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;escape&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;basic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="解説">解説&lt;/h3>
&lt;p>この設定では、下記のようなインサートモードを抜けるキー入力があった場合に、すべて &lt;strong>&lt;code>英数&lt;/code> → &lt;code>ESC&lt;/code>&lt;/strong> と入力したかのように振る舞うようにしています。&lt;/p></description></item><item><title>Neovim カスタマイズのために Lua 言語をざっと理解する</title><link>https://maku77.github.io/p/d3exkpu/</link><pubDate>Wed, 05 Mar 2025 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/d3exkpu/</guid><description>&lt;p>Neovim を Lua スクリプトでカスタマイズできるようになるために、Lua 言語をざっと理解しておきます。&lt;/p>
&lt;h2 id="lua-スクリプトの実行方法">Lua スクリプトの実行方法&lt;/h2>
&lt;h3 id="コマンドモードから実行する-lua">コマンドモードから実行する (:lua)&lt;/h3>
&lt;p>ワンライナー程度であれば、Neovim のコマンドモードで &lt;strong>&lt;code>:lua&lt;/code>&lt;/strong> を使って直接 Lua コードを実行できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">コマンドーモードから Lua スクリプトを実行&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">lua&lt;/span> &lt;span class="nx">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>Neovim の設定を変更するときにも使えます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">コマンドーモードからオプションを設定&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">lua&lt;/span> &lt;span class="nx">vim&lt;/span>.&lt;span class="nx">opt&lt;/span>.&lt;span class="nx">number&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="コマンドラインから実行する-nvim--l">コマンドラインから実行する (nvim -l)&lt;/h3>
&lt;p>Neovim 自体が Lua の実行環境を備えているので、次のように &lt;strong>&lt;code>nvim -l&lt;/code>&lt;/strong> コマンドで Lua スクリプトを実行できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">hello.lua&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Hello, Lua!&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Lua スクリプトファイルを実行&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> nvim -l hello.lua
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="go">Hello, Lua!
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="編集中のスクリプトを実行する-luafile-">編集中のスクリプトを実行する (:luafile %)&lt;/h3>
&lt;p>Neovim で Lua スクリプトを編集しているときに、そのバッファの内容を実行する場合は次のようにします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">カレントバッファの内容を実行&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">luafile&lt;/span> %&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>Neovim の設定ファイル (&lt;code>init.lua&lt;/code>) で以下のような設定をしておけば、&lt;code>.lua&lt;/code> ファイルを編集中に（ノーマルモードで） &lt;strong>&lt;code>F5&lt;/code>&lt;/strong> キーを押すだけで実行できるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.config/nvim/init.lua&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--- .lua ファイルを編集中に &amp;lt;F5&amp;gt; キーで実行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_create_autocmd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;FileType&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pattern&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;lua&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">callback&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.keymap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;n&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;F5&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;cmd&amp;gt;luafile %&amp;lt;CR&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">buffer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="vs-code-で実行する">VS Code で実行する&lt;/h3>
&lt;p>Visual Studio Code で Lua スクリプトを編集する場合は、&lt;a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner">Code Runner 拡張&lt;/a> をインストールしておくと便利です。
Code Runner 拡張を使うと、各種言語のコードを編集中にショートカットキー (&lt;strong>&lt;code>Ctrl+Alt+N&lt;/code>&lt;/strong>) でそのコードを実行できるようになります（あるいはコマンドパレットから &lt;strong>Run Code&lt;/strong> を実行）。
今回は Lua の実行環境として &lt;code>nvim -l&lt;/code> コマンドを使うので、VS Code の設定ファイルで以下のように設定しておきます。&lt;/p></description></item><item><title>Neovim 用のプラグインマネージャー lazy.nvim をインストールする</title><link>https://maku77.github.io/p/cfc9tpn/</link><pubDate>Sun, 02 Mar 2025 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/cfc9tpn/</guid><description>&lt;p>&lt;a href="https://lazy.folke.io/">lazy.nvim&lt;/a> は、Neovim 用のプラグインマネージャーです。
名前の通り、各種プラグインを必要に応じて遅延ロードしてくれるため、多くのプラグインを導入しても Neovim の起動があまり遅くならないという特徴があります。&lt;/p>
&lt;h2 id="lazynvim-のインストール">lazy.nvim のインストール&lt;/h2>
&lt;p>lazy.nvim は &lt;a href="https://lazy.folke.io/">公式サイトの Installation&lt;/a> に記載されている手順に従ってインストールします。
まずは、Neovim の設定ファイルに以下のような行を追加します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.config/nvim/init.lua&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;config.lazy&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>この &lt;code>require&lt;/code> により、&lt;strong>&lt;code>~/.config/nvim/lua/config/lazy.lua&lt;/code>&lt;/strong> というファイルが読み込まれるようになるので、lazy.nvim 関連の設定はこのファイルに記述していきます。
これは、公式サイトで &lt;strong>Structured Setup&lt;/strong> として紹介されている方法です。&lt;/p>
&lt;p>下記の設定も公式サイトに記述されている通りの初期設定ですが、このファイルを作成して Neovim を再起動すれば、lazy.nvim が自動的にインストールされます（内部で &lt;code>git&lt;/code> コマンドを使ってダウンロードしています）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.config/nvim/lua/config/lazy.lua&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Bootstrap lazy.nvim&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">lazypath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">stdpath&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s2">&amp;#34;/lazy/lazy.nvim&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">vim.uv&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">vim.loop&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">fs_stat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lazypath&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">lazyrepo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/folke/lazy.nvim.git&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="s2">&amp;#34;git&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;clone&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;--filter=blob:none&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;--branch=stable&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lazyrepo&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lazypath&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">vim.v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">shell_error&lt;/span> &lt;span class="o">~=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_echo&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;Failed to clone lazy.nvim:&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;ErrorMsg&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="n">out&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;WarningMsg&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s2">Press any key to exit...&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">getchar&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os.exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">rtp&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">prepend&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lazypath&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Make sure to setup `mapleader` and `maplocalleader` before&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- loading lazy.nvim so that mappings are correct.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- This is also a good place to setup other settings (vim.opt)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">mapleader&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.g&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">maplocalleader&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\\&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Setup lazy.nvim&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;lazy&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">spec&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- import your plugins&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span> &lt;span class="n">import&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;plugins&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- Configure any other settings here. See the documentation for more details.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- colorscheme that will be used when installing plugins.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">install&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">colorscheme&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;habamax&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">-- automatically check for plugin updates&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">checker&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">enabled&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>これで、lazy.nvim を使用する準備が整いました。
各プラグインの設定は、&lt;code>~/.config/nvim/lua/plugins&lt;/code> ディレクトリに &lt;code>.lua&lt;/code> ファイルを作成して記述していきます。
よって、lazy.nvim まわりのファイル構成は以下のようになります。&lt;/p></description></item><item><title>Vim/Neovim で OS のクリップボードを連動させる (clipboard, unnamed, unnamedplus)</title><link>https://maku77.github.io/p/nnhefs3/</link><pubDate>Tue, 11 Jun 2024 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/nnhefs3/</guid><description>&lt;p>Vim/Neovim のデフォルト設定では、&lt;strong>&lt;code>y&lt;/code>&lt;/strong> でテキストをヤンク（コピー）したときに、OS のクリップボードにテキストの内容がコピーされません。
別のアプリ上で &lt;code>Ctrl+C&lt;/code> でコピーした内容も、Vim の &lt;strong>&lt;code>p&lt;/code>&lt;/strong> でペーストすることができません。
これでは不便なので、多くの場合は次のように OS のクリップボードと連動させます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) や Neovim (init.vim) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; OS のクリップボードと連動させる&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">clipboard&lt;/span>&lt;span class="p">+=&lt;/span>&lt;span class="nx">unnamed&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">unnamedplus&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- OS のクリップボードと連動させる&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">clipboard&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="s2">&amp;#34;unnamed&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;unnamedplus&amp;#34;&lt;/span> &lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>細かい説明をすると、&lt;code>unnamed&lt;/code> というフラグは &lt;strong>&lt;code>*&lt;/code>&lt;/strong> レジスターとの連動、&lt;code>unnamedplus&lt;/code> というフラグは &lt;strong>&lt;code>+&lt;/code>&lt;/strong> レジスターとの連動を意味するのですが、通常は上記のように両方とも設定しておけば問題ありません。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>unnamed（&lt;code>*&lt;/code> レジスター）&lt;/strong> &amp;hellip; 主に Linux OS においてマウスで選択したテキスト（選択クリップボード）の内容を、Vim の &lt;code>p&lt;/code> で貼り付けられるようにします。&lt;/li>
&lt;li>&lt;strong>unnamedplus（&lt;code>+&lt;/code> レジスター）&lt;/strong> &amp;hellip; 一般的な OS における &lt;code>Ctrl+C&lt;/code> 操作でコピーしたテキスト（通常のクリップボード）の内容を、Vim の &lt;code>p&lt;/code> で貼り付けられるようにします。また、Vim 側で &lt;code>y&lt;/code> でヤンクした内容が、OS 側のクリップボードにコピーされるようになります。&lt;/li>
&lt;/ul></description></item><item><title>Vim/Neovim の設定ファイルから別の設定ファイルを読み込む (source, dofile)</title><link>https://maku77.github.io/p/dnso7ds/</link><pubDate>Tue, 11 Jun 2024 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/dnso7ds/</guid><description>&lt;p>複数の環境で Vim や Neovim を使用しているときは、設定ファイルを GitHub や Dropbox などの共有サービスで共有すると便利です。
共有した設定ファイルは、Vim の &lt;strong>&lt;code>:source&lt;/code>&lt;/strong> や Neovim (Lua) の &lt;strong>&lt;code>:dofile()&lt;/code>&lt;/strong> などで読み込むことができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (~/.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Linux/macOS の例&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">source&lt;/span> $&lt;span class="nx">HOME&lt;/span>&lt;span class="sr">/Dropbox/&lt;/span>&lt;span class="nx">share&lt;/span>&lt;span class="sr">/config/&lt;/span>&lt;span class="nx">vim&lt;/span>/&lt;span class="nx">vimrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Windows の例&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">source&lt;/span> &lt;span class="nx">D&lt;/span>:&lt;span class="sr">/Dropbox/&lt;/span>&lt;span class="nx">share&lt;/span>&lt;span class="sr">/config/&lt;/span>&lt;span class="nx">vim&lt;/span>/&lt;span class="nx">vimrc&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (~/.config/nvim/init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Linux/macOS の例&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">home&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os.getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;HOME&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dofile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s2">&amp;#34;/Dropbox/share/config/nvim/init.lua&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Windows の例&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">dofile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;D:/Dropbox/share/config/nvim/init.lua&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim/Neovim でウィンドウ（タブ）移動時にカレントディレクトリも自動で移動する (autochdir)</title><link>https://maku77.github.io/p/dpccbv7/</link><pubDate>Fri, 29 May 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/dpccbv7/</guid><description>&lt;h2 id="カレントディレクトリとは">カレントディレクトリとは&lt;/h2>
&lt;p>Vim のカレントディレクトリは、Vim で最初に開いたファイルがあるディレクトリに設定されます。
カレントディレクトリは、例えば下記のようなコマンドを実行したときに、起点となるディレクトリとして参照されます。&lt;/p>
&lt;ul>
&lt;li>&lt;code>:vim pattern **/*.txt&lt;/code> などで複数ファイルを grep するとき&lt;/li>
&lt;li>&lt;code>:e sample.txt&lt;/code> でファイルを開くとき&lt;/li>
&lt;li>&lt;code>:cd dirname&lt;/code> でカレントディレクトリを移動するとき&lt;/li>
&lt;li>&lt;code>:terminal&lt;/code> でターミナルを開くとき&lt;/li>
&lt;/ul>
&lt;p>このカレントディレクトリは、&lt;code>:e&lt;/code> や &lt;code>:tabnew&lt;/code> コマンドで別のディレクトリにあるファイルを開いた場合も変化しません。
&lt;code>:vim (:vimgrep)&lt;/code> コマンドでファイルを検索してもなぜかヒットしないというときは、カレントディレクトリが正しくセットされてない可能性があります。
カレントディレクトリは &lt;code>:pwd&lt;/code> で確認することができます。&lt;/p>
&lt;h2 id="カレントディレクトリを変更する">カレントディレクトリを変更する&lt;/h2>
&lt;h3 id="手動で移動する">手動で移動する&lt;/h3>
&lt;p>明示的にカレントディレクトリを設定するには &lt;strong>&lt;code>:cd&lt;/code>&lt;/strong> コマンドを使用します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">編集中のファイルがあるディレクトリへ移動する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">cd&lt;/span> %:&lt;span class="nx">h&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>と実行すると、現在編集中のファイルがあるディレクトリ (&lt;strong>&lt;code>%:h&lt;/code>&lt;/strong>) へ移動することができます。
カレントウィンドウ（カーソルのあるウィンドウ）のみを対象にカレントディレクトリを移動したいときは、&lt;code>:cd&lt;/code> の代わりに &lt;strong>&lt;code>:lcd&lt;/code>&lt;/strong> コマンドを使用します。&lt;/p>
&lt;h3 id="自動で移動する">自動で移動する&lt;/h3>
&lt;p>&lt;strong>&lt;code>autochdir&lt;/code>&lt;/strong> オプションをセットしておくと、新しくウィンドウを開いた時や、タブを切り替えたときなどに、そのファイルがあるディレクトリへ自動で移動してくれるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Change the current working directory automatically&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">autochdir&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim の場合 (~/.config/nvim/init.lua)&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Change the current working directory automatically&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">autochdir&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>現在の設定は &lt;code>:set autochdir?&lt;/code> コマンドで確認できます。&lt;/p>
&lt;p>&lt;a href="../p/4ekh9ba/">&lt;code>autocmd&lt;/code> を設定してディレクトリ移動を自動化する方法&lt;/a> もありますが、&lt;code>autochdir&lt;/code> が使える Vim 環境であればそちらを使った方が簡単です。&lt;/p></description></item><item><title>Vim で &lt;Leader> キーを使ったキーコンビネーションを定義する (mapleader)</title><link>https://maku77.github.io/p/c9kmay4/</link><pubDate>Sat, 04 Apr 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/c9kmay4/</guid><description>&lt;p>Vim の &lt;strong>Leader キー&lt;/strong> は、キーマッピングを定義するときに使用可能なプレフィックスキーです。&lt;/p>
&lt;h2 id="leader-キーとは">Leader キーとは&lt;/h2>
&lt;p>例えば、&lt;code>.vimrc&lt;/code> で次のようなキーマップ設定があったとします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">.vimrc（Leader キーの使用例）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">Leader&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">a&lt;/span> :&lt;span class="nx">echo&lt;/span> &lt;span class="s2">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">Leader&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">b&lt;/span> :&lt;span class="nx">echo&lt;/span> &lt;span class="s2">&amp;#34;World&amp;#34;&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>これは、Leader キーに続けて &lt;code>a&lt;/code> キーや &lt;code>b&lt;/code> キーを入力することで、&lt;code>Hello&lt;/code> や &lt;code>World&lt;/code> と表示するキーコンビネーションを定義しています。
つまり、&lt;strong>Leader キーはキーコンビネーションのためのプレフィックスキー&lt;/strong> です（実際には任意の位置で使えます）。&lt;/p>
&lt;p>Leader キーには、&lt;strong>デフォルトでバックスラッシュ (&lt;code>\&lt;/code>)&lt;/strong> が割り当てられているため、上記の設定を行った場合は、&lt;code>\a&lt;/code> と入力することで &lt;code>Hello&lt;/code> と表示されることになります。
次のように直接バックスラッシュキー (&lt;code>&amp;lt;Bslash&amp;gt;&lt;/code>) を使って定義するのとは何が違うのでしょうか？&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">Bslash&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">a&lt;/span> :&lt;span class="nx">echo&lt;/span> &lt;span class="s2">&amp;#34;Hello&amp;#34;&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">Bslash&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">b&lt;/span> :&lt;span class="nx">echo&lt;/span> &lt;span class="s2">&amp;#34;World&amp;#34;&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>Leader キーを使ったキーマッピングには、次のような利点があります。&lt;/p>
&lt;ul>
&lt;li>Leader キーは単なるプレフィックキーだということを強調できる（特に自分の &lt;code>.vimrc&lt;/code> を公開するとき）&lt;/li>
&lt;li>Leader キーだけを変更したくなったときに、まとめて置き換えられる（Leader キーは任意のキーに設定できます）&lt;/li>
&lt;li>他のユーザーの &lt;code>.vimrc&lt;/code> 設定を使いまわしやすい（自分の好きな Leader キーで使える）&lt;/li>
&lt;li>Plugin の中でキーマッピングを定義するときに Leader キーを使うことで、ユーザーによるキー設定の余地を残す&lt;/li>
&lt;/ul>
&lt;h2 id="leader-キーを設定する-mapleader">Leader キーを設定する (mapleader)&lt;/h2>
&lt;h3 id="vim-の場合">Vim の場合&lt;/h3>
&lt;p>Leader キーを任意のキーに設定するには、次のように &lt;strong>&lt;code>g:mapleader&lt;/code>&lt;/strong> グローバル変数を設定します。
デフォルトではバックスラッシュキーが使用されますが、決して押しやすいキーではないので、スペースキーやカンマを Leader キーとして使用する人が多いようです。&lt;/p></description></item><item><title>Vim のキーマップ例: ショートカットキーでカレントディレクトリを Windows エクスプローラーや Mac の Finder で開く</title><link>https://maku77.github.io/p/tqmr4od/</link><pubDate>Sat, 29 Feb 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/tqmr4od/</guid><description>&lt;p>Vim/Neovim で次の設定を行っておくと、現在編集中のファイルが格納されたディレクトリをショートカットキー（ここでは &lt;code>F12&lt;/code> キー）一発で開くことができます。
Windows の場合は &lt;code>start&lt;/code> コマンドを使って「エクスプローラー」を開き、Mac の場合は &lt;code>open&lt;/code> コマンドを使って「Finder」を開くようにしています。&lt;/p>
&lt;h2 id="neovimlua-スクリプトの場合">Neovim（Lua スクリプト）の場合&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.config/nvim/init.lua&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 編集中ファイルが格納されたディレクトリを開く関数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">function&lt;/span> &lt;span class="nf">open_current_dir&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">if&lt;/span> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;mac&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;open&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">elseif&lt;/span> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;win32&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;win64&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">command&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;start&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Could not open the directory (unsupported OS)&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">local&lt;/span> &lt;span class="n">dir_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">expand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%:p:h&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">command&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="s2">&amp;#34; &amp;#34;&lt;/span> &lt;span class="o">..&lt;/span> &lt;span class="n">dir_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- F12 キーにマップする&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.keymap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;F12&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">open_current_dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">silent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">desc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Open current directory in file manager&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="vimvim-スクリプトの場合">Vim（Vim スクリプト）の場合&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; 編集中ファイルのディレクトリを Explorer や Finder で開く&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;win32&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">||&lt;/span> &lt;span class="nx">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;win64&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">||&lt;/span> &lt;span class="nx">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;win32unix&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F12&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">silent&lt;/span> &lt;span class="p">!&lt;/span> &lt;span class="nx">start&lt;/span> %:&lt;span class="nx">h&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elseif&lt;/span> &lt;span class="nx">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;macunix&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F12&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">silent&lt;/span> &lt;span class="p">!&lt;/span> &lt;span class="nx">open&lt;/span> %:&lt;span class="nx">h&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">endif&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim で 2 つのファイルの差分を取る・マージする (vimdiff, vim -d)</title><link>https://maku77.github.io/p/78gvwox/</link><pubDate>Fri, 24 Jan 2020 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/78gvwox/</guid><description>&lt;h2 id="2-つのテキストファイルの差分を取る">2 つのテキストファイルの差分を取る&lt;/h2>
&lt;p>Vim（あるいは gVim）には、テキストファイルの差分を取る &lt;strong>diff モード&lt;/strong> が付いています。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="https://vim-jp.org/vimdoc-ja/diff.html">diff - Vim日本語ドキュメント&lt;/a>&lt;/li>
&lt;li>参考: &lt;a href="https://vim-jp.org/vimdoc-en/diff.html">diff - Vim Documentation&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ハイライト表示された差分を確認しながらファイルを修正していくことができます。&lt;/p>
&lt;h3 id="vimgvim-を-diff-モードで起動する-vimdiffgvimdiff">Vim/gVim を diff モードで起動する (vimdiff/gvimdiff)&lt;/h3>
&lt;p>コマンドラインから、Vim や gVim を diff モードを起動するには次のように &lt;strong>&lt;code>vimdiff&lt;/code>&lt;/strong> （あるいは &lt;strong>&lt;code>gvimdiff&lt;/code>&lt;/strong>） コマンドを実行します。
引数を増やせば、3 つ、あるいは 4 つのファイルを比較することも可能です。&lt;/p>
&lt;ul>
&lt;li>&lt;code>vim&lt;/code> の場合
&lt;ul>
&lt;li>&lt;code>vim -d ファイル1 ファイル2&lt;/code>&lt;/li>
&lt;li>&lt;code>vimdiff ファイル1 ファイル2&lt;/code> （&lt;code>vim -d&lt;/code> のエイリアス）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>gvim&lt;/code> の場合
&lt;ul>
&lt;li>&lt;code>gvim -d ファイル1 ファイル2&lt;/code>&lt;/li>
&lt;li>&lt;code>gvimdiff ファイル1 ファイル2&lt;/code> （&lt;code>gvim -d&lt;/code> のエイリアス）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>例えば、gVim 上で &lt;code>a.txt&lt;/code> と &lt;code>b.txt&lt;/code> を比較したいときは次のように gVim を起動します。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ gvimdiff a.txt b.txt
&lt;/code>&lt;/pre>

&lt;figure class="xImage">
 &lt;img style="" width="484" height="204" src="../p/78gvwox/img-001.png" alt="/p/78gvwox/img-001.png" />
&lt;/figure>

&lt;p>左右にスプリットされた画面になり、内容が異なる部分（2 行目の &lt;code>BBBBB&lt;/code> と &lt;code>XXXXX&lt;/code>）がハイライト表示されます。
ウィンドウ間を移動するには &lt;code>Ctrl-W&lt;/code> &lt;code>Ctrl-W&lt;/code> と入力します。&lt;/p></description></item><item><title>Vim/Neovim でインサートモード中に Backspace キーや CTRL-W で文字を削除するときの振る舞いを変更する (backspace)</title><link>https://maku77.github.io/p/b9tsccu/</link><pubDate>Wed, 07 Nov 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/b9tsccu/</guid><description>&lt;h2 id="backspace-オプションvim-の場合">backspace オプション（Vim の場合）&lt;/h2>
&lt;p>Vim エディタでは、インサートモード中に &lt;kbd>Backspace&lt;/kbd> キーを押すと、入力した文字が削除されますが、デフォルトではインサートモードに入ったカーソル位置より前の文字を削除することはできません。
代表的な削除系のキー入力は、下記のような振る舞いをします。&lt;/p>
&lt;ul>
&lt;li>&lt;kbd>Backspace&lt;/kbd>: カーソル位置の直前の 1 文字を削除する。ただし、インサートモードに入ったときのカーソル位置までしか削除できない。&lt;/li>
&lt;li>&lt;kbd>CTRL-W&lt;/kbd>: カーソル位置の直前の 1 単語を削除する。ただし、インサートモードに入ったときのカーソル位置までしか削除できない。&lt;/li>
&lt;li>&lt;kbd>CTRL-U&lt;/kbd>: カーソル位置からインサートモードに入ったときのカーソル位置までを削除する。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>&lt;code>backspace&lt;/code>&lt;/strong> オプションを設定すると、上記のようなキー入力によって削除可能な文字の範囲を広げることができます。
&lt;code>backspace&lt;/code> オプションには次のような値をカンマ区切りで設定します。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>indent&lt;/code>&lt;/strong>: オートインデント機能で挿入されたスペースを削除できる&lt;/li>
&lt;li>&lt;strong>&lt;code>eol&lt;/code>&lt;/strong>: 改行を削除できる（前の行に遡って削除していける）&lt;/li>
&lt;li>&lt;strong>&lt;code>start&lt;/code>&lt;/strong>: インサートモードに入ったときのカーソル位置よりも前の文字を削除できる（ただし、&lt;kbd>CTRL-W&lt;/kbd> や &lt;kbd>CTRL-U&lt;/kbd> による削除は、インサートモードに入ったカーソル位置までで削除範囲が一度止まる）&lt;/li>
&lt;/ul>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">設定例 (~/.vimrc)&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; インサートモード中の BS、CTRL-W、CTRL-U による文字削除を柔軟にする&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">backspace&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">indent&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">eol&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">start&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように設定しておくと、それぞれの削除系のキー入力の振る舞いは下記のように変化します。&lt;/p>
&lt;ul>
&lt;li>&lt;kbd>Backsapce&lt;/kbd>: カーソル位置の直前の 1 文字を削除する。&lt;strong>インサートモードに入った時のカーソル位置よりも前の文字を削除できる。&lt;/strong>&lt;/li>
&lt;li>&lt;kbd>CTRL-W&lt;/kbd>: カーソル位置の直前の 1 単語を削除する。&lt;strong>インサートモードに入った時のカーソル位置よりも前の単語を削除できる。ただし、インサートモードに入った時のカーソル位置も単語の境界とみなす。&lt;/strong>&lt;/li>
&lt;li>&lt;kbd>CTRL-U&lt;/kbd>: &lt;strong>カーソル位置から行頭までを削除する。ただし、インサートモードに入ったときのカーソル位置も行頭とみなす。&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h2 id="backspace-オプション-neovim-の場合">backspace オプション (Neovim の場合）&lt;/h2>
&lt;p>Neovim の場合は、&lt;code>backspace&lt;/code> オプションの設定値が &lt;strong>デフォルトで &lt;code>indent,eol,start&lt;/code>&lt;/strong> となっているため、何も設定しなくても &lt;kbd>Backspace&lt;/kbd> キーが直感的に振る舞います（編集開始位置よりも前の文字を削除できます）。&lt;/p></description></item><item><title>Vim で行末の余分なスペースをまとめて削除する</title><link>https://maku77.github.io/p/pdvgf4v/</link><pubDate>Thu, 01 Nov 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/pdvgf4v/</guid><description>&lt;p>ノーマルモードから下記のように実行すると、行末にある余計なスペースをまとめて削除することができます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>%&lt;span class="nx">s&lt;/span>&lt;span class="sr">/\s*$/&lt;/span>/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h4 id="各項目の意味">各項目の意味&lt;/h4>
&lt;ul>
&lt;li>&lt;code>%&lt;/code> &amp;ndash; すべての行を変更対象にする&lt;/li>
&lt;li>&lt;code>\s*&lt;/code> &amp;ndash; 0個以上のスペース（半角スペースやタブ）&lt;/li>
&lt;li>&lt;code>$&lt;/code> &amp;ndash; 行末&lt;/li>
&lt;/ul>
&lt;p>ここでは、&lt;code>%&lt;/code> を指定してすべての行を対象にしていますが、&lt;kbd>SHIFT-V&lt;/kbd> のビジュアルモードで行を選択してから &lt;code>:s/\s*$//&lt;/code> と入力すれば、選択した行のみを対象にでききます。&lt;/p></description></item><item><title>Vim で上の行の文字、下の行の文字をコピーする (CTRL-Y, CTRL-E)</title><link>https://maku77.github.io/p/4xbztoe/</link><pubDate>Wed, 31 Oct 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/4xbztoe/</guid><description>&lt;figure class="xImage">
 &lt;img style="" width="396" height="64" src="../p/4xbztoe/img-001.gif" alt="/p/4xbztoe/img-001.gif" />
&lt;/figure>

&lt;p>インサートモードで下記のようなキー入力を行うと、カーソルのすぐ上の行の文字や、すぐ下の行の文字をコピーする形でカーソル位置に挿入できます。
テキストの一部だけが異なる文章を挿入したいときなどに便利です。&lt;/p>
&lt;ul>
&lt;li>&lt;kbd>CTRL-Y&lt;/kbd>: カーソル位置の上の行の文字をコピーして挿入&lt;/li>
&lt;li>&lt;kbd>CTRL-E&lt;/kbd>: カーソル位置の下の行の文字をコピーして挿入&lt;/li>
&lt;/ul></description></item><item><title>Vim でプログラムの関数定義などにジャンプする（tags ファイルの利用）</title><link>https://maku77.github.io/p/qt8z5d3/</link><pubDate>Tue, 30 Oct 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/qt8z5d3/</guid><description>&lt;h2 id="universal-ctags-コマンドのインストール">Universal Ctags コマンドのインストール&lt;/h2>
&lt;p>タグジャンプ系の機能を使用するには、あらかじめ検索対象のソースコードから &lt;code>tags&lt;/code> ファイルを生成しておく必要があります。
&lt;code>tags&lt;/code> ファイルを作成するには、外部コマンドの &lt;code>ctags&lt;/code> を使用するのですが、このコマンドは下記の Universal Ctags で提供されているものを使用するのがよいでしょう。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://ctags.io/">Universal Ctags&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://github.com/universal-ctags/ctags">各OS用のインストールパッケージ&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Windows であれば、ダウンロードしたアーカイブに含まれている &lt;code>ctags.exe&lt;/code> をパスの通ったディレクトリに配置するだけでインストールは完了です。&lt;/p>
&lt;p>昔は &lt;a href="http://ctags.sourceforge.net/">exhuberant ctags&lt;/a> で提供されている &lt;code>ctags&lt;/code> が主流でしたが、現在はメンテナンスされておらず、新しい言語にも対応していないので、そこから fork されたプロジェクトである Universal Ctags の方を使うことをオススメします。&lt;/p>
&lt;p>Univasal Ctags でサポートしている言語は、下記のようにして確認することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ ctags --list-languages
&lt;/code>&lt;/pre>&lt;h2 id="tags-ファイルを作成する">tags ファイルを作成する&lt;/h2>
&lt;p>&lt;code>tags&lt;/code> ファイルを作成するには、検索したいソースコードファイルのあるディレクトリで &lt;code>ctags&lt;/code> コマンドを実行します。
ディレクトリを再帰的に走査するには &lt;code>-R (--recurse)&lt;/code> オプションを付けて実行してください。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ ctags -R
&lt;/code>&lt;/pre>&lt;p>ある言語のファイル群だけ（例えば .java だけ）を対象にしたいときは、&lt;code>--languages&lt;/code> オプションを使用して以下のように実行します。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ ctags -R --language=Java
&lt;/code>&lt;/pre>&lt;p>指定するのは拡張子ではなく、言語名であることに注意してください（&lt;code>ctags --list-languages&lt;/code> で表示される言語名から選択）。
複数の言語を指定することも可能です。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ ctags -R --languages=Java,C,C++,Make,Python,Ruby
&lt;/code>&lt;/pre>&lt;p>しばらく待って、カレントディレクトリに &lt;code>tags&lt;/code> ファイルが生成されれば成功です。&lt;/p>
&lt;h3 id="どの拡張子のファイルが検索対象になるか">どの拡張子のファイルが検索対象になるか&lt;/h3>
&lt;p>どのような言語名でどの拡張子のファイルが走査対象になるかは、&lt;code>--list-maps&lt;/code> オプションで確認することができます（指定するときは大文字と小文字の違いは気にしなくてよいようです）。&lt;/p>
&lt;pre tabindex="0">&lt;code>$ ctags --list-maps | head -5
Ada *.adb *.ads *.Ada
Ant build.xml *.build.xml *.ant *.xml
Asciidoc *.asc *.adoc *.asciidoc *.asc *.adoc *.asciidoc
Asm *.A51 *.29[kK] *.[68][68][kKsSxX] *.[xX][68][68] *.asm *.ASM *.s *.S
Asp *.asp *.asa
&lt;/code>&lt;/pre>&lt;p>いくつかの言語名にはエイリアス名が定義されていて、エイリアス名でも指定することができるようになっています。
エイリアス名の一覧は &lt;code>ctags --list-aliases&lt;/code> で確認することができます。&lt;/p></description></item><item><title>Vim で現在のキーマップの一覧を表示する (map)</title><link>https://maku77.github.io/p/7uxykzp/</link><pubDate>Sun, 28 Oct 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/7uxykzp/</guid><description>&lt;ul>
&lt;li>参考: &lt;a href="../p/nqqixxy/">Vim のキーマップの基本 (&lt;code>map&lt;/code>, &lt;code>noremap&lt;/code>)&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ユーザ定義のキーマップを確認する">ユーザ定義のキーマップを確認する&lt;/h2>
&lt;p>Vim でユーザが定義しているキーマップの一覧を表示するには、下記のように &lt;strong>&lt;code>map&lt;/code>&lt;/strong> 系のコマンドをパラメータなしで実行します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">キーマップの一覧を表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">map&lt;/span> &lt;span class="c">&amp;#34; ノーマルモードとビジュアルモードのキーマップ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">nmap&lt;/span> &lt;span class="c">&amp;#34; ノーマルモードのキーマップ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">vmap&lt;/span> &lt;span class="c">&amp;#34; ビジュアルモードのキーマップ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">imap&lt;/span> &lt;span class="c">&amp;#34; インサートモードのキーマップ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">cmap&lt;/span> &lt;span class="c">&amp;#34; コマンドラインモードのキーマップ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">map&lt;/span>&lt;span class="p">!&lt;/span> &lt;span class="c">&amp;#34; インサートモードとコマンドラインモードのキーマップ&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>また、次のように &lt;strong>&lt;code>verbose&lt;/code>&lt;/strong> コマンド（省略形は &lt;strong>&lt;code>verb&lt;/code>&lt;/strong>）と組み合わせて使用すると、そのキーマップがどの設定ファイルで定義されているかを確認することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">キーマップの一覧と定義元のファイルを表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="k">map&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">nmap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">vmap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">imap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="nx">cmap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">verbose&lt;/span> &lt;span class="k">map&lt;/span>&lt;span class="p">!&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="デフォルトのキーマップを確認する">デフォルトのキーマップを確認する&lt;/h2>
&lt;p>Vim がデフォルト定義しているキーマップの一覧は、下記のヘルプファイルで参照することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">index&lt;/span>.&lt;span class="nx">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">index&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>例えば、インサートモード時の &lt;code>Ctrl-H&lt;/code> がどのようなマッピングになっているかは、&lt;code>i_CTRL-H&lt;/code> という項目に記述されています（&lt;code>same as &amp;lt;BS&amp;gt;&lt;/code> と書かれているので、BackSpace キーと同様の振る舞いをします）。&lt;/p>
&lt;p>初めからどのモードのキーマッピングを調べたいかが決まっているときは、上記のようにヘルプを起動する代わりに、下記のように起動するとそのセクションから読み始めることができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">normal&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">index&lt;/span> &lt;span class="c">&amp;#34; ノーマルモードのデフォルトマッピングを表示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">visual&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">index&lt;/span> &lt;span class="c">&amp;#34; ビジュアルモードのデフォルトマッピングを表示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">insert&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">index&lt;/span> &lt;span class="c">&amp;#34; インサートモードのデフォルトマッピングを表示&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>もっと具体的に、調べたいキーコンビネーションが決まっている場合は、そのキーに対応するヘルプを直接開くことができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">i_CTRL&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">H&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim でカレントディレクトリを Windows エクスプローラーで開く</title><link>https://maku77.github.io/p/s8wxbon/</link><pubDate>Mon, 22 Oct 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/s8wxbon/</guid><description>&lt;p>Vim で任意のファイルを開いているときに、下記のように入力すると、そのファイルのあるディレクトリを Windows エクスプローラーで開くことができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:silent ! start %:h
&lt;/code>&lt;/pre>&lt;p>使用頻度が高ければ、下記のようにキーマッピングしておけば、&lt;kbd>F12&lt;/kbd> キーを押すだけで Windows エクスプローラーを開くことができるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">nmap &amp;lt;F12&amp;gt; :silent ! start %:h&amp;lt;CR&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim で行を連結する (J, gJ)</title><link>https://maku77.github.io/p/etgm2a4/</link><pubDate>Thu, 20 Sep 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/etgm2a4/</guid><description>&lt;h2 id="スペースを入れて行連結スペース入れずに行連結">スペースを入れて行連結、スペース入れずに行連結&lt;/h2>


&lt;figure class="xImage">
 &lt;img style="" width="245" height="78" src="../p/etgm2a4/img-001.gif" alt="/p/etgm2a4/img-001.gif" />
&lt;/figure>

&lt;p>行末の改行を削除して次の行と連結するには下記のコマンドを使用します。&lt;/p>
&lt;ul>
&lt;li>&lt;kbd>J&lt;/kbd>: スペースを1文字いれて連結する。&lt;/li>
&lt;li>&lt;kbd>gJ&lt;/kbd>: スペースを入れずに連結する。&lt;/li>
&lt;/ul>
&lt;h2 id="複数行をまとめて連結する">複数行をまとめて連結する&lt;/h2>
&lt;p>ビジュアルモード (&lt;kbd>SHIFT-V&lt;/kbd>) で複数行を選択してから &lt;kbd>J&lt;/kbd> や &lt;kbd>gJ&lt;/kbd> と入力すると、複数の行をまとめて連結することができます。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="" width="245" height="78" src="../p/etgm2a4/img-002.gif" alt="/p/etgm2a4/img-002.gif" />
&lt;/figure>

&lt;p>3行以上の行をスペースを入れずに連結したい場合は、上図のようにビジュアルモードで複数行を選択した状態で &lt;kbd>gJ&lt;/kbd> とするか、一行だけ &lt;kbd>gJ&lt;/kbd> で連結しておいて、残りの行を &lt;kbd>.&lt;/kbd> の連打で連結するのがお手軽です。&lt;/p>
&lt;h2 id="文章の終わりはスペース-2-つで連結される">文章の終わりはスペース 2 つで連結される&lt;/h2>
&lt;p>&lt;kbd>J&lt;/kbd> による行の連結部分には、通常 1 つの半角スペースが挿入されますが、行末が句点（&lt;code>.&lt;/code>、 &lt;code>?&lt;/code>、&lt;code>!&lt;/code>）で終了している場合は 2 つの半角スペースが挿入されます。
この振る舞いを変更するには、以下のオプションを設定します。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">joinspaces&lt;/span> &lt;span class="c">&amp;#34;行連結時に句点のあとに 2 つのスペースを挿入 (default)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">nojoinspaces&lt;/span> &lt;span class="c">&amp;#34;行連結時に句点のあとに 1 つのスペースを挿入&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim のサイレントバッチモードで ex スクリプトをファイルに適用する (-es)</title><link>https://maku77.github.io/p/q7eoz2z/</link><pubDate>Tue, 18 Sep 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/q7eoz2z/</guid><description>&lt;p>vim (gvim) コマンドを起動するときに、&lt;strong>&lt;code>-es&lt;/code>&lt;/strong> オプションを使用すると、サイレントバッチモードで起動し、任意の ex スクリプトを指定したファイルに適用することができます。&lt;/p>
&lt;p>例えば、下記のスクリプトは &lt;code>AAA&lt;/code> という文字を &lt;code>XXX&lt;/code> に置換して保存するだけの簡単な ex スクリプトです。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">replace.vim&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>%&lt;span class="nx">s&lt;/span>&lt;span class="sr">/AAA/&lt;/span>&lt;span class="nx">XXX&lt;/span>/&lt;span class="nx">g&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">wq&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このスクリプトを任意のテキストファイル (ここでは &lt;code>input.txt&lt;/code>) に適用するには、下記のように実行します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> gvim -es -S replace.vim input.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>例えば、入力したファイルの内容が下記のような内容だとすると、&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">input.txt&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">AAA BBB AAA BBB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BBB AAA BBB AAA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">AAA BBB AAA BBB&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>次のように変更されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">input.txt（変更後）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">XXX BBB XXX BBB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BBB XXX BBB XXX
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">XXX BBB XXX BBB&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>指定したファイル自体の内容が変更されることに注意してください。
ex スクリプトの中で &lt;code>wq&lt;/code> を実行しているため、上書き保存して終了するところまでがワンセットで実行されます。&lt;/p>
&lt;p>&lt;code>-eq&lt;/code> オプションの代わりに、&lt;strong>&lt;code>-c&lt;/code>&lt;/strong> オプションを使用すると、コマンドラインで直接 ex コマンドを指定して実行することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> gvim -c &lt;span class="s2">&amp;#34;%s/AAA/XXX/g&amp;#34;&lt;/span> -c &lt;span class="s2">&amp;#34;wq&amp;#34;&lt;/span> input.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim で複数行の行頭に同じテキストを挿入する</title><link>https://maku77.github.io/p/mp48ku2/</link><pubDate>Tue, 04 Sep 2018 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/mp48ku2/</guid><description>&lt;h2 id="すべての行の行頭にテキストを追加">すべての行の行頭にテキストを追加&lt;/h2>
&lt;p>すべての行の行頭にスペース4文字を挿入したいときは、次のように置換コマンドを実行します。&lt;/p>
&lt;pre tabindex="0">&lt;code>:%s/^/ /
&lt;/code>&lt;/pre>&lt;p>&lt;code>%&lt;/code> はすべての行に対して置換を実行することを表します。
&lt;code>^&lt;/code> は行頭を表す記号です。&lt;/p>
&lt;h2 id="選択範囲の行の行頭にテキストを追加">選択範囲の行の行頭にテキストを追加&lt;/h2>


&lt;figure class="xImage">
 &lt;img style="" width="261" height="78" src="../p/mp48ku2/img-001.gif" alt="/p/mp48ku2/img-001.gif" />
&lt;/figure>

&lt;p>特定範囲の行の行頭だけに、文字を挿入したいときは次のようにします。&lt;/p>
&lt;ol>
&lt;li>&lt;kbd>0&lt;/kbd> で行頭にフォーカスを移動する。&lt;/li>
&lt;li>&lt;kbd>Ctrl-v&lt;/kbd> で矩形選択モードにし、&lt;kbd>j&lt;/kbd> を数回押して、対象範囲の行の行頭がすべて選択された状態にする。&lt;/li>
&lt;li>&lt;kbd>Shift-i&lt;/kbd> で行頭への挿入モードに入り、任意の文字を入力。&lt;/li>
&lt;li>&lt;kbd>Esc&lt;/kbd> で挿入モードを抜ける。&lt;/li>
&lt;/ol>
&lt;p>文字の入力中は、カレント行にしか文字が挿入されていないかのように見えますが、最後に &lt;kbd>Esc&lt;/kbd> キーで挿入モードを抜けたときに、すべての行に同じ文字が挿入されます。&lt;/p>
&lt;p>ソースコードの複数行をまとめてコメントアウトしたり、（上記アニメーションのように）Markdown 内のテキストをまとめて箇条書きにしたりするときに便利できます。&lt;/p></description></item><item><title>Vim で編集中のスクリプト（Ruby や Python など）をショートカットキーで実行する</title><link>https://maku77.github.io/p/nwqjyx8/</link><pubDate>Mon, 04 Sep 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/nwqjyx8/</guid><description>&lt;p>Vim の &lt;strong>&lt;code>:autocmd&lt;/code>&lt;/strong> コマンドを使用すると、編集中のファイルの種類に応じた設定を行うことができます。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="../p/rj6oatw/">&lt;code>autocmd&lt;/code> で自動コマンドを登録する&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>これと &lt;strong>&lt;code>:map&lt;/code>&lt;/strong> コマンドを組み合わせて使用することで、単一のショートカットキー（例えば &lt;code>F5&lt;/code> キー）で編集中のスクリプトを、適切な処理系（&lt;code>python&lt;/code> コマンドなど）で実行することができるようになります。
競技プログラミングなどでは、現在編集中のソースコードをさくっとコンパイルして、main 関数の実行結果をさくっと表示できると便利です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">.vimrc（Windows の場合は _vimrc）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; File type detection is On.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">filetype&lt;/span> &lt;span class="nx">on&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">augroup&lt;/span> &lt;span class="nx">vimrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; Remove all autocommands in this group&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span>&lt;span class="p">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; &amp;lt;F5&amp;gt; key execution&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">java&lt;/span> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F5&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="p">!&lt;/span>&lt;span class="nx">javac&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="nx">encoding&lt;/span> &lt;span class="nx">UTF&lt;/span>&lt;span class="m">-8&lt;/span> % &amp;amp;&amp;amp; &lt;span class="nx">java&lt;/span> %&lt;span class="p">&amp;lt;&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">javascript&lt;/span> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F5&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="p">!&lt;/span>&lt;span class="nx">node&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">php&lt;/span> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F5&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="p">!&lt;/span>&lt;span class="nx">php&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">python&lt;/span> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F5&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="p">!&lt;/span>&lt;span class="nx">python&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">ruby&lt;/span> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F5&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="p">!&lt;/span>&lt;span class="nx">ruby&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">go&lt;/span> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F5&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="p">!&lt;/span>&lt;span class="nx">go&lt;/span> &lt;span class="nx">run&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">groovy&lt;/span> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F5&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="p">!&lt;/span>&lt;span class="nx">groovy&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">vim&lt;/span> &lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">buffer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F5&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">source&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">augroup&lt;/span> &lt;span class="nx">END&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">上記のように、&lt;code>nmap&lt;/code> によるキーマップ設定時に &lt;code>&amp;lt;buffer&amp;gt;&lt;/code> オプションを指定すると、キーマップ設定がカレントバッファにのみ反映されるようになります。&lt;/span>
&lt;/div>
&lt;p>上記の例では、各言語のソースコードを編集中に &lt;code>&amp;lt;F5&amp;gt;&lt;/code> キーを押すことで、次のような処理を実行するように設定しています。&lt;/p></description></item><item><title>Vim の autocmd で自動コマンドを登録する</title><link>https://maku77.github.io/p/rj6oatw/</link><pubDate>Mon, 04 Sep 2017 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/rj6oatw/</guid><description>&lt;h2 id="autocmd-の概要">autocmd の概要&lt;/h2>
&lt;p>Vim の &lt;strong>&lt;code>autocmd&lt;/code>&lt;/strong> コマンドを使って自動コマンドを登録しておくと、ファイルのオープン時、保存時、カーソル移動時など、様々なタイミングで任意の処理を行えるようになります。
例えば、下記のようなことが行えます。&lt;/p>
&lt;ul>
&lt;li>プログラミング言語のソースコードを開いたときに、言語に応じてインデントを設定する&lt;/li>
&lt;li>圧縮されたテキストファイルを開いたときに、自動的に解凍してテキストを編集できるようにする（保存するときに再び自動で圧縮する）&lt;/li>
&lt;li>ノーマルモードに戻った時に、IME（日本語入力モード）をオフにする&lt;/li>
&lt;li>日記ファイルを開いたときに自動で本日の日付を挿入する&lt;/li>
&lt;li>ファイルの種類によって異なる種類のキーワードハイライト設定を有効にする&lt;/li>
&lt;/ul>
&lt;p>下記は具体的な &lt;code>autocmd&lt;/code> コマンドの使い方のサンプルです。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: .txt ファイルを編集するときはタブキー入力をスペースに展開する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">autocmd&lt;/span> &lt;span class="nx">BufEnter&lt;/span> *.&lt;span class="nx">txt&lt;/span> &lt;span class="nx">setlocal&lt;/span> &lt;span class="nx">expandtab&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>autocmd&lt;/code> コマンドに関する詳細なドキュメントは、Vim から &lt;code>:help autocmd.txt&lt;/code> と入力して参照することができます。
下記サイトでも同じ内容のドキュメントを読むことができます。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://vim-jp.org/vimdoc-ja/autocmd.html">autocmd - Vim Documentation（日本語）&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://vim-jp.org/vimdoc-en/autocmd.html">autocmd - Vim Documentation（英語）&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;code>autocmd&lt;/code> は構文が若干複雑なのでとっつきにくいのですが、使いこなせると非常に便利なので、是非ここで使い方をマスターしましょう。&lt;/p>
&lt;h2 id="autocmd-で自動コマンドを設定する">autocmd で自動コマンドを設定する&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">autocmd&lt;/span> ＜&lt;span class="nx">イベント&lt;/span>＞ ＜&lt;span class="nx">ファイルパターン&lt;/span>＞ ＜&lt;span class="nx">実行コマンド&lt;/span>＞
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>という形式で &lt;code>:autocmd&lt;/code> を実行すると、&lt;code>＜ファイルパターン＞&lt;/code> に一致するファイルにおいて、&lt;code>＜イベント＞&lt;/code> が発生したときに、&lt;code>＜実行コマンド＞&lt;/code> が実行されるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: .html ファイルを読み込んだときに（この設定ファイルと）同じディレクトリにある html.vim を実行する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">autocmd&lt;/span> &lt;span class="nx">BufNewFile&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">BufRead&lt;/span> *.&lt;span class="nx">html&lt;/span> &lt;span class="nx">source&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">sfile&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>:&lt;span class="nx">h&lt;/span>/&lt;span class="nx">html&lt;/span>.&lt;span class="nx">vim&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記では、分かりやすくするために、&lt;code>＜イベント＞&lt;/code>、&lt;code>＜ファイルパターン＞&lt;/code>、&lt;code>＜実行コマンド＞&lt;/code> を 2 文字分のスペースで区切っています。&lt;/p>
&lt;h3 id="イベント">イベント&lt;/h3>
&lt;p>&lt;code>＜イベント＞&lt;/code> の部分に指定できるイベント名は、下記のヘルプに一覧があります。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://vim-jp.org/vimdoc-en/autocmd.html#autocommand-events">autocmd-events - Vim Documentation&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>イベント名はヘルプファイル上では &lt;code>CamelCase&lt;/code> の形式で記載されていますが、&lt;strong>イベント名の大文字と小文字の違いは無視されます&lt;/strong>。
複数のイベントに対して同じ自動コマンドを登録したいときは、&lt;strong>イベント名をカンマで並べて指定することができます&lt;/strong>。
ただし、&lt;strong>カンマの前後にスペースを入れてはいけないことに注意してください&lt;/strong>（例: &lt;code>BufNewFile,BufRead&lt;/code>）。
&lt;code>BufNewFile&lt;/code> イベントは新しいファイルを作成するときに発生し、&lt;code>BufRead&lt;/code> インベントは既存のファイルを読み込んだときに発生します。&lt;/p></description></item><item><title>Vim で空行（改行だけの行）を削除する</title><link>https://maku77.github.io/p/6idyjje/</link><pubDate>Tue, 20 Jan 2015 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/6idyjje/</guid><description>&lt;h2 id="編集中のファイル全体の空行を削除する">編集中のファイル全体の空行を削除する&lt;/h2>
&lt;p>ノーマルモードで下記の ex コマンドを実行すれば、現在編集中のファイル内の、改行のみの行をすべて削除することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:%s/^\n//
&lt;/code>&lt;/pre>&lt;h2 id="指定した範囲の空行を削除する">指定した範囲の空行を削除する&lt;/h2>
&lt;ol>
&lt;li>&lt;code>Shift-V&lt;/code> でビジュアルモードに入る&lt;/li>
&lt;li>&lt;code>j&lt;/code> および &lt;code>k&lt;/code> キーで行の範囲を指定&lt;/li>
&lt;li>&lt;code>:s/^\n//&lt;/code> と入力して &lt;code>Enter&lt;/code>&lt;/li>
&lt;/ol></description></item><item><title>Vim で行をソートして重複行を削除する (:sort u)</title><link>https://maku77.github.io/p/ybvwp6b/</link><pubDate>Fri, 21 Nov 2014 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ybvwp6b/</guid><description>&lt;p>ビジュアルモード (&lt;kbd>SHIFT-V&lt;/kbd>) で対象範囲を選択し、下記のように実行すれば、指定した範囲の行をソートすることができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">sort&lt;/span> &lt;span class="c">&amp;#34;アルファベット順ソート&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">sort&lt;/span> &lt;span class="nx">n&lt;/span> &lt;span class="c">&amp;#34;10進数とみなしてソート&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>さらに、&lt;code>sort&lt;/code> を実行するときに &lt;code>u&lt;/code> オプション（unique の略）を付けることで、重複している行を一行にまとめることができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">sort&lt;/span> &lt;span class="nx">u&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ファイル全体に対して実行したい場合は、下記のように &lt;code>%&lt;/code> でファイル全体の行を指定すれば OK です。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>%&lt;span class="nx">sort&lt;/span> &lt;span class="nx">u&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim で大文字と小文字を変換する</title><link>https://maku77.github.io/p/iin6vwz/</link><pubDate>Tue, 18 Nov 2014 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/iin6vwz/</guid><description>&lt;p>Vim では &lt;code>U&lt;/code> や &lt;code>u&lt;/code> と入力するだけで、テキストの大文字と小文字を変換することができます。&lt;/p>
&lt;h2 id="ビジュアルモードでの操作">ビジュアルモードでの操作&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>&lt;code>U&lt;/code>&lt;/strong> &amp;hellip; 選択した範囲を大文字に変換&lt;/li>
&lt;li>&lt;strong>&lt;code>u&lt;/code>&lt;/strong> &amp;hellip; 選択した範囲を小文字に変換&lt;/li>
&lt;li>&lt;strong>&lt;code>~&lt;/code>&lt;/strong> &amp;hellip; 選択した範囲の大文字と小文字を入れ替え&lt;/li>
&lt;/ul>
&lt;p>例えば、&lt;code>Shift-V&lt;/code> で、行を選択しておいて &lt;code>U&lt;/code> と入力すれば、その行全体のアルファベットを大文字にすることができます。&lt;/p>
&lt;h2 id="ノーマルモードでの操作">ノーマルモードでの操作&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>&lt;code>gUU&lt;/code>&lt;/strong> / &lt;strong>&lt;code>guu&lt;/code>&lt;/strong> &amp;hellip; カーソル行すべての文字を大文字／小文字に変換する&lt;/li>
&lt;li>&lt;strong>&lt;code>gUiw&lt;/code>&lt;/strong> / &lt;strong>&lt;code>guiw&lt;/code>&lt;/strong> &amp;hellip; カーソル位置の単語を大文字／小文字に変換&lt;/li>
&lt;li>&lt;strong>&lt;code>~&lt;/code>&lt;/strong> &amp;hellip; カーソル位置の一文字の大文字／小文字を反転させる&lt;/li>
&lt;li>&lt;strong>&lt;code>g~~&lt;/code>&lt;/strong> &amp;hellip; カーソル行すべての文字の大文字／小文字を反転させる&lt;/li>
&lt;/ul>
&lt;p>若干難しい組み合わせのように見えますが、ノーマルモードでは、&lt;code>gU&lt;/code> や &lt;code>gu&lt;/code> の後に置換範囲を入力することで、その範囲を大文字、小文字に変換することができます。&lt;/p>
&lt;p>例えば、置換範囲として &lt;code>iw&lt;/code> を入力すると (&lt;code>guiw&lt;/code>)、カーソル下の単語を変換対象とすることができます。
置換範囲として移動コマンドを入力することもできるため、例えば &lt;code>gu$&lt;/code> と入力すれば、カーソル位置から行末 ($) までを小文字に変換することができます。&lt;/p>
&lt;p>ただし、どちらかというと、大文字と小文字の置換は、ビジュアルモードで範囲選択を行ってから &lt;code>u&lt;/code> や &lt;code>U&lt;/code> と入力する方がわかりやすいです（しかもタイプ数はほぼ同じ）。
例えば、カーソル下の単語を大文字に変換するには、&lt;code>viw&lt;/code> で単語選択してから、&lt;code>U&lt;/code> と入力すれば OK です。&lt;/p></description></item><item><title>Vim でXML/HTML の編集に便利なコマンド</title><link>https://maku77.github.io/p/sznjxob/</link><pubDate>Mon, 31 Mar 2014 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/sznjxob/</guid><description>&lt;p>XML や HTML ファイルを編集しているときは、&lt;code>c&lt;/code>（置換）や、&lt;code>d&lt;/code>（削除）コマンドの後ろに編集範囲を表す &lt;code>it&lt;/code> や &lt;code>at&lt;/code> を指定することで、素早い編集が可能になります。
下記は、置換コマンド &lt;code>c&lt;/code> を実行するときに、様々な修正範囲を指定する例です。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>操作内容&lt;/th>
 &lt;th>修正前&lt;/th>
 &lt;th>修正後&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>cit&lt;/code>&lt;/td>
 &lt;td>要素の内側を置換&lt;/td>
 &lt;td>&lt;code>&amp;lt;b&amp;gt;XXX&amp;lt;/b&amp;gt;&lt;/code>&lt;/td>
 &lt;td>&lt;code>&amp;lt;b&amp;gt;編集箇所&amp;lt;/b&amp;gt;&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>cat&lt;/code>&lt;/td>
 &lt;td>要素の全体を置換&lt;/td>
 &lt;td>&lt;code>&amp;lt;b&amp;gt;XXX&amp;lt;/b&amp;gt;&lt;/code>&lt;/td>
 &lt;td>&lt;code>編集箇所&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ci&amp;lt;&lt;/code>&lt;/td>
 &lt;td>タグの内側を置換&lt;/td>
 &lt;td>&lt;code>&amp;lt;b&amp;gt;XXX&amp;lt;/b&amp;gt;&lt;/code>&lt;/td>
 &lt;td>&lt;code>&amp;lt;編集箇所&amp;gt;XXX&amp;lt;/b&amp;gt;&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ca&amp;lt;&lt;/code>&lt;/td>
 &lt;td>タグの全体を置換&lt;/td>
 &lt;td>&lt;code>&amp;lt;b&amp;gt;XXX&amp;lt;/b&amp;gt;&lt;/code>&lt;/td>
 &lt;td>&lt;code>編集箇所XXX&amp;lt;/b&amp;gt;&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ci&amp;quot;&lt;/code>&lt;/td>
 &lt;td>属性の内側を置換&lt;/td>
 &lt;td>&lt;code>&amp;lt;div style=&amp;quot;XXX&amp;quot;&amp;gt;&lt;/code>&lt;/td>
 &lt;td>&lt;code>&amp;lt;div style=&amp;quot;編集箇所&amp;quot;&amp;gt;&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ca&amp;quot;&lt;/code>&lt;/td>
 &lt;td>属性の全体を置換&lt;/td>
 &lt;td>&lt;code>&amp;lt;div style=&amp;quot;XXX&amp;quot;&amp;gt;&lt;/code>&lt;/td>
 &lt;td>&lt;code>&amp;lt;div style=編集箇所&amp;gt;&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>上記は部分的な置換を行いたい場合の例ですが、&lt;code>c&lt;/code> というところを &lt;code>d&lt;/code> に変えれば、指定した範囲を削除することができます。&lt;/p>
&lt;p>これらのコマンドは、ファイルタイプが XML や HTML でない場合も動作します。&lt;/p></description></item><item><title>Vim で編集中のファイルを印刷する (hardcopy)</title><link>https://maku77.github.io/p/nw89tw2/</link><pubDate>Mon, 27 Jan 2014 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/nw89tw2/</guid><description>&lt;h2 id="vim-で印刷する">Vim で印刷する&lt;/h2>
&lt;p>以下のように実行すると、OS の印刷機能を使って現在開いているファイルを印刷することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:hardcopy
&lt;/code>&lt;/pre>&lt;p>印刷する範囲を指定したい場合は、ビジュアルモード (&lt;code>Shift-v&lt;/code>) で行選択してから上記を実行します。&lt;/p>
&lt;h2 id="vim-の印刷設定">Vim の印刷設定&lt;/h2>
&lt;p>Vim のオプション設定で、印刷時のヘッダー出力などの設定を行うことができます。
詳しくは、下記のようにしてヘルプを参照してみてください。&lt;/p>
&lt;pre tabindex="0">&lt;code>:help printdevice
:help printencoding
:help printheader
:help printfont
:help printoptions
&lt;/code>&lt;/pre>&lt;p>&lt;code>printoptions&lt;/code> は、次のようにいろいろな設定を組み合わせて指定します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 長い行を折り返し、行番号付き、横向きで印刷&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:set printoptions=wrap:y,number:y,portrait:n&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: B5 サイズで、縦向き、両面印刷（長辺閉じ）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:set printoptions=paper:B5,portrait:y,duplex:long&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: A3 サイズで、横向き、両面印刷（短辺閉じ）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:set printoptions=paper:A3,portrait:n,duplex:short&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim のキーマップ例: ショートカットキーで日時を挿入する</title><link>https://maku77.github.io/p/8xk6jnw/</link><pubDate>Mon, 27 Jan 2014 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/8xk6jnw/</guid><description>&lt;h2 id="ショートカットキーで-strftime-関数を実行する">ショートカットキーで strftime 関数を実行する&lt;/h2>
&lt;p>Vim で以下の設定をしておくと、ショートカットキーで &lt;code>2014-01-27&lt;/code> のような本日の日付を挿入することができます。
ここでは、&lt;code>Ctrl-D&lt;/code> → &lt;code>Ctrl-D&lt;/code> というキーコンビネーションに割り当てていますが、任意の組み合わせに変更することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc（Ctrl-D Ctrl-D で日付を挿入）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">silent&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">D&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">D&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">R&lt;/span>&lt;span class="p">&amp;gt;=&lt;/span>&lt;span class="nx">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%Y-%m-%d&amp;#34;&lt;/span>&lt;span class="p">)&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">silent&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">D&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">D&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">ESC&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">R&lt;/span>&lt;span class="p">&amp;gt;=&lt;/span>&lt;span class="nx">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%Y-%m-%d&amp;#34;&lt;/span>&lt;span class="p">)&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nx">ESC&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;ul>
&lt;li>&lt;code>imap&lt;/code> と &lt;code>nmap&lt;/code> の両方で定義しているので、挿入モードのときも、ノーマルモードのときも、ショートカットキーを入力して日付の挿入を行うことができます。&lt;/li>
&lt;li>&lt;code>&amp;lt;silent&amp;gt;&lt;/code> を入れることで、コマンドラインのエコーを防いでいます。&lt;/li>
&lt;li>&lt;code>&amp;lt;C-R&amp;gt;=&lt;/code> というのは、その後ろに記述した式を実行して展開するためのイディオムです（&lt;code>=&lt;/code> は Expression register を示しており、詳細は &lt;code>:help i_Ctrl-R&lt;/code> で確認できます）。&lt;/li>
&lt;/ul>
&lt;p>日付の挿入を頻繁に実行するのであれば、&lt;code>F1&lt;/code> キーのような単独キーに割り当てるようにすれば、さらに手軽に実行できるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc（F1 キーで日付を挿入、F2 キーで日付＋曜日を挿入）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">silent&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">R&lt;/span>&lt;span class="p">&amp;gt;=&lt;/span>&lt;span class="nx">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%Y-%m-%d&amp;#34;&lt;/span>&lt;span class="p">)&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">silent&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">R&lt;/span>&lt;span class="p">&amp;gt;=&lt;/span>&lt;span class="nx">strftime&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%Y-%m-%d (%a)&amp;#34;&lt;/span>&lt;span class="p">)&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ちなみに、&lt;code>F1&lt;/code> キーはデフォルトではヘルプの起動 (&lt;code>:help&lt;/code>) のショートカットキーとして設定されているため、上記のように設定すると、&lt;code>F1&lt;/code> キーでヘルプを起動することはできなくなります（まったく問題ないと思いますが）。
また、キーシーケンスの都合で、&lt;code>Ctrl-1&lt;/code> といった &lt;code>Ctrl&lt;/code> キーと数字キーの組み合わせはうまく動作しません。&lt;/p>
&lt;h2 id="strftime-関数のフォーマット一覧">strftime 関数のフォーマット一覧&lt;/h2>
&lt;p>Vim の &lt;code>strftime&lt;/code> のフォーマット文字列で使用できる記号 (&lt;code>%Y&lt;/code>など）は、C 言語の &lt;code>strftime&lt;/code> 関数と同様のものです。
なので、Linux 環境や macOS 環境であれば、下記のようにして C 言語の man ページで詳細を確認できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">C 言語の strftime のドキュメントを表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> man &lt;span class="m">3&lt;/span> strftime
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>下記はフォーマット文字列と、その出力の例です。&lt;/p></description></item><item><title>Vim/Neovim で構文強調（シンタックスハイライト）を有効にする (syntax)</title><link>https://maku77.github.io/p/wcfbnqj/</link><pubDate>Mon, 27 Jan 2014 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/wcfbnqj/</guid><description>&lt;p>Vim で構文強調（シンタックスハイライト）の機能を有効にしておくと、プログラムのソースコードをなどを編集しているときに、各種キーワードをカラフルに表示してくれるようになります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">syntax&lt;/span> &lt;span class="nx">on&lt;/span> &lt;span class="c">&amp;#34;構文強調を有効にする（:syntax enable でも OK）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">syntax&lt;/span> &lt;span class="nx">off&lt;/span> &lt;span class="c">&amp;#34;構文強調を無効にする&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>起動時に有効にしておきたい場合は、&lt;code>~/.vimrc&lt;/code> に以下のように記述しておきます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="k">syntax&lt;/span> &lt;span class="nx">on&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim/Neovim のキーマップ例: ショートカットキーで設定ファイル (.vimrc, init.lua) を開く</title><link>https://maku77.github.io/p/r5fcfgk/</link><pubDate>Mon, 27 Jan 2014 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/r5fcfgk/</guid><description>&lt;h2 id="vim-の場合">Vim の場合&lt;/h2>
&lt;p>Vim の設定ファイルで下記のようにキーマッピング設定をしておくと、&lt;code>F1&lt;/code> キーを押すだけで簡単に &lt;code>~/.vimrc&lt;/code> ファイルを開くことができます。
Neovim の設定ファイルとして &lt;code>~/.config/nvim/init.vim&lt;/code> を使用している場合も同様に開くことができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim の .vimrc あるいは Neovim の init.vim を開く&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; ノーマルモード時に F1 キーで設定ファイルを開く&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nnoremap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">silent&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">tabnew&lt;/span> $&lt;span class="nx">MYVIMRC&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは、&lt;strong>&lt;code>:tabnew&lt;/code>&lt;/strong> コマンドを使って、新しいタブで設定ファイルを開くようにしています。
オプションとして &lt;strong>&lt;code>&amp;lt;silent&amp;gt;&lt;/code>&lt;/strong> を指定すると、&lt;code>F1&lt;/code> キーを押したときにコマンドライン領域に &lt;code>:tabnew $MYVIMRC&lt;/code> と表示されるのを抑制できます。&lt;/p>
&lt;h2 id="neovim-initlua-の場合">Neovim (init.lua) の場合&lt;/h2>
&lt;p>Neovim の Lua 版の設定ファイル (&lt;code>~/.config/nvim/init.lua&lt;/code>) を使う場合は、次のように設定します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim の init.lua を開く&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- ノーマルモード時に F1 キーで設定ファイルを開く&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.keymap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;F1&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;:tabnew $MYVIMRC&amp;lt;CR&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">silent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- $MYVIMRC を使わずに Lua ファイルのパスを指定する方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- vim.keymap.set(&amp;#34;n&amp;#34;, &amp;#34;&amp;lt;F1&amp;gt;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- &amp;#34;:tabnew &amp;#34; .. vim.fn.stdpath(&amp;#34;config&amp;#34;) .. &amp;#34;/init.lua&amp;lt;CR&amp;gt;&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- { silent = true }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- )&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のようにオプションとして &lt;strong>&lt;code>silent = true&lt;/code>&lt;/strong> を指定すると、&lt;code>F1&lt;/code> キーを押したときにコマンドライン領域に &lt;code>:tabnew $MYVIMRC&lt;/code> と表示されるのを抑制できます。&lt;/p></description></item><item><title>Windows でファイルを開くときに既存の GVim 内のタブで開く</title><link>https://maku77.github.io/p/6mdd9es/</link><pubDate>Fri, 25 Oct 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/6mdd9es/</guid><description>&lt;p>以下のように設定しておくと、すでに &lt;code>gvim.exe&lt;/code> のウィンドウが起動している状態で別のファイルを開いたときに、既存ウィンドウ内のタブとして開くことができます。&lt;/p>
&lt;ol>
&lt;li>レジストリエディタ (&lt;code>regedit&lt;/code>) を起動&lt;/li>
&lt;li>&lt;code>/HKEY_CLASSES_ROOT/Applications/gvim.exe/shell/open/command&lt;/code> の値を &lt;code>&amp;quot;C:\app\vim73-kaoriya\gvim.exe&amp;quot; --remote-tab-silent &amp;quot;%1&amp;quot;&lt;/code> のように変更&lt;/li>
&lt;/ol>
&lt;p>&lt;code>gvim.exe&lt;/code> のパスは自分の環境に合わせてください。&lt;/p></description></item><item><title>Vim のキーマップの基本 (map, noremap)</title><link>https://maku77.github.io/p/nqqixxy/</link><pubDate>Thu, 18 Jul 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/nqqixxy/</guid><description>&lt;h2 id="vim-のキーマップとは">Vim のキーマップとは&lt;/h2>
&lt;p>Vim の &lt;code>*map&lt;/code> 系コマンドを使うと、キーマップ（キーバインド）を定義できます。
キーマップとは、特定のキー入力（キーシーケンス）を別のキー入力に変換する機能です。
例えば、&lt;code>&amp;lt;F1&amp;gt;&lt;/code> キーを押すことで &lt;code>:help&lt;/code> コマンドを実行するように設定することができます。
頻繁に使うコマンドを短いキーシーケンスに割り当てることで、効率的に作業できるようになります。&lt;/p>
&lt;p>Vim では、ノーマルモード、インサートモード、ビジュアルモード、コマンドラインモードなど、それぞれのモードごとにキーマップを定義できます。
また、&lt;code>noremap&lt;/code> 系コマンドを使うことで、マッピングの伝播を防ぐことができます。&lt;/p>
&lt;h2 id="キーマップのヘルプ">キーマップのヘルプ&lt;/h2>
&lt;p>Vim のキーマップに関するヘルプドキュメントは、以下のコマンドで表示することができます。
必要に応じて参照してください。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="k">map&lt;/span>.&lt;span class="nx">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">key&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">mapping&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="map-系コマンドによるキーマッピング">map 系コマンドによるキーマッピング&lt;/h2>
&lt;p>キーマップの設定を行うには、主に以下のようなコマンドを使用します。
コマンドを使い分けることによって、特定のモードでだけ有効なマッピングを定義できます。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>map&lt;/code>&lt;/strong> &amp;hellip; ノーマルモード、ビジュアルモード用のキーマッピング&lt;/li>
&lt;li>&lt;strong>&lt;code>nmap&lt;/code>&lt;/strong> &amp;hellip; ノーマルモード用のキーマッピング&lt;/li>
&lt;li>&lt;strong>&lt;code>vmap&lt;/code>&lt;/strong> &amp;hellip; ビジュアルモード用のキーマッピング&lt;/li>
&lt;li>&lt;strong>&lt;code>imap&lt;/code>&lt;/strong> &amp;hellip; インサートモード用のキーマッピング&lt;/li>
&lt;li>&lt;strong>&lt;code>cmap&lt;/code>&lt;/strong> &amp;hellip; コマンドラインモード用のキーマッピング&lt;/li>
&lt;/ul>
&lt;p>よく使用するのは、ノーマルモード用のマップ定義を行う &lt;code>nmap&lt;/code> と、インサートモード用のマップ定義を行う &lt;code>imap&lt;/code> です。&lt;/p>
&lt;p>マッピングの定義は、以下のような形式で行います。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">キーマップの基本的な書式&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">nmap&lt;/span> ＜&lt;span class="nx">入力するキーシーケンス&lt;/span>＞ ＜&lt;span class="nx">実行するコマンド&lt;/span>＞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">imap&lt;/span> ＜&lt;span class="nx">入力するキーシーケンス&lt;/span>＞ ＜&lt;span class="nx">実行するコマンド&lt;/span>＞&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>例えば、下記のように実行したあとで、インサートモードで &lt;code>Ctrl&lt;/code> キーを押しながら &lt;code>F10&lt;/code> キーを 2 回押すと、カーソル位置に &lt;code>Hello World&lt;/code> が挿入されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">キーマップの例（インサートモード用）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">F10&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">F10&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">Hello&lt;/span> &lt;span class="nx">World&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">&lt;code>&amp;lt;C-F10&amp;gt;&lt;/code> は &lt;code>Ctrl&lt;/code> キーを押しながら &lt;code>F10&lt;/code> キーを押すことを表します。
このようなキー入力の表現方法は、&lt;code>:help key-notation&lt;/code> で詳しく説明されています。&lt;/span>
&lt;/div>
&lt;p>もっと単純に &lt;code>F10&lt;/code> キー 1 つに割り当ててもよかったのですが、ここではこんな複雑なキーシーケンスにもマッピングできるよという例を示しています。
同様のキーシーケンスをノーマルモード用に割り当てる場合は、下記のように先に &lt;code>i&lt;/code> コマンドでインサートモードに入らないといけないことに注意してください。
最後には &lt;code>&amp;lt;Esc&amp;gt;&lt;/code> でノーマルモードに戻ってあげると行儀が良いです。&lt;/p></description></item><item><title>Vim で開いたファイルがあるディレクトリをカレントディレクトリにする</title><link>https://maku77.github.io/p/4ekh9ba/</link><pubDate>Sun, 16 Jun 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/4ekh9ba/</guid><description>&lt;ul>
&lt;li>（追記） &lt;a href="../p/dpccbv7/">&lt;code>autochdir&lt;/code> オプション&lt;/a> が使える Vim であればそちらを使った方が簡単です。&lt;/li>
&lt;/ul>
&lt;p>Vim では、最初に Vim を起動するときに指定したファイルのあるディレクトリがカレントディレクトリとして使用されます。
このカレントディレクトリは、新しいバッファで別のディレクトリにあるファイルを開いた場合でも変更されません。
このため、編集中のファイルと同じディレクトリにあるファイルを &lt;code>:e .&lt;/code> や &lt;code>:tabnew .&lt;/code> コマンドで開く際に不便を感じることがあります（全然関係ないディレクトリが起点となってしまう）。&lt;/p>
&lt;p>Vim の設定ファイル (&lt;code>~/.vimrc&lt;/code>) で次のように設定しておくと、Vim 内で別のファイルを開いたときに、そのファイルの存在するディレクトリへ自動的に移動してくれるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; 開いたファイルのあるディレクトリをカレントディレクトリにする&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">au&lt;/span> &lt;span class="nx">BufEnter&lt;/span> * &lt;span class="k">execute&lt;/span> &lt;span class="s2">&amp;#34;:lcd &amp;#34;&lt;/span> . &lt;span class="nx">expand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;%:p:h&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Windows の右クリックメニューに「Vimで開く」を追加する</title><link>https://maku77.github.io/p/wwatzd9/</link><pubDate>Mon, 10 Jun 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/wwatzd9/</guid><description>&lt;p>（Windows Vista、Windows 7 で動作確認）&lt;/p>
&lt;p>以下のようにレジストリエディタ (&lt;code>regedit&lt;/code>) で設定しておくと、テキストファイルを右クリックしたときに、「Vim で開く」というメニュー項目が表示されるようになります。&lt;/p>
&lt;ol>
&lt;li>&lt;kbd>Windows + R&lt;/kbd>（ファイル名を指定して実行）から &lt;strong>&lt;code>regedit&lt;/code>&lt;/strong> と入力してレジストリエディタを起動する。&lt;/li>
&lt;li>&lt;code>HKEY_CLASS_ROOT/*/shell&lt;/code> を右クリックして &lt;strong>&lt;code>Vim&lt;/code>&lt;/strong> というキーを新規作成。&lt;/li>
&lt;li>&lt;code>HKEY_CLASS_ROOT/*/shell/Vim&lt;/code> の規定の REG_SZ の値を &lt;strong>&lt;code>&amp;amp;Vim で開く&lt;/code>&lt;/strong> に修正。&lt;/li>
&lt;li>&lt;code>HKEY_CLASS_ROOT/*/shell/Vim&lt;/code> を右クリックして &lt;strong>&lt;code>command&lt;/code>&lt;/strong> というキーを新規作成。&lt;/li>
&lt;li>&lt;code>HKEY_CLASS_ROOT/*/shell/Vim/command&lt;/code> の規定の REG_SZ の値を &lt;strong>&lt;code>C:\vim\gvim.exe &amp;quot;%1&amp;quot;&lt;/code>&lt;/strong> などに修正（パラメータをダブルクォーテーションで囲んでおかないと、空白を含んだファイルを開けません）。&lt;/li>
&lt;/ol></description></item><item><title>Vim で挿入モード、コマンドモードでの貼り付け</title><link>https://maku77.github.io/p/xqq89n2/</link><pubDate>Sun, 26 May 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/xqq89n2/</guid><description>&lt;p>ノーマルモードでのテキストのコピペは、&lt;code>y&lt;/code> コマンドでコピー (yank) 、&lt;code>p&lt;/code> コマンドで貼り付け (put) することができます。
一方、挿入モードやコマンドモードで貼り付けを行うには、下記のように入力する必要があります（挿入モードで &lt;code>y&lt;/code> と入力すると、そのまま &lt;code>y&lt;/code> というテキストが入力されてしまいます）。&lt;/p>
&lt;pre tabindex="0">&lt;code>Ctrl-R 0
&lt;/code>&lt;/pre>&lt;p>これは、具体的には &lt;strong>「レジスタ 0」&lt;/strong> に格納されているテキスト（直近でヤンクされたテキスト）を選択して貼り付けるコマンドです。
レジスタ &lt;code>0&lt;/code> に格納されるテキストは、あくまで Vim 内部でヤンクされたテキストです。
外部のアプリケーションでコピーしたテキストを貼り付けたい場合は、レジスタ &lt;code>0&lt;/code> の代わりに、レジスタ &lt;code>*&lt;/code> を指定してください。&lt;/p>
&lt;pre tabindex="0">&lt;code>Ctrl-R *
&lt;/code>&lt;/pre>&lt;p>レジスタに保存されているテキストの一覧は、以下のように確認することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:reg
&lt;/code>&lt;/pre>&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="register.html">切り取り＆貼り付け操作、レジスタの扱いについて理解する&lt;/a>&lt;/li>
&lt;li>&lt;a href="paste-register-0.html">最後にヤンクしたテキストを確実に貼り付ける&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim で最後にヤンクしたテキストを確実に貼り付ける</title><link>https://maku77.github.io/p/7jkhjzf/</link><pubDate>Sun, 26 May 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/7jkhjzf/</guid><description>&lt;p>ビジュアルモードで選択したテキストは、&lt;code>y&lt;/code> コマンドでコピーし、&lt;code>p&lt;/code> コマンドで貼り付けることができます。&lt;/p>
&lt;p>このとき、貼り付けを実行する前に、&lt;code>x&lt;/code> コマンドや &lt;code>d&lt;/code> コマンドなどによる削除操作を行ってしまうと、&lt;code>y&lt;/code> コマンドを実行したときに、その削除したテキストが貼り付けられてしまいます。
このようなケースでも、自分が明示的にヤンク (&lt;code>y&lt;/code>) したテキストを確実に貼り付けたいときは、次のように&lt;strong>レジスタ 0&lt;/strong> を指定してペーストコマンド (&lt;code>p&lt;/code>) を実行します。&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;#34;0p
&lt;/code>&lt;/pre>&lt;p>レジスタ 0 は、Vim 上で最後にヤンクしたテキストを保持しておくレジスタです。&lt;/p>
&lt;p>上記はノーマルモードでレジスタ 0 の値を貼り付ける方法を示していますが、挿入モードやコマンドモードで同様にレジスタ 0 の値を貼り付けるには下記のようにします。&lt;/p>
&lt;pre tabindex="0">&lt;code>Ctrl-R 0
&lt;/code>&lt;/pre>&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="register.html">切り取り＆貼り付け操作、レジスタの扱いについて理解する&lt;/a>&lt;/li>
&lt;li>&lt;a href="paste-in-insert-mode.html">挿入モード、コマンドモードでの貼り付け&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim/Neovim でビジュアルモード中に連続インデントできるようにする</title><link>https://maku77.github.io/p/hoihkfy/</link><pubDate>Sun, 26 May 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/hoihkfy/</guid><description>&lt;p>Vim/Neovim でビジュアルモードで複数行を選択してインデントするには、&lt;code>&amp;gt;&amp;gt;&lt;/code> や &lt;code>&amp;lt;&amp;lt;&lt;/code> を使いますが、このコマンドを入力すると、ビジュアルモードを抜けてしまうので、連続してインデントを行いたい場合にちょっと面倒です（何回インデントすればよいか分かっていれば &lt;code>3&amp;gt;&amp;gt;&lt;/code> のように回数を指定することはできますが）。&lt;/p>
&lt;p>下記のような設定を入れておくと、ビジュアルモード中のインデントを、&lt;strong>&lt;code>&amp;gt;&lt;/code>&lt;/strong> あるいは &lt;strong>&lt;code>&amp;lt;&lt;/code>&lt;/strong> だけで行うことができるようになります。
さらに、このコマンドを入力した後も、ビジュアルモードを抜けずにキープしてくれるので、行選択したまま連続してインデントを行うことができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc, init.vim) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Reselect visual block after indent/outdent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vnoremap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">gv&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vnoremap&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>&lt;span class="nx">gv&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim/Lua (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Reselect visual block after indent/outdent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.keymap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;gv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.keymap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;gt;gv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>同様に、&lt;a href="../p/pxpgasg/">選択範囲の自動インデントを行う &lt;code>=&lt;/code> コマンド&lt;/a> にも適用できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc, init.vim) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Stay visual mode after formatting code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">vnoremap&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">=&lt;/span>&lt;span class="nx">gv&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim/Lua (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Stay visual mode after formatting code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.keymap&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;v&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;=gv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../p/i2m4nqt/">インデント用のスペースを入力する（シフトコマンド） (&lt;code>&amp;gt;&amp;gt;&lt;/code>, &lt;code>&amp;lt;&amp;lt;&lt;/code>, &lt;code>Ctrl-T&lt;/code>, &lt;code>Ctrl-D&lt;/code>)&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim/Neovim で80文字目に縦線を表示する (colorcolumn)</title><link>https://maku77.github.io/p/ngz6n6i/</link><pubDate>Sat, 25 May 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ngz6n6i/</guid><description>&lt;h2 id="指定した位置に縦線を表示">指定した位置に縦線を表示&lt;/h2>
&lt;p>Vim/Neovim で &lt;strong>&lt;code>colorcolumn&lt;/code>&lt;/strong> オプションを設定すると、指定したカラム位置の背景色が変化します。
結果的にその位置に縦線を入れたように見せることができます。
例えば、80文字目の背景色を灰色にするには、以下のように &lt;strong>&lt;code>colorcolumn&lt;/code>&lt;/strong> を設定します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">80カラム目に縦線を表示する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">colorcolumn&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">80&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>colorcolumn&lt;/code> は上記のように絶対位置で指定することもできるし、&lt;strong>&lt;code>textwidth&lt;/code>&lt;/strong> が設定されている場合は、その値からの相対位置（&lt;code>+N&lt;/code> や &lt;code>-N&lt;/code> という形）で指定することもできます。
例えば、下記のようにすると、&lt;code>textwidth&lt;/code> から &lt;code>+1&lt;/code> の位置、つまり 80 文字目の背景色が変わることになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">textwidth&amp;#43;1 の位置に縦線を表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">textwidth&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">79&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">colorcolumn&lt;/span>&lt;span class="p">=+&lt;/span>&lt;span class="m">1&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ここでは &lt;code>colorcolumn&lt;/code> に一つの値だけを設定していますが、カンマで区切って複数のカラムを指定することができます。
カンマの前後にスペースは入れてはいけません。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">textwidth&amp;#43;1 の位置、80カラム目、100カラム目に縦線を表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">colorcolumn&lt;/span>&lt;span class="p">=+&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">100&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>縦線の色を変えたいときは、&lt;strong>&lt;code>highlight&lt;/code>&lt;/strong> コマンドで &lt;strong>&lt;code>ColorColumn&lt;/code>&lt;/strong> ハイライト・グループの設定を変更します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">縦線の色を変更する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">highlight&lt;/span> &lt;span class="nx">ColorColumn&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#202020&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">lightgray&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="設定例">設定例&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) / Neovim (init.vim) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; 指定したカラム位置に縦線を表示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">colorcolumn&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">highlight&lt;/span> &lt;span class="nx">ColorColumn&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#333300&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">lightgray&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 指定したカラム位置に縦線を表示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">colorcolumn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;80,100&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_set_hl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;ColorColumn&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">bg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;#333300&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctermbg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;lightgray&amp;#34;&lt;/span> &lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vundle をインストールして Vim のプラグイン環境を作る</title><link>https://maku77.github.io/p/b85489c/</link><pubDate>Sun, 07 Apr 2013 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/b85489c/</guid><description>&lt;h2 id="vundle-とは">Vundle とは&lt;/h2>
&lt;p>Vundle をインストールすると、Vim のプラグインを &lt;code>:BundleInstall&lt;/code> コマンドで簡単にインストールすることができるようになります。&lt;/p>
&lt;h2 id="vundle-のインストール">Vundle のインストール&lt;/h2>
&lt;p>基本的には、以下のサイトの手順に従ってインストールするだけです。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/VundleVim/Vundle.vim">https://github.com/VundleVim/Vundle.vim&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>下記のようにインストールすると、Vim のプラグインを &lt;code>~/.vim/bundle&lt;/code> ディレクトリ内で管理することができるようになります。
インストールしたプラグインを消す場合も、ディレクトリごと削除するだけなのでお手軽です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vundle のダウンロード&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>本家サイトには、&lt;code>.vimrc&lt;/code> に Vundle 用の設定を記述する方法が説明されていますが、個人的には、プラグイン関連の情報は別ファイル (&lt;code>~/vimrc_vundle.vim&lt;/code>) で管理して &lt;code>~/.vimrc&lt;/code> から読み込むようにしています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc（Vundle 用の設定をインクルード）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">source&lt;/span> &lt;span class="p">~&lt;/span>/&lt;span class="nx">vundle_vimrc&lt;/span>.&lt;span class="nx">vim&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/vundle_vimrc.vim（Vundle 用の設定）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34;&amp;#34;&amp;#34; Enable vundle commands&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">nocompatible&lt;/span> &lt;span class="c">&amp;#34; be iMproved, required&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">filetype&lt;/span> &lt;span class="nx">off&lt;/span> &lt;span class="c">&amp;#34; required&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; set the runtime path to include Vundle and initialize&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">rtp&lt;/span>&lt;span class="p">+=~&lt;/span>&lt;span class="sr">/.vim/&lt;/span>&lt;span class="nx">bundle&lt;/span>/&lt;span class="nx">Vundle&lt;/span>.&lt;span class="nx">vim&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">call&lt;/span> &lt;span class="nx">vundle&lt;/span>#&lt;span class="nx">begin&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; let Vundle manage Vundle, required&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Plugin&lt;/span> &lt;span class="s1">&amp;#39;VundleVim/Vundle.vim&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; ★&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; ★ここにプラグインを追加していく&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; ★&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">call&lt;/span> &lt;span class="nx">vundle&lt;/span>#&lt;span class="nx">end&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c">&amp;#34; required&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">filetype&lt;/span> &lt;span class="nx">plugin&lt;/span> &lt;span class="nx">indent&lt;/span> &lt;span class="nx">on&lt;/span> &lt;span class="c">&amp;#34; required&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように設定して Vim を立ち上げ直すと、&lt;code>:BundleList&lt;/code>、&lt;code>:BundleInstall&lt;/code>、&lt;code>:BundleSearch&lt;/code>、&lt;code>:BundleClean&lt;/code> などのコマンドを実行できるようになります。&lt;/p></description></item><item><title>Vim で正規表現にマッチする行を削除する</title><link>https://maku77.github.io/p/ngf6w24/</link><pubDate>Thu, 06 Dec 2012 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ngf6w24/</guid><description>&lt;h2 id="正規表現に一致するテキストが見つかった行をすべて削除する">正規表現に一致するテキストが見つかった行をすべて削除する&lt;/h2>
&lt;p>下記のように実行すると、正規表現に一致するテキストを含む行をまとめて削除することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">g&lt;/span>&lt;span class="sr">/正規表現/&lt;/span>&lt;span class="nx">d&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>例えば、以下のようなファイルリストが書かれたテキストから、バックアップファイル（&lt;code>~&lt;/code> で終わる行）を削除するには、&lt;/p>
&lt;pre tabindex="0">&lt;code>src/main.h
src/main.h~
src/main.cpp
src/main.cpp~
&lt;/code>&lt;/pre>&lt;p>以下のようなコマンドを入力します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">g&lt;/span>&lt;span class="sr">/\~$/&lt;/span>&lt;span class="nx">d&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="正規表現に一致するテキストが見つからない行をすべて削除する">正規表現に一致するテキストが「見つからない」行をすべて削除する&lt;/h2>
&lt;p>逆に、指定した正規表現に一致するテキストが &lt;strong>見つからない&lt;/strong> 行を削除するには、下記のように実行します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">v&lt;/span>&lt;span class="sr">/正規表現/&lt;/span>&lt;span class="nx">d&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim で■や※などの記号が重なって表示される問題の解決 (ambiwidth)</title><link>https://maku77.github.io/p/fp2xk7y/</link><pubDate>Thu, 11 Oct 2012 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/fp2xk7y/</guid><description>&lt;p>日本語の Vim 環境において、&lt;code>encoding&lt;/code> オプションの値が &lt;code>utf-8&lt;/code> などに設定されている場合、■ や ※ などの記号を入力したときに、その次の文字が半角分重なって表示されてしまうことがあります。
このような記号を正しく全角文字の幅で表示するには、以下のように設定します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">ambiwidth&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">double&lt;/span> &lt;span class="c">&amp;#34;Display double-width symbols properly&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>guifont&lt;/code> を設定すると、&lt;code>ambiwidth&lt;/code> の設定が &lt;code>auto&lt;/code> に戻ってしまうようなので、&lt;code>guifont&lt;/code> を設定している場合は、その後で &lt;code>ambiwidth&lt;/code> を設定するとよいでしょう。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/_gvimrc（Windows の場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34;Font settings for Windows&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;gui_win32&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">set&lt;/span> &lt;span class="nx">guifont&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">ＭＳ_ゴシック&lt;/span>:&lt;span class="nx">h10&lt;/span>::&lt;span class="nx">cSHIFTJIS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">set&lt;/span> &lt;span class="nx">printfont&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">ＭＳ_ゴシック&lt;/span>:&lt;span class="nx">h22&lt;/span>:&lt;span class="nx">cSHIFTJIS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">set&lt;/span> &lt;span class="nx">ambiwidth&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">double&lt;/span> &lt;span class="c">&amp;#34;Display double-width symbols properly&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">endif&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim の map、noremap 系コマンドで使用できる特殊キーの一覧 (key-notation, key-codes)</title><link>https://maku77.github.io/p/ibpmg65/</link><pubDate>Fri, 27 Jul 2012 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ibpmg65/</guid><description>&lt;ul>
&lt;li>参考: &lt;a href="../p/nqqixxy/">Vim のキーマップの基本 (&lt;code>map&lt;/code>, &lt;code>noremap&lt;/code>)&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="キーマップに使えるキー名の一覧">キーマップに使えるキー名の一覧&lt;/h2>
&lt;p>Vim の map 系コマンド（&lt;code>nmap&lt;/code> や &lt;code>imap&lt;/code>）で、&lt;code>F1&lt;/code> キーや &lt;code>BackSpace&lt;/code> キーなどの特殊キーを使用したマッピングを行う場合は、下記のヘルプページで表示されるキー表記を使用します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">キー表記のヘルプ&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="nx">key&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">notation&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>例えば、特殊キーを表すために次のような表記が使えることがわかります。&lt;/p>
&lt;ul>
&lt;li>&lt;code>&amp;lt;BS&amp;gt;&lt;/code> &amp;hellip; Back Space キー&lt;/li>
&lt;li>&lt;code>&amp;lt;Bslash&amp;gt;&lt;/code> &amp;hellip; Back Slash キー (&lt;code>\&lt;/code>)&lt;/li>
&lt;li>&lt;code>&amp;lt;CR&amp;gt;&lt;/code> or &lt;code>&amp;lt;Enter&amp;gt;&lt;/code> &amp;hellip; Enter キー（&lt;code>&amp;lt;CR&amp;gt;&lt;/code> がよく使われている）&lt;/li>
&lt;li>&lt;code>&amp;lt;Esc&amp;gt;&lt;/code> &amp;hellip; Esc キー&lt;/li>
&lt;li>&lt;code>&amp;lt;Space&amp;gt;&lt;/code> &amp;hellip; スペースキー&lt;/li>
&lt;li>&lt;code>&amp;lt;Tab&amp;gt;&lt;/code> &amp;hellip; Tab キー&lt;/li>
&lt;li>&lt;code>&amp;lt;Del&amp;gt;&lt;/code> &amp;hellip; Delete キー&lt;/li>
&lt;li>&lt;code>&amp;lt;Up&amp;gt;&lt;/code>/&lt;code>&amp;lt;Down&amp;gt;&lt;/code>/&lt;code>&amp;lt;Left&amp;gt;&lt;/code>/&lt;code>&amp;lt;Right&amp;gt;&lt;/code> &amp;hellip; 上下左右カーソルキー&lt;/li>
&lt;li>&lt;code>&amp;lt;F1&amp;gt;&lt;/code> 〜 &lt;code>&amp;lt;F12&amp;gt;&lt;/code> &amp;hellip; ファンクションキー&lt;/li>
&lt;li>&lt;code>&amp;lt;Help&amp;gt;&lt;/code> &amp;hellip; Help キー&lt;/li>
&lt;li>&lt;code>&amp;lt;Insert&amp;gt;&lt;/code> &amp;hellip; Insert キー&lt;/li>
&lt;li>&lt;code>&amp;lt;Home&amp;gt;&lt;/code> &amp;hellip; Home キー&lt;/li>
&lt;li>&lt;code>&amp;lt;End&amp;gt;&lt;/code> &amp;hellip; End キー&lt;/li>
&lt;li>&lt;code>&amp;lt;PageUp&amp;gt;&lt;/code> &amp;hellip; Page Up キー&lt;/li>
&lt;li>&lt;code>&amp;lt;PageDown&amp;gt;&lt;/code> &amp;hellip; Page Down キー&lt;/li>
&lt;/ul>
&lt;p>Shift キー、Control キー、Alt (Meta) キー、Command キー（macOS のみ）といったキーとの同時押しを表現するには、次のように記述します。&lt;/p></description></item><item><title>Vim 上でディレクトリツリーを表示する (NERDTree)</title><link>https://maku77.github.io/p/8qeuow8/</link><pubDate>Sun, 22 Jul 2012 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/8qeuow8/</guid><description>&lt;h2 id="nerdtree-とは">NERDTree とは&lt;/h2>
&lt;p>NERDTree を使うと、Vim の左端にエクスプローラバーのようなものを表示できます。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/preservim/nerdtree">https://github.com/preservim/nerdtree&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="nerdtree-のインストール">NERDTree のインストール&lt;/h2>
&lt;p>公式サイトにはいくつかインストール方法が書かれていますが、ここでは &lt;a href="../p/b85489c/">Vundle&lt;/a> を使ってインストールします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">call&lt;/span> &lt;span class="nx">vundle&lt;/span>#&lt;span class="nx">begin&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Plugin&lt;/span> &lt;span class="s1">&amp;#39;preservim/nerdtree&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">call&lt;/span> &lt;span class="nx">vundle&lt;/span>#&lt;span class="nx">end&lt;/span>&lt;span class="p">()&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように &lt;code>.vimrc&lt;/code> などに記述しておけば、次のように実行するだけで簡単に NERDTree をインストールできます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">PluginInstall&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="nerdtree-tabs-のインストール">NERDTree tabs のインストール&lt;/h2>
&lt;p>NERDTree プラグインである NERDTree tabs をインストールしておくと、NERDTree とタブを組み合わせた操作がより直感的になります。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/jistr/vim-nerdtree-tabs">https://github.com/jistr/vim-nerdtree-tabs&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>このプラグインをインストールすると、NERDTree が以下のような振る舞いをするようになります。&lt;/p>
&lt;ul>
&lt;li>Vim 起動時に NERDTree を自動的に開く&lt;/li>
&lt;li>NERDTree 上で &lt;code>t&lt;/code> キーを押してファイルをタブで開いたときに、NERDTree のウィンドウを開いたままにする&lt;/li>
&lt;/ul>
&lt;p>NERDTree tabs プラグインも、NERDTree 本体と同様に、Vundle を使って簡単にインストールすることができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">call&lt;/span> &lt;span class="nx">vundle&lt;/span>#&lt;span class="nx">begin&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; NERDTree 本体&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Plugin&lt;/span> &lt;span class="s1">&amp;#39;preservim/nerdtree&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; NERDTree tabs プラグイン&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Plugin&lt;/span> &lt;span class="s1">&amp;#39;jistr/vim-nerdtree-tabs&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">call&lt;/span> &lt;span class="nx">vundle&lt;/span>#&lt;span class="nx">end&lt;/span>&lt;span class="p">()&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように &lt;code>.vimrc&lt;/code> に記述しておき、以下のようにインストールします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">BundleInstall&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="nerdtree-の使い方の基本">NERDTree の使い方の基本&lt;/h2>
&lt;p>まずは、以下のコマンドでツリーを開きます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">NERDTree&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>次のコマンドを使うと、ツリーをトグル開閉できます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:NERDTreeToggle
&lt;/code>&lt;/pre>&lt;p>ツリーにカーソルがある状態で以下のような操作を行うことができます。&lt;/p>
&lt;ul>
&lt;li>全般的な操作
&lt;ul>
&lt;li>&lt;strong>&lt;code>q&lt;/code>&lt;/strong>: NERDTree を終了&lt;/li>
&lt;li>&lt;strong>&lt;code>?&lt;/code>&lt;/strong>: Quick ヘルプを表示（もう一度押すとツリー表示に戻る）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ファイルのオープン
&lt;ul>
&lt;li>&lt;strong>&lt;code>Enter&lt;/code>&lt;/strong> or &lt;strong>&lt;code>o&lt;/code>&lt;/strong>: ファイルを開く&lt;/li>
&lt;li>&lt;strong>&lt;code>s&lt;/code>&lt;/strong>: 縦分割してファイルを開く&lt;/li>
&lt;li>&lt;strong>&lt;code>i&lt;/code>&lt;/strong>: 横分割してファイルを開く&lt;/li>
&lt;li>&lt;strong>&lt;code>t&lt;/code>&lt;/strong>: タブでファイルを開く
&amp;mdash; ディレクトリの展開、移動&lt;/li>
&lt;li>&lt;strong>&lt;code>Enter&lt;/code>&lt;/strong> or &lt;strong>&lt;code>o&lt;/code>&lt;/strong>: ディレクトリを開く／閉じる&lt;/li>
&lt;li>&lt;strong>&lt;code>O&lt;/code>&lt;/strong>: ディレクトリを再帰的に開く&lt;/li>
&lt;li>&lt;strong>&lt;code>x&lt;/code>&lt;/strong>: 親ディレクトリを閉じる&lt;/li>
&lt;li>&lt;strong>&lt;code>u&lt;/code>&lt;/strong>: 表示上のルートを 1 つ上位へ移動&lt;/li>
&lt;li>&lt;strong>&lt;code>U&lt;/code>&lt;/strong>: 表示上のルートを 1 つ上位へ移動（開いたディレクトリをキープしたまま）&lt;/li>
&lt;li>&lt;strong>&lt;code>C&lt;/code>&lt;/strong>: 表示上のルートをカーソルのあるディレクトリに移動&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="nerdtree-を使用したファイル操作">NERDTree を使用したファイル操作&lt;/h2>
&lt;p>NERDTree のウィンドウ上で、&lt;code>m&lt;/code> を入力すると、ファイルやディレクトリを操作するためのメニューが表示されます。&lt;/p></description></item><item><title>Vim でカーソル位置の単語をファイル名としてファイルを開く (gf, Ctrl-w gf, Cgtrl-w f)</title><link>https://maku77.github.io/p/sok5efu/</link><pubDate>Thu, 03 May 2012 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/sok5efu/</guid><description>&lt;h2 id="ファイル名にカーソルを当ててファイルを開く">ファイル名にカーソルを当ててファイルを開く&lt;/h2>
&lt;p>Vim でファイル名っぽい文字列にカーソルを置いて、&lt;strong>&lt;code>gf&lt;/code>&lt;/strong> と入力すると、その名前のファイルを開くことができます（&lt;strong>Goto File&lt;/strong> と覚えてください）。
同じウィンドウでファイルを開くため、その前に編集していたファイルの内容は一時的に見えなくなってしまうのですが、&lt;strong>&lt;code>CTRL-o&lt;/code>&lt;/strong> とすれば元のファイルに簡単に戻ってくることができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>gf&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>カーソルの下のファイルを開く&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>CTRL-o&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>元のファイルに戻る&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>元のファイルに戻るときに、&lt;code>CTRL-o&lt;/code> の代わりに &lt;strong>&lt;code>CTRL-^&lt;/code>&lt;/strong> を使用することもできます。
&lt;code>CTRL-^&lt;/code> は直前のファイルに戻るという意味のコマンドで、続けて入力すると、2 つのファイルの間で行ったり来たりすることができます。&lt;/p>
&lt;h2 id="新しいタブで開く">新しいタブで開く&lt;/h2>
&lt;p>カーソル下のファイル名でファイルを開くときに &lt;code>gf&lt;/code> を使用するとカレントバッファで開きますが、&lt;strong>&lt;code>Ctrl-w&lt;/code>&lt;/strong> を組み合わせることで、新しいタブや、ウィンドウ分割でファイルを開くことができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>gf&lt;/code>&lt;/td>
 &lt;td>カレントバッファに開く&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>Ctrl-w gf&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>新しいタブで開く &lt;strong>（オススメ）&lt;/strong>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>Ctrl-w f&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>ウィンドウを分割して開く&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>若干複雑な操作になりますが、このコマンドには慣れておくことをお勧めします。&lt;/p></description></item><item><title>Vim で行を逆順にソートする (:sort!)</title><link>https://maku77.github.io/p/g9cckyt/</link><pubDate>Tue, 27 Dec 2011 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/g9cckyt/</guid><description>&lt;p>ex コマンドで実行できる &lt;code>sort&lt;/code> は、デフォルトでは昇順に行ソートしますが、末尾に &lt;code>!&lt;/code> を付加することで逆順（降順）ソートすることが可能です。
行範囲を指定して逆順ソートを実行するには、例えば下記のようにします。&lt;/p>
&lt;ol>
&lt;li>&lt;code>Shift + v&lt;/code> でビジュアルモードに入り、行を選択&lt;/li>
&lt;li>&lt;code>:sort!&lt;/code> と入力して &lt;code>Enter&lt;/code>&lt;/li>
&lt;/ol></description></item><item><title>Vim の文字の削除方法まとめ（テキストオブジェクト） (d, delete)</title><link>https://maku77.github.io/p/qbmdoef/</link><pubDate>Wed, 21 Dec 2011 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/qbmdoef/</guid><description>&lt;p>Vim にはテキストを削除ための様々なキーコンビネーションが用意されています。
最初はたくさんあって面食らいますが、体系的な組み合わせになっているので意外と覚えやすいです。
これらのキーコンビネーションを使いこなすと、他のエディタでは決して真似できない爆速テキスト編集が可能になります。&lt;/p>
&lt;h2 id="ノーマルモードでの削除">ノーマルモードでの削除&lt;/h2>
&lt;h3 id="削除の基本">削除の基本&lt;/h3>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>x&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>1 文字削除（カーソル位置）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>X&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>1 文字削除（カーソルの前）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;strong>&lt;code>dd&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>1 行削除（&lt;strong>&lt;code>cc&lt;/code>&lt;/strong> だとさらにインサートモードに移行）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>D&lt;/code>&lt;/td>
 &lt;td>行末まで削除（&lt;code>C&lt;/code> だとさらにインサートモードに移行）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>このキーマッピングだけは基本的な削除操作として覚える必要があります。
特に重要そうなものはハイライトしています。&lt;/p>
&lt;p>削除系操作の詳細は、&lt;strong>&lt;code>:help deleting&lt;/code>&lt;/strong> で確認できます。&lt;/p>
&lt;h3 id="オペレーター--移動コマンド">オペレーター + 移動コマンド&lt;/h3>
&lt;p>&lt;strong>&lt;code>d&lt;/code>&lt;/strong> オペレーターに続けて、1 文字の &lt;strong>移動コマンド&lt;/strong> を指定することで、&lt;strong>カーソル位置からその位置までのテキスト&lt;/strong> を削除することができます。
例えば、次の単語へジャンプする移動コマンド &lt;code>w&lt;/code> と組み合わせて、&lt;code>dw&lt;/code> と入力すると、カーソル位置から次の単語までのテキストを削除することができます。
下記は、&lt;code>d&lt;/code> オペレーターと移動コマンドの組み合わせによるテキスト削除の例です。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>d0&lt;/code>&lt;/td>
 &lt;td>カーソル位置から行頭まで削除&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>d^&lt;/code>&lt;/td>
 &lt;td>カーソル位置から行頭まで削除（インデントは残す）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>d$&lt;/code>&lt;/td>
 &lt;td>カーソル位置から行末まで削除（&lt;code>D&lt;/code> でも可）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>dw&lt;/code>&lt;/td>
 &lt;td>カーソル位置から単語の末尾まで削除（スペースも削除）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>de&lt;/code>&lt;/td>
 &lt;td>カーソル位置から単語の末尾まで削除（スペースは残す）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>db&lt;/code>&lt;/td>
 &lt;td>カーソル位置から単語の先頭まで削除&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>df{X}&lt;/code>&lt;/td>
 &lt;td>カーソル位置から文字 &lt;code>{X}&lt;/code> まで削除&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>dF{X}&lt;/code>&lt;/td>
 &lt;td>カーソル位置から文字 &lt;code>{X}&lt;/code> まで削除（前方検索）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>&lt;code>w&lt;/code>、&lt;code>e&lt;/code>、&lt;code>b&lt;/code> といった単語単位の移動コマンドは、日本語文章では、連続する「漢字」「ひらがな」「カタカナ」を 1 つの単語とみなしてジャンプします。
日本語文章でもスペースを単語の区切りとしてジャンプするには、大文字の &lt;strong>&lt;code>W&lt;/code>&lt;/strong>、&lt;strong>&lt;code>E&lt;/code>&lt;/strong>、&lt;strong>&lt;code>B&lt;/code>&lt;/strong> を使用します。&lt;/p></description></item><item><title>Vim でカーソル位置の単語を取得する (&lt;cword>)</title><link>https://maku77.github.io/p/f448waf/</link><pubDate>Mon, 06 Jun 2011 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/f448waf/</guid><description>&lt;p>Vim 内で、カーソル位置の単語は &lt;strong>&lt;code>&amp;lt;cword&amp;gt;&lt;/code>&lt;/strong> で参照することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: カーソル位置の単語を表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:!&lt;/span>&lt;span class="nx">echo&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">cword&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: F4 キーでカーソル位置の単語を検索できるようにする&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nnoremap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">F4&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">grep&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">cword&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> ./*&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim でカーソル位置の文字の文字コードを表示する (:ascii)</title><link>https://maku77.github.io/p/6bpmxey/</link><pubDate>Mon, 06 Jun 2011 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/6bpmxey/</guid><description>&lt;p>Vim エディタのノーマルモードで、&lt;/p>
&lt;pre tabindex="0">&lt;code>ga
&lt;/code>&lt;/pre>&lt;p>と入力すると、カーソル位置の文字コード（10進数、16進数、8進数）を表示できます。
例えば、&lt;code>A&lt;/code> という文字にカーソルを置いて &lt;code>ga&lt;/code> と入力すると、以下のように表示されます。&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;A&amp;gt; 65, Hex 11, Octal 101
&lt;/code>&lt;/pre>&lt;p>コマンドモードから次のように入力することでも同様のことを行えます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">ascii&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim でディレクトリエクスプローラー (Explore) を使用してファイルを開く (:E, :Ve, :He)</title><link>https://maku77.github.io/p/928ca4t/</link><pubDate>Thu, 19 May 2011 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/928ca4t/</guid><description>&lt;h2 id="explore-とは">Explore とは&lt;/h2>
&lt;p>Vim にはデフォルトで、ファイルを操作するのディレクトリエクスプローラー機能 (&lt;strong>Explore&lt;/strong>) が付属しています。
Explorer じゃなくて、Explore なので注意してください（最後の r がないです）。&lt;/p>
&lt;h2 id="カレントディレクトリを起点にして-explore-を起動する">カレントディレクトリを起点にして Explore を起動する&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">E&lt;/span>[&lt;span class="nx">xplore&lt;/span>] &lt;span class="c">&amp;#34; カレントバッファで開く（:vi . でも同様）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">Ve&lt;/span>[&lt;span class="nx">xplore&lt;/span>] &lt;span class="c">&amp;#34; 左右に分割して開く&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">He&lt;/span>[&lt;span class="nx">xplore&lt;/span>] &lt;span class="c">&amp;#34; 上下に分割して開く&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="編集中のファイルのあるディレクトリを起点にして-explore-を起動する">編集中のファイルのあるディレクトリを起点にして Explore を起動する&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">E&lt;/span> %:&lt;span class="nx">h&lt;/span> &lt;span class="c">&amp;#34; :vi %:h でも同様&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">Ve&lt;/span> %:&lt;span class="nx">h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">He&lt;/span> %:&lt;span class="nx">h&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="explore-でブックマーク機能を使用する">Explore でブックマーク機能を使用する&lt;/h2>
&lt;p>ディレクトリエクスプローラーを &lt;code>:Explore&lt;/code> コマンドで起動した後で、以下のようにして各ディレクトリをブックマークすることができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mb&lt;/span> &lt;span class="c">&amp;#34; カレントディレクトリを ブックマークする&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">qb&lt;/span> &lt;span class="c">&amp;#34; ブックマークの一覧を表示する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">gb&lt;/span> &lt;span class="c">&amp;#34; 最後に ブックマークしたディレクトリへ移動&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span>gb &lt;span class="c">&amp;#34; 1番目の ブックマークへ移動&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span>gb &lt;span class="c">&amp;#34; 2番目の ブックマークへ移動&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">mB&lt;/span> &lt;span class="c">&amp;#34; 最後の ブックマークを削除する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span>mB &lt;span class="c">&amp;#34; 1番目の ブックマークを削除する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span>mB &lt;span class="c">&amp;#34; 2番目の ブックマークを削除する&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>qb&lt;/code> コマンドで ブックマークの一覧を表示すると分かりますが、ブックマークは単純にアルファベット順にソートされて保存されます（追加した順番には並びません）。
上記のコマンドの中で指定する番号は、このソートされた順に並べられたブックマークの番号なので注意してください。&lt;/p>
&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../p/8qeuow8/">Vim 上でディレクトリツリーを表示する (NERDTree)&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim/Neovim で制御文字（改行、タブ文字、行末のスペースなど）を表示する (list, listchars)</title><link>https://maku77.github.io/p/s596qii/</link><pubDate>Sun, 24 Apr 2011 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/s596qii/</guid><description>&lt;h2 id="list-モードとは">list モードとは&lt;/h2>
&lt;p>Vim/Neovim の &lt;strong>&lt;code>list&lt;/code>&lt;/strong> モードを有効にすると、テキストファイル内の制御文字や空白文字（タブや末尾のスペースなど）を視覚的に表示することができます。
例えば、プログラミング言語の Python などでコーディングを行っているときは、タブ文字と通常のスペースを意識して使い分けなければいけないので、このような非表示文字を目に見えるように設定しておくことには意味があります。
もちろん通常の文章を記述するときにも、行末の余計なスペースなどを簡単に見つけられるようになるので、この設定は常に有効にしておくことをオススメします。&lt;/p>
&lt;p>list モードは、Vim でも Neovim でもデフォルトでは無効になっているため、明示的に有効化する必要があります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">list&lt;/span> &lt;span class="c">&amp;#34;制御文字を表示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">nolist&lt;/span> &lt;span class="c">&amp;#34;制御文字を非表示&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>次のように行範囲（全ての行）を指定して &lt;code>list&lt;/code> コマンドを実行すると、一時的に制御文字を確認することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>% &lt;span class="nx">list&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="制御文字の表示方法の設定-listchars">制御文字の表示方法の設定 (listchars)&lt;/h2>
&lt;p>タブや改行などの制御文字をどのように表示するかは、&lt;strong>&lt;code>listchars (lcs)&lt;/code>&lt;/strong> オプションで設定します。&lt;/p>
&lt;h3 id="デフォルト設定">デフォルト設定&lt;/h3>
&lt;p>&lt;code>listchars&lt;/code> のデフォルト値は Vim と Neovim で次のように異なっています。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Vim のデフォルト設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">listchars&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">eol&lt;/span>:$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Neovim のデフォルト設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">listchars&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">tab&lt;/span>:&lt;span class="p">&amp;gt;&lt;/span>\ &lt;span class="p">,&lt;/span>&lt;span class="nx">trail&lt;/span>:&lt;span class="p">-,&lt;/span>&lt;span class="nx">nbsp&lt;/span>:&lt;span class="p">+&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Vim のデフォルト設定では、タブ文字が &lt;strong>&lt;code>^I &lt;/code>&lt;/strong>、改行が &lt;strong>&lt;code>$&lt;/code>&lt;/strong> で表示されます。
Neovim のデフォルト設定では、タブ文字が &lt;strong>&lt;code>&amp;gt; &lt;/code>&lt;/strong>、行末のスペースが &lt;strong>&lt;code>-&lt;/code>&lt;/strong> で表示されます。&lt;/p>
&lt;h3 id="listchars-の設定例">listchars の設定例&lt;/h3>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (~/.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; 制御文字の設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">listchars&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">tab&lt;/span>:&lt;span class="p">&amp;gt;&lt;/span>.&lt;span class="p">,&lt;/span>&lt;span class="nx">trail&lt;/span>:&lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">eol&lt;/span>:$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">list&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (~/.config/nvim/init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 制御文字の表示設定（方法 1）オススメ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">listchars&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">tab&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;gt;.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trail&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;_&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">eol&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;$&amp;#34;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 制御文字の表示設定（方法 2）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">listchars&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;tab:&amp;gt;.,trail:_,eol:$&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;ul>
&lt;li>各設定の意味
&lt;ul>
&lt;li>&lt;strong>&lt;code>tab:&amp;gt;.&lt;/code>&lt;/strong> では、タブの 1 文字目を &lt;code>&amp;gt;&lt;/code> で、2 文字目以降を &lt;code>.&lt;/code> で表示するよう指示しています。&lt;/li>
&lt;li>&lt;strong>&lt;code>trail:_&lt;/code>&lt;/strong> では、行末の半角スペースを &lt;code>_&lt;/code> で表示するよう指示しています。&lt;/li>
&lt;li>&lt;strong>&lt;code>eol:$&lt;/code>&lt;/strong> では、行末に &lt;code>$&lt;/code> を表示するよう指示しています。&lt;/li>
&lt;li>&lt;strong>&lt;code>set list&lt;/code>&lt;/strong> では、list モードを有効化して制御文字を表示するよう指示しています。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="listchars-オプションのヘルプ">listchars オプションのヘルプ&lt;/h2>
&lt;p>どんな非表示文字を表示できるかは、&lt;strong>&lt;code>:help 'listchars'&lt;/code>&lt;/strong> のヘルプで確認できます。
下記はヘルプ内容の抜粋です。&lt;/p></description></item><item><title>Vim 内で grep を実行して見つかったファイルへジャンプする (:vimgrep, :grep)</title><link>https://maku77.github.io/p/c4q8amz/</link><pubDate>Mon, 13 Sep 2010 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/c4q8amz/</guid><description>&lt;h2 id="内部-grep-internal-grep-と外部-grep-external-grep">内部 grep (internal grep) と外部 grep (external grep)&lt;/h2>
&lt;p>Vim には自身に搭載されている検索機能を実行する &lt;strong>内部 &lt;code>grep&lt;/code>&lt;/strong> と、外部の grep 系コマンドを実行する &lt;strong>外部 &lt;code>grep&lt;/code>&lt;/strong> の機能が存在します。&lt;/p>
&lt;ul>
&lt;li>内部 grep を起動するコマンド &amp;hellip; &lt;strong>&lt;code>:vim&lt;/code>&lt;/strong>（&lt;strong>&lt;code>:vimgrep&lt;/code>&lt;/strong> の省略形）&lt;/li>
&lt;li>外部 grep を起動するコマンド &amp;hellip; &lt;strong>&lt;code>:grep&lt;/code>&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h2 id="vimgrep-による検索内部-grep">&lt;code>:vimgrep&lt;/code> による検索（内部 grep）&lt;/h2>
&lt;h3 id="vimgrep-の概要">&lt;code>:vimgrep&lt;/code> の概要&lt;/h3>
&lt;p>内部 grep（&lt;code>:vim&lt;/code> あるいは &lt;code>:vimgrep&lt;/code>）は、Vim に組み込まれた grep 機能を使用するため、どの OS 上でも共通の振る舞いの検索を実行することができます。
検索にヒットした行は Vim 内部の &lt;strong>QuickFix List&lt;/strong> という配列データに追加され、そこから見つけた行にジャンプすることができます（参考: &lt;code>:help quickfix.txt&lt;/code>）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">書式&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:vim /{pattern}/[g][j] {file} ...&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;ul>
&lt;li>&lt;strong>&lt;code>g&lt;/code>&lt;/strong> オプション &amp;hellip; 同じ行の中にパターンに一致する部分が複数あった場合に、QuickFix List に別々に追加します。デフォルトでは、同じ行内で複数回検索にヒットしても、その行は 1 度だけ QuickFix List に追加されます。多くのケースでは、このオプションを指定する必要はないでしょう。&lt;/li>
&lt;li>&lt;strong>&lt;code>j&lt;/code>&lt;/strong> オプション &amp;hellip; デフォルトでは検索で最初にマッチした行にカーソルが移動します。&lt;code>j&lt;/code> オプションを付けると、カーソルの位置は移動しません。&lt;/li>
&lt;/ul>
&lt;h3 id="基本的な検索">基本的な検索&lt;/h3>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 現在開いているファイルを grep&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:vim /hoge/ %&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;strong>&lt;code>%&lt;/code>&lt;/strong> は現在開いているファイル名を表します。&lt;/p></description></item><item><title>Vim/Neovim で大文字と小文字を区別しないで検索する (ignorecase)</title><link>https://maku77.github.io/p/mfcba2q/</link><pubDate>Tue, 18 May 2010 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/mfcba2q/</guid><description>&lt;p>Vim で &lt;strong>&lt;code>/&lt;/code>&lt;/strong> や &lt;strong>&lt;code>:vimgrep&lt;/code>&lt;/strong> による検索を行うときに、大文字・小文字を区別するかどうかの設定は下記のように行います（デフォルトでは大文字・小文字を区別します）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">ignorecase&lt;/span> &lt;span class="c">&amp;#34;大文字と小文字を区別しない （ic と省略可能）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">noignorecase&lt;/span> &lt;span class="c">&amp;#34;大文字と小文字を区別する （noic と省略可能）（デフォルト）&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ignorecase&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- 大文字と小文字を区別しない&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ignorecase&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span> &lt;span class="c1">-- 大文字と小文字を区別する（デフォルト）&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>この設定にかかわらず、検索時に大文字・小文字を区別するかを指定するには、検索パターンの中に &lt;strong>&lt;code>\c&lt;/code>&lt;/strong> や &lt;strong>&lt;code>\C&lt;/code>&lt;/strong> を含めるようにします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">検索時に大文字・小文字を区別を指定&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/\&lt;span class="nx">cfoo&lt;/span> &lt;span class="c">&amp;#34; 大文字、小文字を区別せずに foo を検索&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/\&lt;span class="nx">Cfoo&lt;/span> &lt;span class="c">&amp;#34; 大文字、小文字を区別して foo を検索&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>検索パターン中の &lt;code>\c&lt;/code> と &lt;code>\C&lt;/code> は、先頭で指定する必要はなく、パターン内のどこにあっても構いません。&lt;/p>
&lt;p>検索に関する設定方法の詳細は下記を参照してください。&lt;/p>
&lt;ul>
&lt;li>参考: &lt;a href="../p/v4cuc9g/">Vim の検索に関する設定 (&lt;code>ignorecase&lt;/code>, &lt;code>smartcase&lt;/code>, &lt;code>wrapscan&lt;/code>, &lt;code>hlsearch&lt;/code>, &lt;code>incsearch&lt;/code>)&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim で Java や C/C++ のコメント記述に便利な formatoptions の設定</title><link>https://maku77.github.io/p/i9y5wsd/</link><pubDate>Tue, 05 Jan 2010 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/i9y5wsd/</guid><description>&lt;p>Vim で次のように設定しておくと、C 言語などのコメントを記述しているときに、改行を入力するだけで自動的にコメントの途中の記号を挿入してくれるようになります。&lt;/p>
&lt;pre tabindex="0">&lt;code>:set formatoptions=tcqro
&lt;/code>&lt;/pre>&lt;p>下記、それぞれのオプションの意味です。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>t&lt;/code>&lt;/strong> &amp;hellip; （&lt;code>textwidth&lt;/code> の値を超える）長いテキスト行を入力した場合に自動で改行する。&lt;/li>
&lt;li>&lt;strong>&lt;code>c&lt;/code>&lt;/strong> &amp;hellip; （&lt;code>textwidth&lt;/code> の値を超える）長いコメント行を入力した場合に自動で改行しコメントリーダーを挿入する。&lt;/li>
&lt;li>&lt;strong>&lt;code>q&lt;/code>&lt;/strong> &amp;hellip; &lt;kbd>gq&lt;/kbd> コマンドで選択部分をコメント整形する。&lt;/li>
&lt;li>&lt;strong>&lt;code>r&lt;/code>&lt;/strong> &amp;hellip; &lt;kbd>Enter&lt;/kbd> 入力時にコメントリーダーを挿入する。&lt;/li>
&lt;li>&lt;strong>&lt;code>o&lt;/code>&lt;/strong> &amp;hellip; &lt;kbd>o&lt;/kbd> あるいは &lt;kbd>O&lt;/kbd> で行を挿入した場合にコメントリーダーを挿入する。&lt;/li>
&lt;/ul>
&lt;p>例えば、Java のコメントを編集中に、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="o">/**&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">This&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">comment&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ここまで入力して改行すると、自動的に以下のように行の先頭にアスタリスクが挿入されます。
これは、&lt;code>formatoptions&lt;/code> に &lt;strong>r&lt;/strong> を指定した効果です。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="o">/**&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">This&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">comment&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim/Neovim ですでに入力されているタブをスペースに変換する (:retab)</title><link>https://maku77.github.io/p/w4qm7ok/</link><pubDate>Mon, 07 Dec 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/w4qm7ok/</guid><description>&lt;p>&lt;a href="../p/8okf7d3/">&lt;code>expandtab&lt;/code> オプション&lt;/a>が設定されていると、TAB キーを押したときに、タブ文字の代わりに &lt;code>tabstop&lt;/code> で設定した数のスペースが挿入されます。
すでに入力されているタブ文字を、スペースに変換するには、&lt;code>expandtab&lt;/code> モードを有効にしたうえで、&lt;strong>&lt;code>:retab&lt;/code>&lt;/strong> コマンドを実行します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: タブ文字を 4 文字分のスペースに置換する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">expandtab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">tabstop&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line hl">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">retab&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../p/8okf7d3/">タブ文字の設定 (&lt;code>tabstop&lt;/code>, &lt;code>expandtab&lt;/code>, &lt;code>softtabstop&lt;/code>)&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim/Neovim で選択した範囲を自動インデントする (=)</title><link>https://maku77.github.io/p/pxpgasg/</link><pubDate>Mon, 07 Dec 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/pxpgasg/</guid><description>&lt;h2 id="自動インデントの実行">自動インデントの実行&lt;/h2>
&lt;p>ソースコードの一部分のインデントが崩れているような場合は、以下のように自動整形することができます。&lt;/p>
&lt;ol>
&lt;li>対象となるコードをビジュアルモードで行選択（&lt;strong>&lt;code>Shift-V&lt;/code> + 行選択&lt;/strong>）。&lt;/li>
&lt;li>&lt;strong>&lt;code>=&lt;/code>&lt;/strong> と入力&lt;/li>
&lt;/ol>
&lt;h2 id="自動インデントを整形するときに使用するプログラムを指定する">自動インデントを整形するときに使用するプログラムを指定する&lt;/h2>
&lt;p>&lt;code>=&lt;/code> コマンドで自動インデントを行う場合は、デフォルトでは Vim 内部の整形プログラムが使用されますが、任意のインデント用プログラムを使用するように設定することもできます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">equalprg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="sr">/usr/&lt;/span>&lt;span class="nx">local&lt;/span>&lt;span class="sr">/bin/&lt;/span>&lt;span class="nx">indent&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../p/oe94dkh/">自動インデントモードを有効にする (&lt;code>autoindent&lt;/code>, &lt;code>smartindent&lt;/code>, &lt;code>cindent&lt;/code>)&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vimの設定: モードラインを使ってファイル単位で書式設定する (modeline)</title><link>https://maku77.github.io/p/39fajvt/</link><pubDate>Mon, 07 Dec 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/39fajvt/</guid><description>&lt;h2 id="モードラインとは">モードラインとは&lt;/h2>
&lt;p>テキストファイルの先頭か末尾に、&lt;strong>モードライン (modeline)&lt;/strong> という特殊なコメントを埋め込んでおくと、そのファイルにだけ適用する Vim の設定を行うことができます。
複数人でフォーマットを揃えて１つのテキストファイルを編集したい場合などに便利です。
例えば C 言語のソースファイルなら以下のようなコメントを書いておくことで、そのファイルのインデント幅やタブ使用の有無を支持することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>/* vim: set shiftwidth=4:tabstop=4:expandtabs */
&lt;/code>&lt;/pre>&lt;p>モードライン (modeline) の機能を有効にするには、以下のように設定しておく必要があります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">modeline&lt;/span> &lt;span class="c">&amp;#34;モードラインを有効にする&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">modelines&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="c">&amp;#34;上端、下端から何行までをモードラインと認識するか&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ファイルの先頭や末尾に記述するモードラインは、下記のようなフォーマットで記述します。&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;lt;任意のテキスト&amp;gt;&amp;lt;スペース&amp;gt;vim: set ...:&amp;lt;任意のテキスト&amp;gt;
&lt;/code>&lt;/pre>&lt;p>例えば、一行の文字数を 79 文字に制限して自動的に折り返すようにするには、テキストの最終行などに、以下のように記述しておきます。&lt;/p>
&lt;pre tabindex="0">&lt;code># vim: set tw=79 fo=aM:
&lt;/code>&lt;/pre>&lt;p>行頭と行末には任意のテキストを入れられるので、C++ のコメントとして以下のように記述することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>/* vim: set tw=79 fo=aM: */
&lt;/code>&lt;/pre>&lt;p>モードラインの行末に任意のテキストを追加しなくてよい場合（行末までを Vim の設定値とみなしてよい場合）は、&lt;code>set&lt;/code> の記載と、最後の &lt;code>:&lt;/code> を省略することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code># vim: tw=79 fo=aM
&lt;/code>&lt;/pre>&lt;h2 id="モードラインの設定例">モードラインの設定例&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 79 文字で自動的に折り返す&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl"># vim: tw=79 fo=aqwB ai&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>各オプションの意味は以下のようになっています。&lt;/p>
&lt;ul>
&lt;li>&lt;code>tw=79&lt;/code> (textwidth) &amp;ndash; 一行の文字数を 79 文字（＋改行）に制限&lt;/li>
&lt;li>&lt;code>fo=aqwB&lt;/code> (formatoptions)
&lt;ul>
&lt;li>&lt;code>a&lt;/code> &amp;hellip; テキスト入力するごとに textwidth に設定した文字数で自動折り返し&lt;/li>
&lt;li>&lt;code>q&lt;/code> &amp;hellip; &lt;code>gq&lt;/code> コマンドで、選択範囲をフォーマットする&lt;/li>
&lt;li>&lt;code>w&lt;/code> &amp;hellip; 行末にスペースがある場合のみ、自動で行連結しようとする&lt;/li>
&lt;li>&lt;code>B&lt;/code> &amp;hellip; 行を結合したときに日本語の間にはスペースを入れない&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>ai&lt;/code> (autoindent) &amp;ndash; 改行するときに自動的に現在の行と同じだけインデントする&lt;/li>
&lt;/ul>
&lt;p>&lt;code>formatoptions&lt;/code> で、&lt;code>a&lt;/code> と一緒に &lt;code>m&lt;/code> を指定すると、文字挿入時に日本語などのマルチバイト文字でも自動改行するようになりますが、&lt;code>a&lt;/code> オプションと相性がよくないので、&lt;code>m&lt;/code> は指定しない方がよいです。
例えば、カーソルより後ろの日本語文章が自動改行されると、改行された後ろのテキストに余計なスペースが入ったり、1 文字ごとに改行されてしまったりします。
なので、日本語テキストを整形したい場合は、整形したい領域を選択し、&lt;code>gq&lt;/code> で手動整形するのがよいです。&lt;/p></description></item><item><title>Vim で折りたたみ機能 (folding) を使用する</title><link>https://maku77.github.io/p/sxouvi5/</link><pubDate>Tue, 17 Nov 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/sxouvi5/</guid><description>&lt;p>Vim の折りたたみ (folding) 機能を使用すると、特定の行を折りたたんで表示する（一時的に非表示にする）ことができます。&lt;/p>
&lt;h2 id="指定した範囲を折り畳む">指定した範囲を折り畳む&lt;/h2>
&lt;p>折りたたみ機能によって、どのような範囲を折りたたむかは、&lt;code>foldmethod&lt;/code> というオプションで制御されています。&lt;/p>
&lt;pre tabindex="0">&lt;code>:set foldmethod=manual （デフォルト）
&lt;/code>&lt;/pre>&lt;p>としておくと、任意の選択範囲を折りたたみ領域として扱うことができるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: Visual mode で選択した部分を折り畳む&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">1. Visual mode (Shift-v) で領域選択
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. zf&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: カーソル位置から、指定した文字列が見つかるところまでを折り畳む&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">zf /string&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>一度 &lt;code>zf&lt;/code> コマンドによって折りたたんだ領域は、&lt;code>zo&lt;/code> で展開、&lt;code>zc&lt;/code> で折りたたみを行えるようになります。&lt;/p>
&lt;h2 id="インデント単位で折りたたむ">インデント単位で折りたたむ&lt;/h2>
&lt;p>折りたたみの単位の設定を &lt;code>indent&lt;/code> にすると、各種折りたたみコマンドの対象がインデント単位になります。&lt;/p>
&lt;pre tabindex="0">&lt;code>:set foldmethod=indent
&lt;/code>&lt;/pre>&lt;h2 id="折りたたみ機能に関するコマンド一覧">折りたたみ機能に関するコマンド一覧&lt;/h2>
&lt;h3 id="折りたたみと展開カーソル位置の要素に対して">折りたたみと展開（カーソル位置の要素に対して）&lt;/h3>
&lt;pre tabindex="0">&lt;code>zc -- 折りたたみ (Close one fold under the cursor)
zo -- 展開（一段階）(Open one fold under the cursor)
zO -- 展開（すべて）(Open all folds under the cursor recursively)
&lt;/code>&lt;/pre>&lt;h3 id="折りたたみと展開ファイル全体の要素に対して">折りたたみと展開（ファイル全体の要素に対して）&lt;/h3>
&lt;pre tabindex="0">&lt;code>zm -- 折りたたみ（一段階） (Fold more)
zM -- 折りたたみ（すべて） (Close all folds)
zr -- 展開（一段階） (Reduce folding)
zR -- 展開（すべて） (Open all folds)
&lt;/code>&lt;/pre>&lt;h1 id="折りたたみ単位でジャンプ">折りたたみ単位でジャンプ&lt;/h1>
&lt;pre tabindex="0">&lt;code>zj -- move to the next fold
zk -- move to the previous fold
&lt;/code>&lt;/pre>&lt;h2 id="折りたたみ関連の設定">折りたたみ関連の設定&lt;/h2>
&lt;p>折りたたみ機能に関する設定は、&lt;code>foldXXXXX&lt;/code> という名前のオプションを使って行います。&lt;/p></description></item><item><title>Vim で挿入モード（インサートモード）のまま実行できる操作の一覧</title><link>https://maku77.github.io/p/hk22h6b/</link><pubDate>Wed, 11 Nov 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/hk22h6b/</guid><description>&lt;p>挿入モード（インサートモード）でのテキストを編集中は、下記のようなショートカットキーを使用することができます。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>CTRL-U&lt;/code>&lt;/strong> &amp;hellip; 挿入モードでの入力をすべて削除&lt;/li>
&lt;li>&lt;strong>&lt;code>CTRL-W&lt;/code>&lt;/strong> &amp;hellip; カーソル直前の単語を削除&lt;/li>
&lt;li>&lt;strong>&lt;code>CTRL-V&lt;/code>&lt;/strong> &lt;strong>&lt;code>数値&lt;/code>&lt;/strong> &amp;hellip; 指定した文字コードの文字を入力（例: &lt;code>CTRL-V&lt;/code> &lt;code>123&lt;/code> → &lt;code>}&lt;/code>）&lt;/li>
&lt;li>&lt;strong>&lt;code>CTRL-V&lt;/code>&lt;/strong> &lt;strong>&lt;code>Tab&lt;/code>&lt;/strong> &amp;hellip; タブ文字を入力（&lt;code>Tab&lt;/code> キーで半角スペースを入力する設定になっていてもタブ文字を入力できる）&lt;/li>
&lt;li>&lt;strong>&lt;code>CTRL-Y&lt;/code>&lt;/strong> &amp;hellip; カーソルの上（上の行）にある 1 文字をコピーして入力&lt;/li>
&lt;li>&lt;strong>&lt;code>CTRL-E&lt;/code>&lt;/strong> &amp;hellip; カーソルの下（下の行）にある 1 文字をコピーして入力&lt;/li>
&lt;li>&lt;strong>&lt;code>CTRL-R&lt;/code>&lt;/strong> &lt;strong>&lt;code>レジスタ&lt;/code>&lt;/strong> &amp;hellip; 指定したレジスタ内のテキストを挿入（例: &lt;code>CTRL-R&lt;/code> &lt;code>*&lt;/code> → 直前にヤンクした内容を貼り付け）&lt;/li>
&lt;li>&lt;code>CTRL-[&lt;/code> &amp;hellip; 挿入モードを抜ける&lt;/li>
&lt;li>&lt;code>CTRL-O&lt;/code> &lt;code>コマンド&lt;/code> &amp;hellip; 通常モードのコマンドを一回だけ実行（例: &lt;code>CTRL-O&lt;/code> &lt;code>$&lt;/code> → 挿入モードのままカーソルを行末へ移動）&lt;/li>
&lt;li>&lt;code>CTRL-P&lt;/code> &amp;hellip; 入力補完候補の表示（逆方向に選択）&lt;/li>
&lt;li>&lt;code>CTRL-N&lt;/code> &amp;hellip; 入力補完候補の表示（順方向に選択）&lt;/li>
&lt;/ul>
&lt;p>挿入モード中にカーソルを移動させるには、カーソルキーを使用します。&lt;/p></description></item><item><title>Vim でスペルチェックを有効にする</title><link>https://maku77.github.io/p/fweeaqx/</link><pubDate>Mon, 14 Sep 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/fweeaqx/</guid><description>&lt;p>Vim 7.0 からは、組み込みの辞書によるスペルチェッカーが搭載されています。
スペルチェッカーを有効にするには次のようにします。&lt;/p>
&lt;pre tabindex="0">&lt;code>:set spell
&lt;/code>&lt;/pre>&lt;p>スペルチェックに使用する言語を指定するには以下のように指定します。
デフォルトは &lt;code>en&lt;/code> (English) です。&lt;/p>
&lt;pre tabindex="0">&lt;code>:set spelllang=en,da,de,it
&lt;/code>&lt;/pre>&lt;p>複数の言語を指定したい場合は、上記のようにカンマで区切って指定します。
いずれかの言語の辞書に該当する単語が見つかれば、スペルエラーになりません。&lt;/p></description></item><item><title>Vim/Neovim でカーソル位置の行や列をハイライト表示する (cursorline, cursorcolumn)</title><link>https://maku77.github.io/p/osrx94g/</link><pubDate>Wed, 09 Sep 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/osrx94g/</guid><description>&lt;h2 id="カーソル行カーソル列のハイライト表示">カーソル行／カーソル列のハイライト表示&lt;/h2>
&lt;p>Vim/Neovim 内で &lt;strong>&lt;code>cursorline&lt;/code>&lt;/strong> / &lt;strong>&lt;code>cursorcolumn&lt;/code>&lt;/strong> オプションを有効化することで、カーソル行やカーソル列の背景色がハイライトされるようになります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">cursorline&lt;/span> &lt;span class="c">&amp;#34;カーソル行をハイライト&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">cursorcolumn&lt;/span> &lt;span class="c">&amp;#34;カーソル列をハイライト&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>両方とも設定しておくと、ひと目でカーソル位置が分かるようになるのでオススメです。
特に、コーディングで Vim を使っているようなケースでは、列方向のハイライト (&lt;code>cursorcolumn&lt;/code>) を有効にしておくと、インデントのずれなどを発見しやすくなります。&lt;/p>
&lt;p>背景色を変更したい場合は &lt;strong>&lt;code>highlight&lt;/code>&lt;/strong> コマンドで &lt;strong>&lt;code>CursorLine&lt;/code>&lt;/strong> と &lt;strong>&lt;code>CursorColumn&lt;/code>&lt;/strong> というカラーグループの色を設定します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">highlight&lt;/span> &lt;span class="nx">CursorLine&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>#&lt;span class="m">0000&lt;/span>A&lt;span class="m">0&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">blue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">highlight&lt;/span> &lt;span class="nx">CursorColumn&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>#&lt;span class="m">0000&lt;/span>A&lt;span class="m">0&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">blue&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="設定例">設定例&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- カーソル行／カーソル列を強調表示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cursorline&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">cursorcolumn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- カーソル行／カーソル列の背景色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_set_hl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;CursorLine&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">bg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;#0044ee&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctermbg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;blue&amp;#34;&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_set_hl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;CursorColumn&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">bg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;#002299&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctermbg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;blue&amp;#34;&lt;/span> &lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) / Neovim (init.vim) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; カーソル行／カーソル列を強調表示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">cursorline&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">cursorcolumn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; カーソル行／カーソル列の背景色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">highlight&lt;/span> &lt;span class="nx">CursorLine&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#0044ee&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">blue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">highlight&lt;/span> &lt;span class="nx">CursorColumn&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#002299&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">blue&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim/Neovim で行番号を表示する (number)</title><link>https://maku77.github.io/p/t8o6tum/</link><pubDate>Wed, 09 Sep 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/t8o6tum/</guid><description>&lt;h2 id="行番号の表示非表示">行番号の表示・非表示&lt;/h2>
&lt;p>Vim/Neovim で各行の行頭に行番号を表示するには、&lt;strong>&lt;code>:set number&lt;/code>&lt;/strong> を実行します。
逆に、行番号を非表示にするには、&lt;strong>&lt;code>:set nonumber&lt;/code>&lt;/strong> を実行します（デフォルト）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">行番号を表示する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">number&lt;/span> &lt;span class="c">&amp;#34; 行番号を表示する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">nonumber&lt;/span> &lt;span class="c">&amp;#34; 行番号を表示しない (default)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>行番号の背景色や文字色を変更するには &lt;strong>&lt;code>highlight (hi)&lt;/code>&lt;/strong> コマンドで、&lt;strong>&lt;code>LineNr&lt;/code>&lt;/strong> ハイライト・グループを設定します。
カーソル行の行番号を別の色で表示したいときは、&lt;strong>&lt;code>CursorLineNr&lt;/code>&lt;/strong> ハイライト・グループも設定します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">行番号の背景色／文字色を変更する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">hi&lt;/span> &lt;span class="nx">LineNr&lt;/span> &lt;span class="nx">guifg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#cc2244&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#551100&lt;/span> &lt;span class="nx">ctermfg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">black&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">gray&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">hi&lt;/span> &lt;span class="nx">CursorLineNr&lt;/span> &lt;span class="nx">guifg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#dd3355&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#771100&lt;/span> &lt;span class="nx">ctermfg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">black&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">gray&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="設定例">設定例&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) / Neovim (init.vim) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; 行番号を表示する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">number&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; 行番号の色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">hi&lt;/span> &lt;span class="nx">LineNr&lt;/span> &lt;span class="nx">guifg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#cc2244&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#551100&lt;/span> &lt;span class="nx">ctermfg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">black&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">gray&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">hi&lt;/span> &lt;span class="nx">CursorLineNr&lt;/span> &lt;span class="nx">guifg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#dd3355&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mh">#772211&lt;/span> &lt;span class="nx">ctermfg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">black&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">gray&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 行番号を表示する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">number&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 行番号の色&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_set_hl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;LineNr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">fg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;#cc2244&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">bg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;#551100&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctermfg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;black&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctermbg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;gray&amp;#34;&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_set_hl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;CursorLineNr&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">fg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;#dd3355&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">bg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;#772211&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctermfg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;black&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ctermbg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;gray&amp;#34;&lt;/span> &lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim で編集中のファイルと拡張子だけが異なるファイルを開く（Hello.cpp を編集中に Hello.h を開く）</title><link>https://maku77.github.io/p/j3w2dpc/</link><pubDate>Wed, 22 Jul 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/j3w2dpc/</guid><description>&lt;p>例えば、現在 &lt;code>Hello.cpp&lt;/code> という名前のファイルを編集しているときに、&lt;code>:e[dit]&lt;/code> コマンドで &lt;code>Hello.h&lt;/code> という拡張子部分だけが異なるファイルを開きたくなったときは、以下のように開くことができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>.&lt;span class="nx">h&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>%&amp;lt;&lt;/code>&lt;/strong> は、現在編集中の &lt;strong>ファイルの名前から拡張子を除いた部分&lt;/strong> に置換されます（ちなみに単純に &lt;strong>&lt;code>%&lt;/code>&lt;/strong> とすると、ファイル名全体になります）。&lt;/p>
&lt;p>次のいずれかの方法で値を確認できます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:!&lt;/span>&lt;span class="nx">echo&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">echo&lt;/span> &lt;span class="nx">expand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;%&amp;lt;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>Hello.cpp&lt;/code> というファイルを編集中であれば、&lt;code>%&amp;lt;&lt;/code> は &lt;code>Hello&lt;/code> となるため、下記 2 つは同じ結果になります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> %&lt;span class="p">&amp;lt;&lt;/span>.&lt;span class="nx">h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="nx">Hello&lt;/span>.&lt;span class="nx">h&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>この例のようにファイル名が短いときはあまり意味がないかもしれませんが、ファイル名が長いときには便利です。
ここでは &lt;code>:e[dit]&lt;/code> コマンドの例を示しましたが、他のコマンドでも &lt;code>%&lt;/code> や &lt;code>%&amp;lt;&lt;/code> を使ってファイル名を参照することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 現在編集中のファイルのファイル名に .back をつけてバックアップ&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">w&lt;/span> %.&lt;span class="nx">back&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim/Neovim でステータスラインの表示内容を設定する (statusline, laststatus)</title><link>https://maku77.github.io/p/oegfris/</link><pubDate>Fri, 06 Feb 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/oegfris/</guid><description>&lt;figure class="xImage">
 &lt;img style="" width="644" height="351" src="../p/oegfris/img-001.png" alt="/p/oegfris/img-001.png" />
&lt;/figure>

&lt;p>Vim 画面下部のステータスラインには、編集中のファイル名や、カーソル位置の情報などを表示することができます。&lt;/p>
&lt;h2 id="ステータスラインのヘルプを表示する">ステータスラインのヘルプを表示する&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">help&lt;/span> &lt;span class="s1">&amp;#39;statusline&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">オプションに関するヘルプを参照するときは、正式には上記のようにパラメータをシングルクォートで囲んで指定します。ただし、&lt;code>statusline&lt;/code> に関してはシングルクォートで囲まなくても同じ項目が表示されます。&lt;/span>
&lt;/div>

&lt;h2 id="ステータスラインに表示する内容を設定する">ステータスラインに表示する内容を設定する&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">laststatus&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="c">&amp;#34;常に Status Line を表示する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">statusline&lt;/span> {&lt;span class="nx">format&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="laststatus-オプション">laststatus オプション&lt;/h3>
&lt;p>&lt;strong>&lt;code>laststatus&lt;/code>&lt;/strong> オプションでは、ステータスラインの表示条件を指定します。&lt;/p>
&lt;ul>
&lt;li>&lt;code>laststatus&lt;/code> の値:
&lt;ul>
&lt;li>&lt;code>0&lt;/code> &amp;hellip; ステータスラインを表示しない&lt;/li>
&lt;li>&lt;code>1&lt;/code> &amp;hellip; ウィンドウを分割したときにのみステータスラインを表示する（Vimのデフォルト）&lt;/li>
&lt;li>&lt;code>2&lt;/code> &amp;hellip; 常にステータスラインを表示する（Neovim のデフォルト）&lt;/li>
&lt;li>&lt;code>3&lt;/code> &amp;hellip; 常にステータスラインを表示する。ウィンドウが分割されても 1 つのステータスラインを共有する（Neovim 専用）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Neovim では &lt;code>laststatus&lt;/code> の新しい設定値として &lt;code>3&lt;/code>（グローバルステータスライン）が追加されており、ウィンドウを分割した場合にもステータスラインが 1 つだけ表示されるようになります。&lt;/p>
&lt;h3 id="statusline-オプション">statusline オプション&lt;/h3>
&lt;p>&lt;strong>&lt;code>statusline&lt;/code>&lt;/strong> オプションでは、ステータスラインに表示する内容を指定します。
例えば、下記のようなパラメーター入りの文字列を指定します。&lt;/p>
&lt;pre tabindex="0">&lt;code>%F%m%h%w\ %&amp;lt;[ENC=%{&amp;amp;fenc!=&amp;#39;&amp;#39;?&amp;amp;fenc:&amp;amp;enc}]\ [FMT=%{&amp;amp;ff}]\ [TYPE=%Y]\ %=[CODE=0x%02B]\ [POS=%l/%L(%02v)]
&lt;/code>&lt;/pre>&lt;p>&lt;code>%&lt;/code> で始まる各パラメータは次のような値に置換されて表示されます（詳細は、Vim のヘルプ &lt;code>:help 'statusline'&lt;/code> を参照してください）。&lt;/p>
&lt;ul>
&lt;li>&lt;code>%F&lt;/code> &amp;hellip; ファイルのフルパス。&lt;/li>
&lt;li>&lt;code>%m&lt;/code> &amp;hellip; 編集されているなら [+]。リードオンリーなら [-]。&lt;/li>
&lt;li>&lt;code>%h&lt;/code> &amp;hellip; Help buffer なら [HELP] と表示。&lt;/li>
&lt;li>&lt;code>%w&lt;/code> &amp;hellip; Preview window なら [PREVIEW] と表示。&lt;/li>
&lt;li>&lt;code>%&amp;lt;&lt;/code> &amp;hellip; ウィンドウの横幅が縮まってもここまでは表示することを保証。&lt;/li>
&lt;li>&lt;code>%{...}&lt;/code> &amp;hellip; 式評価。中に Vimscript の式を記述できる。
&lt;ul>
&lt;li>&lt;code>%{&amp;amp;fenc!=''?&amp;amp;fecn:&amp;amp;enc}&lt;/code>&lt;br>fileencoding が設定されていればその値、設定されていなければ encoding を表示。&lt;/li>
&lt;li>&lt;code>%{&amp;amp;ff}&lt;/code>&lt;br>fileformat の値を表示。%{&amp;amp;fileformat} の省略形。(dos, unix, mac)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>%=&lt;/code> &amp;hellip; これ以降の内容を右寄せで表示。&lt;/li>
&lt;li>&lt;code>%Y&lt;/code> &amp;hellip; filetype の値を表示。通常はこれに対応する syntax file が読み込まれているはず。&lt;/li>
&lt;li>&lt;code>%02B&lt;/code> &amp;hellip; カーソル位置の文字コードを16進数で表示。&lt;/li>
&lt;li>&lt;code>%l/%L&lt;/code> &amp;hellip; 現在行 / 総行数&lt;/li>
&lt;li>&lt;code>%02v&lt;/code> &amp;hellip; カーソル位置の桁番号。&lt;/li>
&lt;/ul>
&lt;h3 id="設定例">設定例&lt;/h3>
&lt;p>下記は、Vim/Neovim の設定ファイルでの具体的な設定例です。&lt;/p></description></item><item><title>Vim/Neovim で全角スペースを見えるように表示する</title><link>https://maku77.github.io/p/preoa93/</link><pubDate>Tue, 03 Feb 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/preoa93/</guid><description>&lt;h2 id="全角スペースを表示するための設定">全角スペースを表示するための設定&lt;/h2>
&lt;p>Vim の設定ファイルに下記のように記述しておくと、全角スペースに背景色が付いて判別できるようになります。
ここでは、GVim の場合に背景色として &lt;code>darkgray&lt;/code> を指定していますが、好みの背景色に変更して適用してください。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (~/.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Show double byte spaces&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">hi&lt;/span> &lt;span class="nx">DoubleByteSpace&lt;/span> &lt;span class="nx">term&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nb">underline&lt;/span> &lt;span class="nx">ctermbg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">blue&lt;/span> &lt;span class="nx">guibg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">darkgray&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">match&lt;/span> &lt;span class="nx">DoubleByteSpace&lt;/span> &lt;span class="sr">/　/&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (~/.config/nvim/init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Show double byte spaces&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.cmd&lt;/span>&lt;span class="s">[[
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> hi DoubleByteSpace term=underline ctermbg=blue guibg=darkgray
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s"> match DoubleByteSpace /　/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">]]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../p/s596qii/">制御文字（改行、タブ文字、行末のスペースなど）を表示する (&lt;code>list&lt;/code>, &lt;code>listchars&lt;/code>)&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim/Neovim のキーマップ例: ショートカットキーでタブを切り替える</title><link>https://maku77.github.io/p/ksmwhv8/</link><pubDate>Tue, 03 Feb 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ksmwhv8/</guid><description>&lt;p>Vim で &lt;code>:tabnew&lt;/code> を使ってタブを開いた後は、タブの切り替えを &lt;code>:tabnext&lt;/code>、&lt;code>:tabprevious&lt;/code> を使って行いますが、いちいちこのコマンドを入力するのは面倒なので、ショートカットキーでタブの切り替えを行えるようにしてみます。
ここでは、&lt;code>Ctrl + J&lt;/code> か &lt;code>Ctrl + H&lt;/code> で前のタブへ移動、&lt;code>Ctrl + K&lt;/code> か &lt;code>Ctrl + M&lt;/code> で後ろのタブへ移動できるように設定しています。
ブラウザのタブ切り替えのように、&lt;code>Ctrl + TAB&lt;/code> や &lt;code>Ctrl + Shift + TAB&lt;/code> を割り当てることも可能ですが、これらのキーコンビネーションは端末によっては機能しないことがあります。&lt;/p>
&lt;h2 id="vim-の場合">Vim の場合&lt;/h2>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Change the tab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">Tab&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">tabnext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">tabnext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">tabnext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">S&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">Tab&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">tabprevious&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">tabprevious&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">nmap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> :&lt;span class="nx">tabprevious&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ちなみに、&lt;strong>&lt;code>nmap&lt;/code>&lt;/strong> ではノーマルモード用のキーマップ設定を行います。
インサートモードでも同様にタブ切り替えを行えるようにするには、下記のように追加で &lt;strong>&lt;code>imap&lt;/code>&lt;/strong> でキーマップ定義を行います。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; Change the tab (for insert mode)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">Tab&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">ESC&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>:&lt;span class="nx">tabnext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">l&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">ESC&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>:&lt;span class="nx">tabnext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">k&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">ESC&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>:&lt;span class="nx">tabnext&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">S&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">Tab&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">ESC&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>:&lt;span class="nx">tabprevious&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">ESC&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>:&lt;span class="nx">tabprevious&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">imap&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">C&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">h&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">ESC&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>:&lt;span class="nx">tabprevious&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">CR&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ただし、インサートモードでは、&lt;code>Ctrl + H&lt;/code> はデフォルトで BackSpace としてマッピングされているので、その機能を上書きしてまでキーマッピングを行うほどのものではないでしょう。
&lt;code>nmap&lt;/code> を使ってノーマルモードのマッピングをしておくだけで十分便利です。&lt;/p></description></item><item><title>Vim/Neovim の検索に関する設定 (ignorecase, smartcase, wrapscan, hlsearch, incsearch)</title><link>https://maku77.github.io/p/v4cuc9g/</link><pubDate>Thu, 29 Jan 2009 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/v4cuc9g/</guid><description>&lt;h2 id="大文字小文字の区別-ignorecase">大文字・小文字の区別 (&lt;code>ignorecase&lt;/code>)&lt;/h2>
&lt;p>&lt;a href="../p/u4gw7c3/">&lt;code>/{pattern}&lt;/code> によるカレントファイル内の検索&lt;/a>や、&lt;a href="../p/c4q8amz/">&lt;code>:vimgrep&lt;/code> による grep 検索&lt;/a>では、&lt;strong>デフォルトでは大文字・小文字を区別&lt;/strong> してパターンマッチングが行われます。
&lt;strong>&lt;code>ignorecase&lt;/code>&lt;/strong> オプションを設定すると、大文字・小文字を区別せずに検索できるようになります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">ignorecase&lt;/span> &lt;span class="c">&amp;#34;大文字・小文字を区別しないで検索&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">noignorecase&lt;/span> &lt;span class="c">&amp;#34;大文字・小文字を区別して検索 (default)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ignorecase&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- 大文字・小文字を区別しないで検索&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ignorecase&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span> &lt;span class="c1">-- 大文字・小文字を区別して検索 (default)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>ignorecase&lt;/code> に加えて &lt;strong>&lt;code>smartcase&lt;/code>&lt;/strong> オプションを設定すると、検索パターンに大文字を含むときだけ大文字・小文字を区別して検索できるようになります。オススメです。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">ignorecase&lt;/span> &lt;span class="nx">smartcase&lt;/span> &lt;span class="c">&amp;#34; 検索パターンに大文字を含むときは大文字・小文字を区別して検索&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">ignorecase&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- 大文字・小文字を区別しないで検索&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">smartcase&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- 検索パターンに大文字を含むときは大文字・小文字を区別して検索&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="ファイル末尾まで検索したら先頭から検索-wrapscan">ファイル末尾まで検索したら先頭から検索 (&lt;code>wrapscan&lt;/code>)&lt;/h2>
&lt;p>&lt;code>n&lt;/code> キーを連打して検索パターンにヒットした箇所に次々とジャンプしていくとき、デフォルトでは最後にヒットした文字列まで到達すると、次はファイルの先頭に戻って検索されます。
&lt;strong>&lt;code>nowrapscan&lt;/code>&lt;/strong> オプションを設定しておくと、ファイルの末尾でカーソルのジャンプが停止します（&lt;strong>&lt;code>下まで検索しましたが該当箇所はありません&lt;/code>&lt;/strong> と表示されます）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">wrapscan&lt;/span> &lt;span class="c">&amp;#34;折り返し検索 ON (default)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">nowrapscan&lt;/span> &lt;span class="c">&amp;#34;折り返し検索 OFF&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">wrapscan&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- 折り返し検索 ON (default)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">wrapscan&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span> &lt;span class="c1">-- 折り返し検索 OFF&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="検索結果のハイライト-hlsearch">検索結果のハイライト (&lt;code>hlsearch&lt;/code>)&lt;/h2>
&lt;p>&lt;strong>&lt;code>hlsearch&lt;/code>&lt;/strong> オプションがセットされた状態で検索を行うと、検索にヒットした部分がすべてハイライト表示されるようになります。
Neovim ではデフォルトで有効になっています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">hlsearch&lt;/span> &lt;span class="c">&amp;#34;検索結果のハイライト ON&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">nohlsearch&lt;/span> &lt;span class="c">&amp;#34;検索結果のハイライト OFF (default)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">hlsearch&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- 検索結果のハイライト ON (default)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">hlsearch&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">false&lt;/span> &lt;span class="c1">-- 検索結果のハイライト OFF&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>hlsearch&lt;/code> オプションを設定していると、検索結果のハイライト表示が出っぱなしになって邪魔になることがあります。
その場合は、&lt;strong>&lt;code>:nohl&lt;/code>&lt;/strong> コマンドを実行してハイライト表示を消すことができます。&lt;/p></description></item><item><title>Vim のアンドゥ操作とリドゥ操作 (u, Ctrl-r, undolevels)</title><link>https://maku77.github.io/p/rihibef/</link><pubDate>Thu, 13 Nov 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/rihibef/</guid><description>&lt;h2 id="アンドゥリドゥの操作方法">アンドゥ／リドゥの操作方法&lt;/h2>
&lt;p>Vim でアンドゥ (Undo) 操作、リドゥ (Redo) 操作を行うには、下記のコマンドを使用します。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>u&lt;/code>&lt;/strong> &amp;hellip; アンドゥ&lt;/li>
&lt;li>&lt;strong>&lt;code>Ctrl-r&lt;/code>&lt;/strong> &amp;hellip; リドゥ（アンドゥによって取り消された操作を復旧）&lt;/li>
&lt;/ul>
&lt;h2 id="アンドゥ回数の設定">アンドゥ回数の設定&lt;/h2>
&lt;p>アンドゥ操作のレベル（制限回数）を変更するには &lt;strong>&lt;code>undolevels&lt;/code>&lt;/strong> オプションを設定します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">undolevels&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">300&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Linux や Windows では、&lt;code>undolevels&lt;/code> の規定値は 1000 なので、通常は変更する必要はないでしょう。&lt;/p></description></item><item><title>Vim でカーソル位置の数字をインクリメント／デクリメントする</title><link>https://maku77.github.io/p/in6mo7q/</link><pubDate>Wed, 12 Nov 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/in6mo7q/</guid><description>&lt;h2 id="カーソル位置の数字をインクリメントデクリメントする">カーソル位置の数字をインクリメント／デクリメントする&lt;/h2>


&lt;figure class="xImage">
 &lt;img style="" width="329" height="78" src="../p/in6mo7q/img-001.gif" alt="/p/in6mo7q/img-001.gif" />
&lt;/figure>

&lt;p>数字を表すテキストにカーソルを合わせて &lt;kbd>CTRL-A&lt;/kbd> と入力すると、その数値をインクリメントする（数字を1つ増やす）ことができます。
逆に &lt;kbd>CTRL-X&lt;/kbd> でデクリメントする（数字を1つ減らす）ことができます。&lt;/p>
&lt;ul>
&lt;li>&lt;kbd>CTRL-A&lt;/kbd>: カーソル位置の数値をインクリメントする&lt;/li>
&lt;li>&lt;kbd>CTRL-X&lt;/kbd>: カーソル位置の数値をデクリメントする&lt;/li>
&lt;/ul>
&lt;p>数値のプレフィックスに &lt;code>0&lt;/code> が付いていれば 8 進数、&lt;code>0x&lt;/code> や &lt;code>0X&lt;/code> が付いていれば 16 進数とみなしてインクリメント／デクリメントしてくれます。
例えば、10進数、8進数、16進数と思われる数値は、それぞれ下記のようにインクリメントされます。&lt;/p>
&lt;ul>
&lt;li>&lt;code>17&lt;/code> → &lt;code>18&lt;/code>&lt;/li>
&lt;li>&lt;code>017&lt;/code> → &lt;code>020&lt;/code>&lt;/li>
&lt;li>&lt;code>0xFF&lt;/code> → &lt;code>0x100&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;kbd>CTRL-A&lt;/kbd>、&lt;kbd>CTRL-X&lt;/kbd> コマンドのプレフィックスとして数値を与える（先に数値を入力する）と、その数値分だけ足したり引いたりすることができます。&lt;/p>
&lt;h2 id="選択範囲の数字をまとめてインクリメントデクリメントする">選択範囲の数字をまとめてインクリメント／デクリメントする&lt;/h2>
&lt;p>&lt;kbd>SHIFT-V&lt;/kbd> や &lt;kbd>CTRL-V&lt;/kbd> のビジュアルモードで選択した範囲にある数値をまとめてインクリメントすることもできます。
下記のデモでは、&lt;kbd>SHIFT-V&lt;/kbd> で複数行を選択してから、&lt;kbd>CTRL-A&lt;/kbd> で複数の数値をまとめてインクリメントしています。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="" width="329" height="78" src="../p/in6mo7q/img-002.gif" alt="/p/in6mo7q/img-002.gif" />
&lt;/figure>

&lt;p>応用例として、&lt;kbd>CTRL-A&lt;/kbd> と入力する前に &lt;kbd>g&lt;/kbd> を入力しておくと、次のようにそれぞれの数値に足される数自体がインクリメントされていきます。
連番からなる数値の羅列を作りたいときに便利です。&lt;/p>


&lt;figure class="xImage">
 &lt;img style="" width="329" height="78" src="../p/in6mo7q/img-003.gif" alt="/p/in6mo7q/img-003.gif" />
&lt;/figure></description></item><item><title>Vim/Neovim で GUI モード用のフォントを設定する (guifont)</title><link>https://maku77.github.io/p/e3xdbxe/</link><pubDate>Mon, 12 May 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/e3xdbxe/</guid><description>&lt;h2 id="フォント設定ダイアログを開く">フォント設定ダイアログを開く&lt;/h2>
&lt;p>nvim-qt や gVim などの GUI モードで動作する Vim/Neovim 環境では、次のようにフォント設定ダイアログを開くことができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">guifont&lt;/span>&lt;span class="p">=&lt;/span>*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ターミナル上で &lt;code>vim&lt;/code> や &lt;code>nvim&lt;/code> を動かしているときは、そのターミナルで設定されているフォントがそのまま使われるので、この設定は必要ありません。&lt;/p>
&lt;p>ダイアログでフォントの設定を行った後は、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">guifont&lt;/span>?
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>として &lt;code>guifont&lt;/code> オプションに具体的にどのような設定値が格納されているかを確認することができます。
この設定値を、設定ファイルに記述しておけば、次回の起動時からは自動的にそのフォント設定が反映されます。&lt;/p>
&lt;h2 id="設定ファイルでフォントを指定する">設定ファイルでフォントを指定する&lt;/h2>
&lt;h3 id="neovim-nvim-qt-の場合">Neovim (nvim-qt) の場合&lt;/h3>
&lt;p>GUI モードの Neovim（&lt;code>nvim-qt&lt;/code> など）のフォントを設定するには、コマンドラインモードでの &lt;code>:set guifont=Consolas:h14&lt;/code> に相当する下記のようなコードを実行すれば OK です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (~/.config/nvim/init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">guifont&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Consolas:h14&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>現在の環境が GUI モードで動作しているかどうかを調べるには、&lt;code>vim.fn.has('gun_running')&lt;/code> の値が 1 かどうかをチェックします。
下記は、&lt;a href="https://github.com/yuru7/HackGen/releases">HackGen フォント&lt;/a>を使用するように設定した例です。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (~/.config/nvim/init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- GUI モード（nvim-qt など）のフォント設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- 白源フォント (HackGen Console NF) を下記からダウンロードしておく。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- Nerd Fonts が組み込まれているのでリッチな UI 表示に使える。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- https://github.com/yuru7/HackGen/releases&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">if&lt;/span> &lt;span class="n">vim.fn&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;gui_running&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="kr">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.o&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">guifont&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;HackGen Console NF:h14&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">end&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>さらに Windows かどうかで分岐させたいときは、&lt;code>vim.fn.has(&amp;quot;win64&amp;quot;) == 1&lt;/code> による条件分岐を追加してください。&lt;/p></description></item><item><title>Vim で記号（引用符など）で囲まれた範囲のテキストを削除する</title><link>https://maku77.github.io/p/bbsprto/</link><pubDate>Sun, 06 Apr 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/bbsprto/</guid><description>&lt;h2 id="引用符で囲まれた文字を一気に削除する">引用符で囲まれた文字を一気に削除する&lt;/h2>
&lt;p>例えば、以下のようなテキストがあった場合、&lt;/p>
&lt;pre tabindex="0">&lt;code>AAA &amp;#34;BBB&amp;#34; CCC
&lt;/code>&lt;/pre>&lt;p>カーソルを &lt;code>&amp;quot;BBB&amp;quot;&lt;/code> のどこかに合わせた状態で、&lt;/p>
&lt;p>&lt;kbd>d&lt;/kbd>&lt;kbd>i&lt;/kbd>&lt;kbd>&amp;quot;&lt;/kbd> と入力すると、ダブルクォート (&lt;code>&amp;quot;&lt;/code>) で囲まれた文字列 &lt;code>BBB&lt;/code> を全て削除することが出来ます。&lt;/p>
&lt;p>&lt;kbd>d&lt;/kbd>&lt;kbd>a&lt;/kbd>&lt;kbd>&amp;quot;&lt;/kbd> とすると、ダブルクォート (&lt;code>&amp;quot;&lt;/code>) まで含めて削除することができます。&lt;/p>
&lt;h2 id="補足メモ">補足メモ&lt;/h2>
&lt;ul>
&lt;li>最初の文字を &lt;code>c&lt;/code>、&lt;code>y&lt;/code>、&lt;code>v&lt;/code> に変えることにより入力モード、ヤンク、リージョン選択へ変化する。&lt;/li>
&lt;li>1文字目 (&lt;code>d&lt;/code>, &lt;code>c&lt;/code>, &lt;code>y&lt;/code>, &lt;code>v&lt;/code>) の次の &lt;code>i&amp;quot;&lt;/code> とか &lt;code>a&amp;quot;&lt;/code> の部分は範囲を示す text-object というものである。&lt;/li>
&lt;li>詳しくは &lt;code>:h text-objects&lt;/code> で確認できる。&lt;/li>
&lt;/ul></description></item><item><title>Vim でスワップファイルからファイルを復旧する (:recover)</title><link>https://maku77.github.io/p/z8fh4xj/</link><pubDate>Wed, 02 Apr 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/z8fh4xj/</guid><description>&lt;h2 id="スワップファイルの扱い方">スワップファイルの扱い方&lt;/h2>
&lt;p>Vim でファイルを開くと、一時的に編集内容を保持するためのスワップファイルが作成されます。
デフォルトでは、&lt;code>sample.txt&lt;/code> のスワップファイル名は &lt;code>.sample.txt.swp&lt;/code> になります。
Vim を終了すると、スワップファイルは自動的に削除されます。&lt;/p>
&lt;p>以下のようなケースの場合、Vim でファイルを開いたときに前回作成されたスワップファイルが残っている可能性があります。&lt;/p>
&lt;ul>
&lt;li>別の Vim で同じファイルを開いている。&lt;/li>
&lt;li>前回の編集中に Vim がクラッシュした。&lt;/li>
&lt;/ul>
&lt;p>このような場合は、編集開始時に、「読み込み専用で開く」、「復活させる」、といった選択肢が表示されるので、適切な処理を選択してください。
例えば、別の Vim で同時編集しているような場合は、読み込み専用で開くのがよいでしょう。&lt;/p>
&lt;p>スワップファイルからのファイルの復旧を明示的に実行するには下記のようにします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">recover&lt;/span> &lt;span class="nx">sample&lt;/span>.&lt;span class="nx">txt&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>あるいは、起動時に &lt;code>-r&lt;/code> オプションを指定します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> vim -r sample.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="スワップファイルの名前を確認する">スワップファイルの名前を確認する&lt;/h2>
&lt;p>現在編集中のファイルに対応するスワップファイルの名前は、下記のようにして確認することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">swapname&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="スワップファイルに直ちに書き込む">スワップファイルに直ちに書き込む&lt;/h2>
&lt;p>スワップファイルへの書き込みは、時間、あるいはタイプ数によって自動的に実行されますが、明示的に書き込みを実行することもできます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">preserve&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../p/xv4yhu2/">Vim でバックアップファイル／スワップファイル／アンドゥファイルの設定 (backup, swapfile, undofile)&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim設定: バックアップファイル／スワップファイル／アンドゥファイルの設定 (backup, swapfile, undofile)</title><link>https://maku77.github.io/p/xv4yhu2/</link><pubDate>Wed, 02 Apr 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/xv4yhu2/</guid><description>&lt;h2 id="バックアップファイルの設定">バックアップファイルの設定&lt;/h2>
&lt;p>Vim には、編集中のファイルを自動でバックアップするための機能が付いています（デフォルトではバックアップ機能 Off になっています）。
バックアップを有効に設定した状態で、例えば、&lt;code>sample.txt&lt;/code> というファイルを保存すると、同じディレクトリに &lt;code>sample.txt~&lt;/code> というバックアップファイルが生成されます。&lt;/p>
&lt;h3 id="バックアップの-onoff-backup-nobackup">バックアップの ON/OFF (backup, nobackup)&lt;/h3>
&lt;p>バックアップの On/Off を切り替えるには以下のようにします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">backup&lt;/span> &lt;span class="c">&amp;#34;バックアップファイルを生成する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">nobackup&lt;/span> &lt;span class="c">&amp;#34;バックアップファイルを生成しない（デフォルト）&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>現在の設定は、&lt;code>:set backup?&lt;/code> で確認することができます。&lt;/p>
&lt;h3 id="バックアップディレクトリの設定-backupdir">バックアップディレクトリの設定 (backupdir)&lt;/h3>
&lt;p>バックアップファイルは、デフォルトでは編集中のファイルと同じディレクトリに作成されますが、このディレクトリは自由に変更することができます。
バックアップファイルを保存するディレクトリの設定は、&lt;code>backupdir&lt;/code> オプションで行います。
ディレクトリ候補をカンマ (&lt;code>,&lt;/code>) で区切って複数指定することができます。&lt;/p>
&lt;h4 id="バックアップディレクトリの設定例">バックアップディレクトリの設定例&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">backupdir&lt;/span>&lt;span class="p">=&lt;/span>.&lt;span class="p">,~&lt;/span>&lt;span class="sr">/tmp,~/&lt;/span> &lt;span class="c">&amp;#34;デフォルトの設定（カレントディレクトリに作られる）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">backupdir&lt;/span>&lt;span class="p">=~&lt;/span>&lt;span class="sr">/temp/&lt;/span>&lt;span class="nx">backup&lt;/span>/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">backupdir&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">D&lt;/span>:&lt;span class="sr">/y/&lt;/span>&lt;span class="nx">backup&lt;/span>&lt;span class="sr">/vim,C:/&lt;/span>&lt;span class="nx">tmp&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">C&lt;/span>:/&lt;span class="nx">temp&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>backup&lt;/code> オプションを設定してあっても、この &lt;code>backupdir&lt;/code> が指定されていないとバックアップファイルは生成されません。
&lt;code>backupdir&lt;/code> には、存在するディレクトリを指定しておく必要があります。
存在しないディレクトリを指定すると、ファイルを保存したときに、**「E510: バックアップファイルを作れません」**というエラーが発生します。&lt;/p>
&lt;p>&lt;code>backupdir&lt;/code> をカレントディレクトリ以外の特定のディレクトリに設定した場合は、同じファイル名のファイルを編集して保存すると、バックアップディレクトリにあるバックアップファイルは上書きされます。&lt;/p>
&lt;h3 id="バックアップファイル名のプレフィックスを変更する-backupext">バックアップファイル名のプレフィックスを変更する (backupext)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">backupext&lt;/span>&lt;span class="p">=&lt;/span>.&lt;span class="nx">back&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>上記のように設定しておくと、&lt;code>sample.txt&lt;/code> のバックアップファイル名は &lt;code>sample.txt~&lt;/code> ではなく、&lt;code>sample.txt.back&lt;/code> になります。&lt;/p>
&lt;h2 id="スワップファイルの設定">スワップファイルの設定&lt;/h2>
&lt;p>Vim はデフォルトで、ファイルをオープンしたときに、&lt;code>.＜ファイル名＞.swp&lt;/code> というスワップファイルを同じディレクトリに作成します。
これは、万が一 Vim がクラッシュしたときに備えるためのものです。
正常に Vim を閉じた場合は、スワップファイルは自動的に削除されます。&lt;/p>
&lt;h3 id="スワップファイルの-onoff-swapfile-noswapfile">スワップファイルの ON/OFF (swapfile, noswapfile)&lt;/h3>
&lt;p>スワップファイルの機能を On/Off するには以下のようにします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">swapfile&lt;/span> &lt;span class="c">&amp;#34;スワップファイルを生成する（デフォルト）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">noswapfile&lt;/span> &lt;span class="c">&amp;#34;スワップファイルを生成しない&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="スワップファイルを保存するディレクトリの設定-directory">スワップファイルを保存するディレクトリの設定 (directory)&lt;/h3>
&lt;p>スワップファイルの生成場所を、任意のディレクトリに変更することができます。&lt;/p></description></item><item><title>Vim でファイルのエンコーディング形式、改行コードを変更する (fenc, ff)</title><link>https://maku77.github.io/p/g2qyu9b/</link><pubDate>Fri, 01 Feb 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/g2qyu9b/</guid><description>&lt;h2 id="改行コードの変更">改行コードの変更&lt;/h2>
&lt;p>Vim でファイルの改行コードを変更するには、次のように &lt;strong>&lt;code>fileformat (ff)&lt;/code>&lt;/strong> オプションの値を設定してから &lt;code>:w&lt;/code> で保存します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">ff&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">unix&lt;/span> &lt;span class="c">&amp;#34;&amp;lt;NL&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">ff&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">dos&lt;/span> &lt;span class="c">&amp;#34;&amp;lt;CR&amp;gt; &amp;lt;NL&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">ff&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">mac&lt;/span> &lt;span class="c">&amp;#34;&amp;lt;CR&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>現在の改行コードは以下のように確認できます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">ff&lt;/span>?
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="新規ファイルを作成したときの改行コード">新規ファイルを作成したときの改行コード&lt;/h2>
&lt;p>新規ファイルを &lt;code>:vi new.txt&lt;/code> というように作成する場合、デフォルトの改行コードは &lt;strong>&lt;code>fileformats&lt;/code>&lt;/strong> オプションの先頭に記述されたフォーマットになります（末尾に &lt;code>s&lt;/code> が付くことに注意）。
例えば、以下のように &lt;code>.vimrc&lt;/code> ファイルに記述されていると、新規ファイルの改行コードのフォーマットは UNIX 形式 (NL) になります。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">~/.vimrc&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">fileformats&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">unix&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">dos&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">mac&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>また、この設定は、既存のファイルを開くときに認識する改行コードのリストとしても使用されます。
DOS 形式 (CR+NL) の改行コードで保存されたテキストファイルを開くとき、&lt;code>fileformats&lt;/code> に &lt;code>unix&lt;/code> としか設定されていない場合は、&lt;code>unix&lt;/code> 形式の改行コードで開かれてしまうので注意してください。
なので、通常は上記のように扱う可能性のある改行コードを列挙しておきます。&lt;/p>
&lt;h2 id="エンコーディング形式の変更">エンコーディング形式の変更&lt;/h2>
&lt;p>現在編集中のファイルのエンコーディング形式を変更するには、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">fenc&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">utf&lt;/span>&lt;span class="m">-8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">fenc&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">euc&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">jp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">fenc&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">shift_jis&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>のように現在の &lt;code>fileencoding (fenc)&lt;/code> オプションを変更し、&lt;code>:w&lt;/code> で保存します。
指定できるエンコーディング形式名の一覧は、&lt;code>:help encoding-values&lt;/code> で確認することができます。&lt;/p>
&lt;h2 id="新規ファイルを作成したときのエンコーディング形式">新規ファイルを作成したときのエンコーディング形式&lt;/h2>
&lt;p>&lt;code>fileencoding&lt;/code> は、ファイルを保存するときに使用されるエンコーディング形式の設定ですが、新しいファイルを &lt;code>:vi new.txt&lt;/code> のように作成する場合のエンコーディング形式としても使われます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">fileencoding&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">euc&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">jp&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>fileencoding&lt;/code> の値が空の場合は、&lt;code>encoding&lt;/code> の値が使用されます。
&lt;code>utf-8&lt;/code> に設定しておく場合は、全ての文字を正しく処理できるように、Vim が内部で使用するエンコーディング形式を示す &lt;code>encoding&lt;/code> の値も &lt;code>utf-8&lt;/code> に設定しておきましょう。&lt;/p></description></item><item><title>Vim で補完機能を使用してテキストを入力する</title><link>https://maku77.github.io/p/qmuxpqp/</link><pubDate>Fri, 01 Feb 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/qmuxpqp/</guid><description>&lt;h2 id="前後のテキストから補完候補を探して補完入力する">前後のテキストから補完候補を探して補完入力する&lt;/h2>
&lt;p>入力モードでテキストを途中まで入力し、以下のように入力すると、前後のテキストを検索して、一致する文字列を補完入力してくれます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">CTRL&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">P&lt;/span> &lt;span class="c">&amp;#34;前方検索して補完&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">CTRL&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">N&lt;/span> &lt;span class="c">&amp;#34;後方検索して補完&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">CTRL&lt;/span>&lt;span class="p">-&lt;/span>&lt;span class="nx">Y&lt;/span> &lt;span class="c">&amp;#34;決定&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>補完候補のテキストは、デフォルトでは以下の場所から順番に検索されます。&lt;/p>
&lt;ol>
&lt;li>カレントバッファ&lt;/li>
&lt;li>他のウィンドウのファイル&lt;/li>
&lt;li>カレントバッファ以外のバッファ&lt;/li>
&lt;li>アンロードされたバッファ&lt;/li>
&lt;li>tags ファイル&lt;/li>
&lt;li>インクルードされているファイル（#include で指定されているファイル）&lt;/li>
&lt;/ol>
&lt;p>補完候補の検索先を変更するには、&lt;code>complete&lt;/code> オプションを設定します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">complete&lt;/span>&lt;span class="p">=&lt;/span>.&lt;span class="p">,&lt;/span>&lt;span class="nx">w&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">u&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">t&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="c">&amp;#34;Default&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>検索先は、以下のキーを優先順にコンマで区切って指定します。&lt;/p>
&lt;pre tabindex="0">&lt;code>. カレントバッファから検索 ( &amp;#39;wrapscan&amp;#39; の値は無視)
w 別のウィンドウ内のバッファから検索
b バッファリスト内の、現在読み込まれている別のバッファから検索
u バッファリスト内の、現在読み込まれていない別のバッファから検索
U バッファリストにないバッファから検索
k &amp;#39;dictionary&amp;#39; で指定されたファイルから検索
kspell 現在有効化されているスペルチェックを使う
k{dict} {dict} で与えられたファイルから検索。&amp;#34;k&amp;#34; を複数指定してもよい。
 ファイル名はパターンでも指定できる。例: :set cpt=k/usr/dict/*,k~/spanish
s &amp;#39;thesaurus&amp;#39; で指定されたファイルから検索
s{tsr} {tsr} で与えられたファイルから検索。 &amp;#34;s&amp;#34; を複数指定してもよい。
 ファイル名はパターンでも指定できる。
i カレントファイルとインクルードされるファイルから検索
d カレントファイルとインクルードされるファイルから、
 定義された名前またはマクロを検索
] タグ補完
t &amp;#34;]&amp;#34; と同じ
&lt;/code>&lt;/pre>&lt;p>詳しくは、&lt;code>:help 'complete'&lt;/code> で確認することができます。&lt;/p>
&lt;h2 id="補完時に大文字小文字を区別するしない">補完時に大文字小文字を区別する／しない&lt;/h2>
&lt;p>補完入力時の検索も、&lt;code>/&lt;/code> による検索と同様に、下記のオプションで大文字・小文字の扱いを設定します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">ignorecase&lt;/span> &lt;span class="c">&amp;#34;大文字小文字を区別しない&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">noignorecase&lt;/span> &lt;span class="c">&amp;#34;大文字小文字を区別する（デフォルト）&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="辞書ファイルに登録された単語を補完入力する-ctrl-x-ctrl-k">辞書ファイルに登録された単語を補完入力する (CTRL-X CTRL-K)&lt;/h2>
&lt;p>単語のリストを含んだ辞書ファイル（単なるテキストファイル）を用意しておき、それを補完候補として扱うことができます。
辞書ファイルによる補完入力を行うには、下記のように辞書ファイルのパスを設定しておきます。&lt;/p></description></item><item><title>Vim でテキストを中央寄せ／左寄せ／右寄せする</title><link>https://maku77.github.io/p/sh79ewb/</link><pubDate>Tue, 15 Jan 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/sh79ewb/</guid><description>&lt;h2 id="テキストの中央左右寄せ">テキストの中央／左／右寄せ&lt;/h2>
&lt;p>指定した範囲のテキストをセンタリングするには、ex コマンドの &lt;code>:center&lt;/code> を使用します。
同様に、右寄せは &lt;code>:right&lt;/code>、左寄せは &lt;code>:left&lt;/code> で実行できます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:[range] center [width]
:[range] right [width]
:[range] left [margin]
&lt;/code>&lt;/pre>&lt;p>テキスト幅を示す &lt;code>width&lt;/code> オプションを省略した場合は、&lt;code>textwidth&lt;/code> の値が使用されます。
&lt;code>textwidth&lt;/code> が設定されていない場合は、デフォルトで 80 が使用されます。&lt;/p>
&lt;p>&lt;code>:left&lt;/code> の場合だけは、左端からのマージンを指定できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: テキスト全体をセンタリング（テキスト幅は 80 とする）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>% &lt;span class="nx">center&lt;/span> &lt;span class="m">80&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 1 行目から 5 行目までを右寄せ（テキスト幅は 80 とする）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="nx">right&lt;/span> &lt;span class="m">80&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ビジュアルモードで選択した範囲を左寄せ（左端からのマージン 5 文字分）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>`&lt;span class="p">&amp;lt;,&lt;/span>`&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">left&lt;/span> &lt;span class="m">5&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="テキストの両端揃え">テキストの両端揃え&lt;/h2>
&lt;p>Vim に付属している &lt;code>justify.vim&lt;/code> マクロパッケージを使用すると、テキストの両端揃えを実行できます。
&lt;code>justify.vim&lt;/code> は以下のようにロードします。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">source&lt;/span> $&lt;span class="nx">VIMRUNTIME&lt;/span>&lt;span class="sr">/macros/&lt;/span>&lt;span class="nx">justify&lt;/span>.&lt;span class="nx">vim&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ビジュアルモードで範囲選択し、以下のコマンドを入力すると、両端揃えが実行されます。&lt;/p>
&lt;pre tabindex="0">&lt;code>_j
&lt;/code>&lt;/pre></description></item><item><title>Vim で指定した行範囲だけ別のファイルに保存する</title><link>https://maku77.github.io/p/zmnwu3z/</link><pubDate>Tue, 15 Jan 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/zmnwu3z/</guid><description>&lt;h2 id="指定した行範囲を別ファイルに保存">指定した行範囲を別ファイルに保存&lt;/h2>
&lt;p>行範囲を指定して &lt;code>:write&lt;/code> コマンド（省略形は &lt;code>:w&lt;/code>）を使用すると、その範囲だけを抽出して別のファイルに保存することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:[range] write &amp;lt;filename&amp;gt;
&lt;/code>&lt;/pre>&lt;h4 id="例-行番号で指定した反荷を-filetxt-に保存">例: 行番号で指定した反荷を file.txt に保存&lt;/h4>
&lt;pre tabindex="0">&lt;code>:1,5 w file.txt &amp;#34; 1行目から5行目まで保存
:5,$ w file.txt &amp;#34; 5行目から最後まで保存
:.,10 w file.txt &amp;#34; カレント行から10行目まで保存
:.;+5 w file.txt &amp;#34; カレント行から5行下の行までを保存
:g/^Todo/ w D:\todo.txt &amp;#34; Todo で始まる行を D:\todo.txt に保存
&lt;/code>&lt;/pre>&lt;h2 id="ビジュアルモードで選択した範囲を別ファイルに保存">ビジュアルモードで選択した範囲を別ファイルに保存&lt;/h2>
&lt;p>上記は、保存する行範囲を行番号などで指定する方法ですが、実際には次のようにしてビジュアルモードで行範囲を選択してしまうのが早いでしょう。&lt;/p>
&lt;h4 id="例-ビジュアルモードで選択した範囲を-filetxt-に保存">例: ビジュアルモードで選択した範囲を file.txt に保存&lt;/h4>
&lt;ol>
&lt;li>&lt;kbd>SHIFT-V&lt;/kbd> の行選択モードなどで行を選択&lt;/li>
&lt;li>&lt;code>:w file.txt&lt;/code> と入力して &lt;kbd>Enter&lt;/kbd>&lt;/li>
&lt;/ol></description></item><item><title>Vim で文字を入れ替える、行を入れ替える（スワップ操作）</title><link>https://maku77.github.io/p/xr9stqi/</link><pubDate>Tue, 15 Jan 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/xr9stqi/</guid><description>&lt;p>下記は Vim の基本的な編集コマンドの組み合わせ技ですが、使用頻度の高い編集操作なので押さえておきましょう。&lt;/p>
&lt;h2 id="文字のスワップ">文字のスワップ&lt;/h2>
&lt;p>カーソル位置の文字を、1つ後ろの文字と素早く入れ替えるには以下のように実行します。&lt;/p>
&lt;pre tabindex="0">&lt;code>xp
&lt;/code>&lt;/pre>&lt;p>&lt;kbd>x&lt;/kbd> で一文字削除し、&lt;kbd>p&lt;/kbd> でその文字を後ろに貼り付け、という操作をしているだけです。&lt;/p>
&lt;h2 id="行のスワップ">行のスワップ&lt;/h2>
&lt;p>カーソル行を、1つ下の行と素早く入れ替えるには以下のように実行します。&lt;/p>
&lt;pre tabindex="0">&lt;code>ddp
&lt;/code>&lt;/pre>&lt;p>&lt;kbd>d&lt;/kbd>&lt;kbd>d&lt;/kbd> で一行削除し、&lt;kbd>p&lt;/kbd> でその行を下に貼り付け、という操作をしているだけです。&lt;/p></description></item><item><title>Vim のビジュアルモードの基本 (v, Shift-v, Ctrl-v)</title><link>https://maku77.github.io/p/iumn4xs/</link><pubDate>Tue, 15 Jan 2008 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/iumn4xs/</guid><description>&lt;h2 id="ビジュアルモードの開始終了">ビジュアルモードの開始・終了&lt;/h2>
&lt;p>ビジュアルモードは、Vim においてテキストの範囲選択を行うためのモードです。
ノーマルモードで下記のようなコマンドを入力することでビジュアルモードに入ることができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>v&lt;/code>&lt;/td>
 &lt;td>ビジュアルモード（文字単位）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Shift-v&lt;/code>&lt;/td>
 &lt;td>ビジュアルラインモード（行単位）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-v&lt;/code>&lt;/td>
 &lt;td>ビジュアルブロックモード（矩形）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>ビジュアルモードを抜けてノーマルモードに戻るには、&lt;code>Esc&lt;/code> を押すか、何かコマンドを実行します（&lt;code>d&lt;/code> で削除するなど）。
コマンドを実行した場合は、選択した範囲に対してコマンドが適用されます。&lt;/p>
&lt;h2 id="ビジュアルモードの選択範囲を拡張する">ビジュアルモードの選択範囲を拡張する&lt;/h2>
&lt;h3 id="カーソル移動で拡張する">カーソル移動で拡張する&lt;/h3>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="584" height="131" src="../p/iumn4xs/img-001.gif" alt="/p/iumn4xs/img-001.gif" />
&lt;/figure>

&lt;p>ビジュアルモードに入った後で &lt;code>o&lt;/code> を入力することで、カーソル位置を選択領域の先頭、末尾へ交互に移動することができます。
この状態でカーソルを動かすと、選択領域を自在に伸縮させることができます。&lt;/p>
&lt;h3 id="ルールに応じて拡張する">ルールに応じて拡張する&lt;/h3>


&lt;figure class="xImage">
 &lt;img style="border: solid #ccc 2px;" width="584" height="164" src="../p/iumn4xs/img-002.gif" alt="/p/iumn4xs/img-002.gif" />
&lt;/figure>

&lt;p>ビジュアルモードに入った後で、下記のような操作を行うと、ルールに従って選択範囲を拡張することができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>ip&lt;/code>&lt;/td>
 &lt;td>カーソル位置の段落全体を選択&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>ap&lt;/code>&lt;/td>
 &lt;td>カーソル位置の段落全体を選択（後続の空行も含めて選択）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>iw&lt;/code>&lt;/td>
 &lt;td>カーソル位置の単語全体を選択&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>aw&lt;/code>&lt;/td>
 &lt;td>カーソル位置の単語全体を選択（後続のスペースも含めて選択）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>i(&lt;/code>&lt;/td>
 &lt;td>括弧 &lt;code>()&lt;/code> に囲まれた領域を選択&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>a(&lt;/code>&lt;/td>
 &lt;td>括弧 &lt;code>()&lt;/code> に囲まれた領域を選択（括弧も含めて選択）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>i{&lt;/code>&lt;/td>
 &lt;td>括弧 &lt;code>{}&lt;/code> に囲まれた領域を選択&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>a{&lt;/code>&lt;/td>
 &lt;td>括弧 &lt;code>{}&lt;/code> に囲まれた領域を選択（括弧も含めて選択）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>i[&lt;/code>&lt;/td>
 &lt;td>括弧 &lt;code>[]&lt;/code> に囲まれた領域を選択&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>a[&lt;/code>&lt;/td>
 &lt;td>括弧 &lt;code>[]&lt;/code> に囲まれた領域を選択（括弧も含めて選択）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>i&amp;lt;&lt;/code>&lt;/td>
 &lt;td>括弧 &lt;code>&amp;lt;&amp;gt;&lt;/code> に囲まれた領域を選択&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>a&amp;lt;&lt;/code>&lt;/td>
 &lt;td>括弧 &lt;code>&amp;lt;&amp;gt;&lt;/code> に囲まれた領域を選択（括弧を含めて選択）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>例えば、ビジュアルモードで段落全体（空行で区切られた連続する行）を一気に選択するには、その段落内にカーソルがある状態で &lt;code>ip&lt;/code> と入力します。
ノーマルモードから段落全体を選択状態にするには &lt;code>vip&lt;/code> と入力すればよいことになります（上のデモアニメを参照）。
「段落選択はビップ」と覚えます。&lt;/p></description></item><item><title>Vim で省略形を用いたテキスト入力を行えるようにする (abbrevaite)</title><link>https://maku77.github.io/p/qxjtb39/</link><pubDate>Wed, 26 Dec 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/qxjtb39/</guid><description>&lt;h2 id="省略形を登録する">省略形を登録する&lt;/h2>
&lt;p>Vim の &lt;strong>&lt;code>:abbreviate (:ab)&lt;/code>&lt;/strong> コマンドを使うと、テキストの省略形を定義することができます。
省略形のテキストを入力して &lt;code>Space&lt;/code> や &lt;code>TAB&lt;/code>、&lt;code>Enter&lt;/code> キーを押すと、自動的に展開してくれます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:abbreviate ＜省略形＞ ＜展開後のテキスト＞
&lt;/code>&lt;/pre>
&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: YT と入力したら、自動的に Yamada Taro に展開&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:ab YT Yamada Taro&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="展開後のテキストの先頭文字が-space-の場合">展開後のテキストの先頭文字が Space の場合&lt;/h2>
&lt;p>&lt;code>:abbreviate&lt;/code> で指定する展開後のテキストの先頭文字に半角スペースを指定する場合は、その半角スペースが Vim に無視されてしまわないように、明示的に &lt;code>&amp;lt;Space&amp;gt;&lt;/code> と記述する必要があります。&lt;/p>
&lt;pre tabindex="0">&lt;code>:ab hghg &amp;lt;Space&amp;gt;HogeHoge
&lt;/code>&lt;/pre>&lt;h2 id="省略形の一覧表示">省略形の一覧表示&lt;/h2>
&lt;p>登録済みの省略形を一覧表示するには、&lt;code>:abbreviate (:ab)&lt;/code> コマンドをパラメータなしで実行します。&lt;/p>
&lt;pre tabindex="0">&lt;code>:abbreviate
&lt;/code>&lt;/pre></description></item><item><title>Vim/Neovim で設定ファイル (.vimrc, init.lua) を開く、リロードする</title><link>https://maku77.github.io/p/zneoq8d/</link><pubDate>Wed, 26 Dec 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/zneoq8d/</guid><description>&lt;h2 id="設定ファイルを開く">設定ファイルを開く&lt;/h2>
&lt;h3 id="vim-の場合">Vim の場合&lt;/h3>
&lt;p>Vim エディタから設定ファイル（&lt;strong>&lt;code>.vimrc&lt;/code>&lt;/strong> や &lt;strong>&lt;code>.gvimrc&lt;/code>&lt;/strong>）を開くには、下記のようにします（&lt;code>:e&lt;/code> は &lt;code>:edit&lt;/code> コマンドの省略系です）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">設定ファイルを開く（OS に依存しない方法）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> $&lt;span class="nx">MYVIMRC&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> $&lt;span class="nx">MYGVIMRC&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>設定ファイルの名前は Linux (&lt;code>.vimrc&lt;/code>) と Windows (&lt;code>_vimrc&lt;/code>) で微妙に異なりますが、実際に読み込まれた設定ファイルのパスが &lt;strong>&lt;code>$MYVIMRC&lt;/code>&lt;/strong>、&lt;strong>&lt;code>$MYGVIMRC&lt;/code>&lt;/strong> という変数に格納されているので、上記のようにして OS に依存しない方法で設定ファイルを開くことができます（&lt;code>:echo $MYVIMRC&lt;/code> でパスを確認できます）。&lt;/p>
&lt;p>明示的にファイルパスを指定して開きたいときは次のようにします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim の設定ファイルを開く（Linux/macOS の場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="p">~&lt;/span>/.&lt;span class="nx">vimrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="p">~&lt;/span>/.&lt;span class="nx">gvimrc&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim の設定ファイルを開く（Windows の場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="p">~&lt;/span>/&lt;span class="nx">_vimrc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="p">~&lt;/span>/&lt;span class="nx">_gvimrc&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h3 id="neovim-の場合">Neovim の場合&lt;/h3>
&lt;p>Neovim の設定ファイル (&lt;strong>&lt;code>init.lua&lt;/code>&lt;/strong> or &lt;strong>&lt;code>init.vim&lt;/code>&lt;/strong>) を開くには次のようにします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim の設定ファイルを開く（OS に依存しない方法）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> $&lt;span class="nx">MYVIMRC&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>Neovim は、設定ファイルとして &lt;code>init.lua&lt;/code> と &lt;code>init.vim&lt;/code> のどちらかを使うことができます（&lt;code>init.lua&lt;/code> が優先されます）。
実際に読み込まれた設定ファイルのパスが &lt;strong>&lt;code>$MYVIMRC&lt;/code>&lt;/strong> に格納されるので、上記のように設定ファイルを開くことができます（&lt;code>:echo $MYVIMRC&lt;/code> でパスを確認できます）。&lt;/p>
&lt;p>明示的にファイルパスを指定して &lt;code>init.lua&lt;/code> または &lt;code>init.vim&lt;/code> を開きたいときは次のようにします。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim の設定ファイルを開く（Linux/macOS の場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="p">~&lt;/span>&lt;span class="sr">/.config/&lt;/span>&lt;span class="nx">nvim&lt;/span>/&lt;span class="nx">init&lt;/span>.&lt;span class="nx">lua&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="p">~&lt;/span>&lt;span class="sr">/.config/&lt;/span>&lt;span class="nx">nvim&lt;/span>/&lt;span class="nx">init&lt;/span>.&lt;span class="nx">vim&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim の設定ファイルを開く（Windows の場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> %&lt;span class="nx">USERPROFILE&lt;/span>%\&lt;span class="nx">AppData&lt;/span>\&lt;span class="nx">Local&lt;/span>\&lt;span class="nx">nvim&lt;/span>\&lt;span class="nx">init&lt;/span>.&lt;span class="nx">lua&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> %&lt;span class="nx">USERPROFILE&lt;/span>%\&lt;span class="nx">AppData&lt;/span>\&lt;span class="nx">Local&lt;/span>\&lt;span class="nx">nvim&lt;/span>\&lt;span class="nx">init&lt;/span>.&lt;span class="nx">vim&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;ul>
&lt;li>参考: &lt;a href="../p/7mabuvq/">Vim/Neovim の設定ファイルのパスを確認する (&lt;code>$MYVIMRC&lt;/code>)&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="設定ファイルをリロードする">設定ファイルをリロードする&lt;/h2>
&lt;p>設定ファイルを変更した後で、その内容を反映させるには下記のように &lt;strong>&lt;code>:source&lt;/code>&lt;/strong> コマンドでそのファイルを読み込みます。&lt;/p></description></item><item><title>Vim/Neovim の設定ファイルのパスを確認する ($MYVIMRC)</title><link>https://maku77.github.io/p/7mabuvq/</link><pubDate>Wed, 26 Dec 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/7mabuvq/</guid><description>&lt;h2 id="設定ファイルのパスを調べる">設定ファイルのパスを調べる&lt;/h2>
&lt;p>Vim や Neovim の設定ファイル（やディレクトリ）のパスは、&lt;code>:echo&lt;/code> コマンドを使って以下のように確認することができます。&lt;/p>
&lt;ul>
&lt;li>Vim の場合:
&lt;ul>
&lt;li>&lt;strong>&lt;code>:echo $MYVIMRC&lt;/code>&lt;/strong>&lt;br>
出力例: &lt;code>C:\Users\maku\_vimrc&lt;/code> （Windows の場合）&lt;br>
出力例: &lt;code>/Users/maku/.vimrc&lt;/code> （Linux/macOS の場合）&lt;/li>
&lt;li>&lt;strong>&lt;code>:echo $MYGVIMRC&lt;/code>&lt;/strong>&lt;br>
出力例: &lt;code>C:\Users\maku\_gvimrc&lt;/code> （Windows の場合）&lt;br>
出力例: &lt;code>/User/maku/.gvimrc&lt;/code> （Linux/macOS の場合）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Neovim の場合（&lt;code>init.lua&lt;/code> と &lt;code>init.vim&lt;/code> のうち実際に読み込まれたファイルのパス）:
&lt;ul>
&lt;li>&lt;strong>&lt;code>:echo $MYVIMRC&lt;/code>&lt;/strong> or &lt;strong>&lt;code>:=vim.env.MYVIMRC&lt;/code>&lt;/strong>&lt;br>
出力例: &lt;code>C:\Users\maku\AppData\Local\nvim\init.lua&lt;/code> （Windows の場合）&lt;br>
出力例: &lt;code>/Users/maku/.config/nvim/init.lua&lt;/code> （Linux/macOS の場合）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>また、&lt;code>nvim&lt;/code> ディレクトリのパスは、以下のように確認できます。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>:echo stdpath('config')&lt;/code>&lt;/strong>&lt;br>
出力例: &lt;code>C:\Users\maku\AppData\Local\nvim&lt;/code> （Windows の場合）&lt;br>
出力例: &lt;code>/Users/maku/.config/nvim&lt;/code> （Linux/macOS の場合）&lt;/li>
&lt;/ul>
&lt;h2 id="デフォルトのパス">デフォルトのパス&lt;/h2>
&lt;p>デフォルトでは、次のようなファイルパスに置かれた設定ファイルが読み込まれます。&lt;/p>
&lt;ul>
&lt;li>Vim の場合
&lt;ul>
&lt;li>Windows の場合: &lt;strong>&lt;code>%USERPROFILE%/_vimrc&lt;/code>&lt;/strong> （ただし &lt;code>HOME&lt;/code> 環境変数が設定されている場合は &lt;code>%HOME%/_vimrc&lt;/code>）&lt;/li>
&lt;li>Linux/macOS の場合: &lt;strong>&lt;code>~/.vimrc&lt;/code>&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Neovim の場合
&lt;ul>
&lt;li>Windows の場合: &lt;strong>&lt;code>%USERPROFILE%\AppData\Local\nvim\init.vim&lt;/code>&lt;/strong>&lt;/li>
&lt;li>Linux/macOS の場合: &lt;strong>&lt;code>~/.config/nvim/init.vim&lt;/code>&lt;/strong>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Vim/Neovim の設定ファイルは基本的に自分で作成する必要があります。&lt;/p></description></item><item><title>Vim で C/C++ の変数／マクロの定義位置にジャンプする</title><link>https://maku77.github.io/p/96itrdp/</link><pubDate>Wed, 21 Nov 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/96itrdp/</guid><description>&lt;h2 id="cc-の変数マクロの定義位置にジャンプ">C/C++ の変数／マクロの定義位置にジャンプ&lt;/h2>
&lt;p>変数にカーソルを当てた状態で、以下のように入力すると、その変数の定義位置にジャンプすることができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>gd&lt;/code>&lt;/td>
 &lt;td>ローカル変数の定義位置へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>gD&lt;/code>&lt;/td>
 &lt;td>グローバル変数の定義位置へジャンプ&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>検索の精度はあまり高くありません。。。&lt;/p>
&lt;h2 id="cc-のマクロの定義を表示定義位置へジャンプ">C/C++ のマクロの定義を表示／定義位置へジャンプ&lt;/h2>
&lt;p>C/C++ のマクロは次のような感じで定義されます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define BUF_SIZE 256
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>マクロを使用している場所から、そのマクロの定義（上記のコード）を調べるには、マクロ名にカーソルを当てた状態で次のように入力します。
&lt;code>#include&lt;/code> されているファイルの内容も検索してくれます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>[D&lt;/code>&lt;/td>
 &lt;td>マクロの定義を表示（すべての定義を表示）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>[d&lt;/code>&lt;/td>
 &lt;td>マクロの定義を表示（最初の定義のみ）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>[Ctrl-d&lt;/code>&lt;/td>
 &lt;td>マクロの定義位置へジャンプ&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table></description></item><item><title>Vim でカーソル位置の単語に対して任意のコマンド（ヘルプなど）を実行する (keywordprg)</title><link>https://maku77.github.io/p/3hp29j9/</link><pubDate>Wed, 21 Nov 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/3hp29j9/</guid><description>&lt;p>Vim で任意のキーワードにカーソルを合わせた状態で &lt;strong>&lt;code>SHIFT-K&lt;/code>&lt;/strong> と入力すると、そのキーワードをパラメータにして、&lt;strong>&lt;code>keywordprg&lt;/code>&lt;/strong> オプションに設定されたコマンドが実行されます。
&lt;code>keywordprg&lt;/code> の初期値は以下のようになっています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">keywordprg オプションのデフォルト値&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">keywordprg&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">man&lt;/span> &lt;span class="c">&amp;#34; Unix の場合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">keywordprg&lt;/span>&lt;span class="p">=&lt;/span>:&lt;span class="nx">help&lt;/span> &lt;span class="c">&amp;#34; Windows の場合&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>つまり、Unix の場合は、&lt;code>SHIFT-K&lt;/code> と入力するだけでカーソル位置にあるキーワードの man ページを参照することができます。
man ページのセクション番号を指定するには、&lt;strong>&lt;code>2 SHIFT-K&lt;/code>&lt;/strong> のように、先にセクション番号を入力します。&lt;/p>
&lt;p>どの文字をキーワードとみなすかは、&lt;strong>&lt;code>iskeyword&lt;/code>&lt;/strong> オプションに文字コードで設定します。
&lt;code>iskeyword&lt;/code> のデフォルト値は下記のような感じになっています。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">iskeyword オプションのデフォルト値&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">iskeyword&lt;/span>&lt;span class="p">=&lt;/span>@&lt;span class="p">,&lt;/span>&lt;span class="m">48-57&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">128-167&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">224-235&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim/Neovim で自動インデントモードを有効にする (autoindent, smartindent, cindent)</title><link>https://maku77.github.io/p/oe94dkh/</link><pubDate>Fri, 16 Nov 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/oe94dkh/</guid><description>&lt;h2 id="vim-の-3-種類のインデントモード">Vim の 3 種類のインデントモード&lt;/h2>
&lt;p>Vim には、大きく分けて、以下のようなオートインデント設定があります。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>autoindent&lt;/strong> &amp;hellip; カレント行のインデントをキープする。シンプル。&lt;/li>
&lt;li>&lt;strong>smartindent&lt;/strong> &amp;hellip; C-like なプログラミング言語向けの自動インデント。&lt;/li>
&lt;li>&lt;strong>cindent&lt;/strong> &amp;hellip; C/Java言語に特化したインデント（&lt;code>smartindent&lt;/code> よりも厳密に文法を考慮）&lt;/li>
&lt;/ul>
&lt;p>Vim/Neovim はファイルタイプに応じて自動的に &lt;code>cident&lt;/code> などのインデントモードが有効化されるようになっています（参照: &lt;code>:e $VIMRUNTIME/filetype.lua&lt;/code>）。&lt;/p>
&lt;h2 id="インデントモードの有効化無効化">インデントモードの有効化／無効化&lt;/h2>
&lt;h3 id="autoindent-の有効化">autoindent の有効化&lt;/h3>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">.vimrc/init.vim (VimL) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">autoindent&lt;/span> &lt;span class="c">&amp;#34; autoindent を ON&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">noautoindent&lt;/span> &lt;span class="c">&amp;#34; autoindent を OFF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">autoindent&lt;/span>? &lt;span class="c">&amp;#34; autoindent の設定を確認 (autoindent or noautoindent)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;strong>&lt;code>autoindent&lt;/code>&lt;/strong> を有効にすると、新しい行を追加したときに、前の行のインデントが引き継がれるようになります。
ただそれだけのシンプルなインデントモードです。
新しい行の追加は例えば、以下のような入力があった場合が対象になります。&lt;/p>
&lt;ul>
&lt;li>&lt;code>o&lt;/code> コマンド（あるいは &lt;code>O&lt;/code> コマンド）&lt;/li>
&lt;li>インサートモード時の &lt;kbd>Enter&lt;/kbd>&lt;/li>
&lt;/ul>
&lt;p>インサートモードのまま、インデントの量を変えるには &lt;code>CTRL-T&lt;/code>、&lt;code>CTRL-D&lt;/code> などのコマンドを使用します。
下記は、&lt;code>:help index&lt;/code> からのキーマップ説明の抜粋です。&lt;/p>
&lt;ul>
&lt;li>&lt;code>i_CTRL-T&lt;/code>: 現在の行に &lt;code>shiftwidth&lt;/code> 分のインデントを挿入する。&lt;/li>
&lt;li>&lt;code>i_CTRL-D&lt;/code>: 現在の行から &lt;code>shiftwidth&lt;/code> 分のインデントを削除する。&lt;/li>
&lt;/ul>
&lt;h3 id="smartindent-の有効化">smartindent の有効化&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">smartindent&lt;/span> &lt;span class="c">&amp;#34; smartindent を ON&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">nosmartindent&lt;/span> &lt;span class="c">&amp;#34; smartindent を OFF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">smartindent&lt;/span>? &lt;span class="c">&amp;#34; smartindent の設定を確認 (smartindent or nosmartindent)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>smartindent&lt;/code>&lt;/strong> は、C-like な言語を編集するときに、下記のようにそれっぽく字下げや字上げを自動化してくれるインデントモードです。&lt;/p></description></item><item><title>GVim 起動時のウィンドウの幅、高さを設定する (columns, lines)</title><link>https://maku77.github.io/p/syn3cyx/</link><pubDate>Wed, 14 Nov 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/syn3cyx/</guid><description>&lt;p>GVim を起動したときのウィンドウのサイズは、&lt;strong>&lt;code>columns&lt;/code>&lt;/strong> オプション（横幅）と、&lt;strong>&lt;code>lines&lt;/code>&lt;/strong> オプション（高さ）で指定します。
単位は半角文字の数です。
起動時に読み込まれる &lt;code>~/.gvimrc&lt;/code> に記述してください（Windows の場合は &lt;code>%HOME%\_gvimrc&lt;/code>）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">columns&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">120&lt;/span> &lt;span class="c">&amp;#34;横幅&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">set&lt;/span> &lt;span class="nx">lines&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">60&lt;/span> &lt;span class="c">&amp;#34;高さ&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim でカーソル位置にマークしてジャンプしてこれるようにする</title><link>https://maku77.github.io/p/i3ao6oc/</link><pubDate>Sun, 07 Oct 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/i3ao6oc/</guid><description>&lt;p>Vim のマーク機能を使用すると、カーソル位置に &lt;code>a&lt;/code>～&lt;code>z&lt;/code>、あるいは &lt;code>A&lt;/code>～&lt;code>Z&lt;/code> のマークを付け、別の場所からそこへジャンプして来ることができるようになります。&lt;/p>
&lt;h2 id="マークを付ける">マークを付ける&lt;/h2>
&lt;p>&lt;strong>&lt;code>m&lt;/code>&lt;/strong> に続けて、1 文字のアルファベットを入力すると、現在のカーソル位置にマークを設定することができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>ma&lt;/code>&lt;/td>
 &lt;td>カーソル位置をローカルマーク &lt;code>a&lt;/code> として保存（&lt;code>a&lt;/code>～&lt;code>z&lt;/code> を使用可能）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>mA&lt;/code>&lt;/td>
 &lt;td>カーソル位置をグローバルマーク &lt;code>A&lt;/code> として保存（&lt;code>A&lt;/code>～&lt;code>Z&lt;/code> を使用可能）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>マーク用のアルファベットとして &lt;strong>小文字の &lt;code>a&lt;/code>～&lt;code>z&lt;/code> を使用すると、カレントバッファのみに有効なローカルマーク&lt;/strong> として設定されます。
&lt;strong>大文字の &lt;code>A&lt;/code>～&lt;code>Z&lt;/code> を使用すると、グローバルマーク（ファイルマーク）&lt;/strong> として設定されます。
ローカルマークはファイルごとに &lt;code>a&lt;/code>～&lt;code>z&lt;/code> を使用することができ、グローバルマークは全体で &lt;code>A&lt;/code>～&lt;code>Z&lt;/code> を共有することになります。&lt;/p>
&lt;h2 id="マークを設定した位置へジャンプする">マークを設定した位置へジャンプする&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>`a&lt;/code>&lt;/td>
 &lt;td>ローカルマーク &lt;code>a&lt;/code> へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>'a&lt;/code>&lt;/td>
 &lt;td>ローカルマーク &lt;code>a&lt;/code> の行頭へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>`A&lt;/code>&lt;/td>
 &lt;td>グローバルマーク &lt;code>A&lt;/code> へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>'A&lt;/code>&lt;/td>
 &lt;td>グローバルマーク &lt;code>A&lt;/code> の行頭へジャンプ&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>ローカルマーク (&lt;code>a&lt;/code>～&lt;code>z&lt;/code>) を指定してジャンプするときは、カレントバッファで開いているファイルに設定されたローカルマークがジャンプ先のターゲットとなります。&lt;/p>
&lt;p>一方、グローバルマーク (&lt;code>A&lt;/code>～&lt;code>Z&lt;/code>) は、マークしたファイルまで一緒に記録されており、Vim でどのファイルを編集中であっても、そのファイルにジャンプすることができます。
頻繁に使用するファイルに &lt;code>mA&lt;/code> でグローバルマークを設定しておけば、&lt;code>'A&lt;/code> でそのファイルをいつでも簡単に開けるようになります。&lt;/p>
&lt;p>また、ジャンプ元とジャンプ先で行ったり来たりするために、下記のようなジャンプコマンドを使用することができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>``&lt;/code>&lt;/td>
 &lt;td>バッファ内のジャンプ元へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>''&lt;/code>&lt;/td>
 &lt;td>バッファ内のジャンプ元の行頭へジャンプ&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="マークの一覧を表示する">マークの一覧を表示する&lt;/h2>
&lt;p>現在設定されているローカルマークとグローバルマークの一覧を表示するには、次のコマンドを実行します。&lt;/p></description></item><item><title>Vim でウィンドウを分割する</title><link>https://maku77.github.io/p/ym9pa88/</link><pubDate>Fri, 05 Oct 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ym9pa88/</guid><description>&lt;p>Vim のウィンドウを分割すると、複数のファイルの内容を同時に表示しながら作業することができます。
同一ファイル内の 2 か所を表示することもできます。&lt;/p>
&lt;h2 id="ウィンドウを分割する">ウィンドウを分割する&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>:sp[lit]&lt;/code>&lt;/td>
 &lt;td>上下に分割（編集中のファイルを開く）。&lt;code>Ctrl-w s&lt;/code> としても OK&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>:vs[plit]&lt;/code>&lt;/td>
 &lt;td>左右に分割（編集中のファイルを開く）。&lt;code>Ctrl-w v&lt;/code> としても OK&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>:new&lt;/code>&lt;/td>
 &lt;td>上下に分割（空のファイルを開く）。&lt;code>Ctrl-w n&lt;/code> としても OK&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>:vnew&lt;/code>&lt;/td>
 &lt;td>左右に分割（空のファイルを開く）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>:sview [file]&lt;/code>&lt;/td>
 &lt;td>閲覧用にファイルを開く。&lt;code>:split&lt;/code> → &lt;code>:view&lt;/code> としても OK&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="ウィンドウを閉じる">ウィンドウを閉じる&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-w q&lt;/code>&lt;/td>
 &lt;td>ウィンドウを閉じる。最後のウィンドウであれば Vim を終了 (= &lt;code>:quit&lt;/code>)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-w c&lt;/code>&lt;/td>
 &lt;td>ウィンドウを閉じる。最後のウィンドウを閉じることはできない (= &lt;code>:close&lt;/code>)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-w o&lt;/code>&lt;/td>
 &lt;td>カレントウィンドウ以外を閉じる&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="ウィンドウを切り替える">ウィンドウを切り替える&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-w w&lt;/code>&lt;/td>
 &lt;td>次のウィンドウへ移動（★最低限これだけ覚えておく）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-w h&lt;/code>&lt;/td>
 &lt;td>左のウィンドウへ移動&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-w j&lt;/code>&lt;/td>
 &lt;td>下のウィンドウへ移動&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-w k&lt;/code>&lt;/td>
 &lt;td>上のウィンドウへ移動&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-w l&lt;/code>&lt;/td>
 &lt;td>右のウィンドウへ移動&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>キーシーケンスの 2 番目のキーは、&lt;code>Ctrl&lt;/code> キーを押しながら入力することもできるようになっています。
例えば、&lt;code>Ctrl-w w&lt;/code> と入力する代わりに、&lt;code>Ctrl-w Ctrl-w&lt;/code> と入力しても OK です。&lt;/p></description></item><item><title>Vim でファイル名を指定してファイルを開く (:e, :edit, :view)</title><link>https://maku77.github.io/p/6aycfga/</link><pubDate>Fri, 05 Oct 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/6aycfga/</guid><description>&lt;h2 id="ファイル名を指定してファイルを開く">ファイル名を指定してファイルを開く&lt;/h2>
&lt;p>Vim で &lt;strong>&lt;code>:edit&lt;/code>&lt;/strong> コマンド（&lt;strong>&lt;code>:e&lt;/code>&lt;/strong> と省略可）を使用すると、指定した名前のファイルをカレントバッファで開くことができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">hoge.txt を開く&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span> &lt;span class="nx">hoge&lt;/span>.&lt;span class="nx">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">edit&lt;/span> &lt;span class="nx">hoge&lt;/span>.&lt;span class="nx">txt&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>別のファイルを開く前に、カレントバッファで開いているファイルの編集内容を &lt;code>:w&lt;/code> で保存しておく必要があります。
現在の編集を破棄して別のファイルを開きたい場合は、コマンドの後ろに &lt;strong>&lt;code>!&lt;/code>&lt;/strong> を付けて実行します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">e&lt;/span>&lt;span class="p">!&lt;/span> &lt;span class="nx">hoge&lt;/span>.&lt;span class="nx">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">edit&lt;/span>&lt;span class="p">!&lt;/span> &lt;span class="nx">hoge&lt;/span>.&lt;span class="nx">txt&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="読み取り専用でファイルを開く">読み取り専用でファイルを開く&lt;/h2>
&lt;p>&lt;code>:edit&lt;/code> コマンドの代わりに、&lt;strong>&lt;code>:view&lt;/code>&lt;/strong> コマンドを使用してファイルを開くと、読み取り専用（ReadOnly モード）でファイルを開くことができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">view&lt;/span> &lt;span class="nx">hoge&lt;/span>.&lt;span class="nx">txt&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ファイルを開くときは &lt;code>:e&lt;/code> コマンドで代用してしまうことが多いので、&lt;code>:view&lt;/code> コマンドを使用することはあまりないかもしれません。&lt;/p>
&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ワンポイント&lt;/span>
 &lt;span class="xNote_body">&lt;code>:edit&lt;/code> コマンドは &lt;code>:e&lt;/code> と 1 文字まで省略することができますが、&lt;code>:view&lt;/code> コマンドは &lt;code>:vie&lt;/code> までしか省略できません。
詳しくは、&lt;code>:help :view&amp;lt;&lt;/code> でヘルプを確認してみてください。&lt;/span>
&lt;/div></description></item><item><title>Vim/Neovim でタブ文字に関する設定を行う (tabstop, expandtab, softtabstop)</title><link>https://maku77.github.io/p/8okf7d3/</link><pubDate>Wed, 11 Apr 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/8okf7d3/</guid><description>&lt;h2 id="タブ文字-1-文字分の表示幅を設定する">タブ文字 1 文字分の表示幅を設定する&lt;/h2>
&lt;p>タブ文字がどれくらいの幅で表示されるかの設定は &lt;strong>&lt;code>tabstop&lt;/code>&lt;/strong> オプションで行います。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (~/.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">tabstop&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">4&lt;/span> &lt;span class="c">&amp;#34;タブ 1 文字の表示幅 (default: 8)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (~/.config/nvim/init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tabstop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="c1">-- タブ 1 文字の表示幅 (default: 8)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>例えば、&lt;code>tabstop&lt;/code> を 4 に設定すると、ファイル内のタブ文字は 4 文字分のスペースとして表示されます。
この設定は、あくまで見え方の設定であって、タブは 1 文字のタブ文字 (&lt;code>\t&lt;/code>) として存在します。
他のエディタでファイルを開くと、タブ文字の見え方は変わってきます。&lt;/p>
&lt;h2 id="タブを入力したときにタブ文字の代わりにスペースを挿入する">タブを入力したときにタブ文字の代わりにスペースを挿入する&lt;/h2>
&lt;p>TAB キーを押したときに、タブ文字の代わりに半角スペース x N を入力したいときは、&lt;strong>&lt;code>expandtab&lt;/code>&lt;/strong> を有効化します。
さらに、TAB キーを押したときに何文字分の半角スペースを入力するかは、&lt;strong>&lt;code>softtabstop&lt;/code>&lt;/strong> で設定します。
&lt;code>softtabstop=4&lt;/code> と具体的な値を設定するのもよいですが、負の値（-1 など）を設定すると、&lt;code>tabstop&lt;/code> で設定した値に合わせてくれます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim (~/.vimrc) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">expandtab&lt;/span> &lt;span class="c">&amp;#34;タブキーでスペースを入力する (default: noexpandtab)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">softtabstop&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">-1&lt;/span> &lt;span class="c">&amp;#34;タブキーで入力するスペース数 (-1: tabstop に合わせる)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim (~/.config/nvim/init.lua) の場合&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">expandtab&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- タブキーでスペースを入力する (default: false)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">softtabstop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="c1">-- タブキーで入力するスペース数 (-1: tabstop に合わせる)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ちなみに、&lt;code>expandtab&lt;/code> が有効化されているときにタブ文字を明示的に入力したくなった場合は、&lt;strong>&lt;code>CTRL-V &amp;lt;TAB&amp;gt;&lt;/code>&lt;/strong> あるいは &lt;strong>&lt;code>CTRL-Q &amp;lt;TAB&amp;gt;&lt;/code>&lt;/strong> で入力できます。&lt;/p></description></item><item><title>Vim でキーボードマクロを記録して一連のキー入力を繰り返し実行する</title><link>https://maku77.github.io/p/bmriv55/</link><pubDate>Mon, 12 Mar 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/bmriv55/</guid><description>&lt;p>Vim のノーマルモードで &lt;strong>&lt;code>q&lt;/code>&lt;/strong> を入力すると、キーボードマクロの記録モードに入ります。
最初に保存先のレジスタ名称（&lt;strong>&lt;code>a-zA-Z0-9&lt;/code>&lt;/strong> のうち1文字）を入力してから記録させたいテキスト入力を行うと、そのレジスタにマクロとして登録されます。
最後にノーマルモードで再び &lt;strong>&lt;code>q&lt;/code>&lt;/strong> を入力すると、キーボードマクロの記録モードが終了します。
登録したキーボードマクロを再生したいときは、&lt;strong>&lt;code>@&lt;/code>&lt;/strong> に続けてレジスタ名を入力します。&lt;/p>
&lt;ol>
&lt;li>&lt;strong>&lt;code>qa&lt;/code>&lt;/strong> &amp;hellip; マクロ記録開始（&lt;code>q&lt;/code> の後ろは &lt;code>a-zA-Z0-9&lt;/code> のいずれか1文字）&lt;/li>
&lt;li>&lt;strong>&lt;code>q&lt;/code>&lt;/strong> &amp;hellip; マクロ記録終了&lt;/li>
&lt;li>&lt;strong>&lt;code>@a&lt;/code>&lt;/strong> &amp;hellip; マクロ実行（&lt;code>q&lt;/code> の後ろは &lt;code>a-zA-Z0-9&lt;/code> のいずれか1文字）&lt;/li>
&lt;/ol>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 行頭に // を挿入するキーボードマクロを記録（Java のコメント）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">qaI// &amp;lt;Esc&amp;gt;q # 記録
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@a # 再生&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>&lt;code>@a&lt;/code> などでマクロを再生した後に、さらに続けて同じマクロを実行したい場合は、&lt;code>@a&lt;/code> を入力するのではなく、&lt;code>.&lt;/code>（ドット）で繰り返し実行すると簡単です。&lt;/p></description></item><item><title>Vim のヘルプコマンドの使い方 (:help, :helpgrep)</title><link>https://maku77.github.io/p/fdep5i7/</link><pubDate>Mon, 12 Mar 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/fdep5i7/</guid><description>&lt;h2 id="ヘルプの起動終了">ヘルプの起動／終了&lt;/h2>
&lt;p>Vim/Neovim エディタ内で下記のコマンドを実行することで、ヘルプを起動・終了することができます。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>:help&lt;/code>&lt;/strong> &amp;hellip; ヘルプを起動する&lt;/li>
&lt;li>&lt;strong>&lt;code>:q&lt;/code>&lt;/strong> / &lt;strong>&lt;code>ZZ&lt;/code>&lt;/strong> &amp;hellip; ヘルプを終了する&lt;/li>
&lt;/ul>
&lt;p>&lt;code>vim&lt;/code>/&lt;code>nvim&lt;/code> コマンド実行時に &lt;strong>&lt;code>+&lt;/code>&lt;/strong> オプションを付けて起動することで、Vim のヘルプを直接開くこともできます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> nvim +help &lt;span class="c1"># Vim のヘルプを起動して開く&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> nvim +&lt;span class="s2">&amp;#34;help :highlight&amp;#34;&lt;/span> &lt;span class="c1"># highlight コマンドのヘルプを起動して開く&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="help-コマンドに渡すパラメータ">:help コマンドに渡すパラメータ&lt;/h2>
&lt;p>&lt;code>:help&lt;/code> コマンドの引数に特定のプレフィックスを付けたり、引数を引用符で囲むことで、異なるモードのコマンドのヘルプを見ることができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>何のヘルプを読むか&lt;/th>
 &lt;th>プレフィックスなど&lt;/th>
 &lt;th>例&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>exコマンド&lt;/td>
 &lt;td>&lt;strong>&lt;code>:&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>&lt;code>:help :quit&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>オプション&lt;/td>
 &lt;td>&lt;strong>&lt;code>'name'&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>&lt;code>:help 'number'&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Vim の起動パラメータ&lt;/td>
 &lt;td>&lt;strong>&lt;code>-&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>&lt;code>:help -t&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>キー入力 (normal mode)&lt;/td>
 &lt;td>なし&lt;/td>
 &lt;td>&lt;code>:help u&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>キー入力 (insert mode)&lt;/td>
 &lt;td>&lt;strong>&lt;code>i_&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>&lt;code>:help i_CTRL-N, :help i_&amp;lt;Esc&amp;gt;&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>キー入力 (visual mode)&lt;/td>
 &lt;td>&lt;strong>&lt;code>v_&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>&lt;code>:help v_u&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>キー入力 (command mode)&lt;/td>
 &lt;td>&lt;strong>&lt;code>c_&lt;/code>&lt;/strong>&lt;/td>
 &lt;td>&lt;code>:help c_&amp;lt;Del&amp;gt;&lt;/code>&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>特殊なキー入力は、&lt;code>CTRL-A&lt;/code>、&lt;code>&amp;lt;Del&amp;gt;&lt;/code>、&lt;code>&amp;lt;Esc&amp;gt;&lt;/code> のように表現することができます（他のキーの表現方法は &lt;code>:help keycodes&lt;/code> で確認できます）。&lt;/p></description></item><item><title>Vim のコマンドモードでのカーソル移動 (Ctrl-B, Ctrl-E, Ctrl-H, Ctrl-U)</title><link>https://maku77.github.io/p/f92ub3d/</link><pubDate>Thu, 22 Feb 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/f92ub3d/</guid><description>&lt;h2 id="コマンドモードでの入力操作">コマンドモードでの入力操作&lt;/h2>
&lt;p>Vim で &lt;strong>&lt;code>:&lt;/code>&lt;/strong>（ex コマンド）や、&lt;strong>&lt;code>/&lt;/code>&lt;/strong> （検索）キーを押すと、コマンドを 1 行だけ入力できるコマンドラインモード（コマンドモード）に入ります。
コマンドモードでは、下記のようなキーシーケンスでカーソル移動や編集操作を行うことができます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-U&lt;/code>&lt;/td>
 &lt;td>行頭まで削除&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-B&lt;/code>&lt;/td>
 &lt;td>行頭に移動&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-E&lt;/code>&lt;/td>
 &lt;td>行末に移動&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-H&lt;/code>&lt;/td>
 &lt;td>1 文字削除&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-W&lt;/code>&lt;/td>
 &lt;td>1 単号削除&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-P&lt;/code>&lt;/td>
 &lt;td>1 つ前の履歴を表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-N&lt;/code>&lt;/td>
 &lt;td>1 つ後の履歴を表示&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-R&lt;/code> &lt;code>%&lt;/code>&lt;/td>
 &lt;td>ファイル名を挿入（&lt;code>%&lt;/code> レジスタ）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-R&lt;/code> &lt;code>*&lt;/code>&lt;/td>
 &lt;td>クリップボードの内容を挿入（&lt;code>*&lt;/code> レジスタ）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-R&lt;/code> &lt;code>&amp;quot;&lt;/code>&lt;/td>
 &lt;td>最後にヤンクした内容を挿入（&lt;code>&amp;quot;&lt;/code> レジスタ）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="コマンドモードのヘルプ">コマンドモードのヘルプ&lt;/h2>
&lt;p>コマンドモードでの入力操作に使えるキーシーケンスのヘルプは次のように確認できます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>:help cmdline-editing&lt;/code>&lt;/td>
 &lt;td>コマンドラインの編集操作についてのヘルプ全般&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>:help c_CTRL-W&lt;/code>&lt;/td>
 &lt;td>コマンドモードでの &lt;code>Ctrl-W&lt;/code> というキー入力についてのヘルプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>:help map-modes&lt;/code>&lt;/td>
 &lt;td>キーマッピングについてのヘルプ（コマンドモード用には &lt;code>:cmap&lt;/code> や &lt;code>:cnoremap&lt;/code> を使う）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table></description></item><item><title>Vim のコマンドモードで入力補完する (Ctrl-D, Tab)</title><link>https://maku77.github.io/p/ow6rvbz/</link><pubDate>Wed, 21 Feb 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/ow6rvbz/</guid><description>&lt;p>Vim のコマンドモードでコマンドを入力している最中に、&lt;kbd>Ctrl-D&lt;/kbd> や &lt;kbd>Tab&lt;/kbd> を押すと、入力候補の一覧表示や、入力の補完を行うことができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: add を含んでいるパラメータの入力候補を表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:help add&amp;lt;Ctrl-D&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: add で始まるパラメータの入力を補完&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:help add&amp;lt;TAB&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim/Neovim でインデント（シフトコマンド）を設定する (shiftwidth, shiftround)</title><link>https://maku77.github.io/p/b5o6ksu/</link><pubDate>Tue, 20 Feb 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/b5o6ksu/</guid><description>&lt;h2 id="シフトコマンドで挿入削除するスペースの量を設定する">シフトコマンドで挿入／削除するスペースの量を設定する&lt;/h2>
&lt;p>&lt;strong>&lt;code>shiftwidth&lt;/code>&lt;/strong> オプションに設定した値は、&lt;code>&amp;gt;&amp;gt;&lt;/code> コマンドなどで行頭に挿入するスペースの数を示します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">shiftwidth&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">4&lt;/span> &lt;span class="c">&amp;#34; デフォルトは 8&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>タブストップ (&lt;code>tabstop&lt;/code>) と混同しがちなので注意してください。
タブストップは、タブ文字を入力した場合に表示位置をどこへずらすかの基準を指定します。
シフトコマンド (&lt;code>&amp;gt;&amp;gt;&lt;/code>) に効いてくる値はあくまで &lt;code>shiftwidth&lt;/code> の方です。&lt;/p>
&lt;h2 id="シフトしたときに-shiftwidth-の値の倍数になるようにスペースを挿入する">シフトしたときに shiftwidth の値の倍数になるようにスペースを挿入する&lt;/h2>
&lt;p>シフトコマンド（&lt;code>&amp;gt;&amp;gt;&lt;/code> など）を実行すると、行の先頭に &lt;code>shiftwidth&lt;/code> で設定した数だけスペースが挿入されます。
このとき、すでに行頭に何文字かのスペースが存在する場合に、スペース数が &lt;code>shiftwidth&lt;/code> の倍数になるように調整してスペースを挿入したい場合は、次のように &lt;strong>&lt;code>shiftround&lt;/code>&lt;/strong> を有効化します（デフォルトはオフ (&lt;code>noshiftround&lt;/code>) です）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim（/.vimrc の場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">shiftround&lt;/span> &lt;span class="c">&amp;#34;シフトコマンドでのインデント量を丸める&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim（~/.config/nvim/init.lua の場合）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">shiftround&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- シフトコマンドでのインデント量を丸める&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>ほとんどの場合は、行頭からのインデント量は 2 の倍数とか 4 の倍数とかに揃えておきたいはずなので、&lt;code>shiftround&lt;/code> はセットしておくことをお勧めします。&lt;/p>
&lt;h2 id="ファイルタイプごとのインデントを設定する">ファイルタイプごとのインデントを設定する&lt;/h2>
&lt;p>以下のように設定しておくと、ソースコードを開いたときに、その言語別（Vim 的にはファイルタイプ別）にインデント設定を切り替えることができます。
現在の編集中のファイルのファイルタイプが切り替わると、&lt;code>FileType&lt;/code> イベントが発生するので、これを autocmd で捕まえて設定を行います。
現在のバッファが認識しているファイルタイプを確認するには、&lt;code>:set filetype?&lt;/code> コマンドを実行します。&lt;/p>
&lt;p>下記の例では、Lua/Markdown/Svelte/Ruby ファイルを開いたときに、インデント幅を 2 スペースに設定しています。
カレントバッファーのみに設定を反映するため、Neovim では &lt;code>vim.opt_local&lt;/code>、Vim では &lt;code>setlocal (setl)&lt;/code> を使用することに注意してください。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Neovim/Lua用 (~/.config/nvim/init.lua)&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-lua" data-lang="lua">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- ファイルタイプ検出は Neovim では自動で有効なので通常不要ですが、明示するなら以下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.cmd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;filetype on&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- autocmd グループを定義（すでに存在する場合はクリア）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">local&lt;/span> &lt;span class="n">my_group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_create_augroup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;my_group&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">clear&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">-- ファイルタイプ別にインデント設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vim.api&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">nvim_create_autocmd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;FileType&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">group&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">my_group&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pattern&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s2">&amp;#34;lua&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;markdown&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;ruby&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;svelte&amp;#34;&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">callback&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">function&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.opt_local&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">expandtab&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- タブキーでスペースを入力する&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.opt_local&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">shiftround&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c1">-- シフトコマンドでのインデント量を tabstop 単位に丸める&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.opt_local&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tabstop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="c1">-- タブ文字の表示幅&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.opt_local&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">shiftwidth&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="c1">-- シフトコマンドでのインデント量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vim.opt_local&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">softtabstop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="c1">-- タブキーで入力するスペース数 (-1: tabstop に合わせる)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">end&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">Vim用 (~/.vimrc)&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;#34; ファイルタイプ検出を有効にする&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">filetype&lt;/span> &lt;span class="nx">on&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">augroup&lt;/span> &lt;span class="nx">my_group&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; 以前の autocmd コマンドをクリア&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span>&lt;span class="p">!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; ファイルタイプ別にインデント設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">autocmd&lt;/span> &lt;span class="nx">FileType&lt;/span> &lt;span class="nx">lua&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">markdown&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">ruby&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">svelte&lt;/span> &lt;span class="nx">setl&lt;/span> &lt;span class="nx">expandtab&lt;/span> &lt;span class="nx">tabstop&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="nx">shiftwidth&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="nx">softtabstop&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="nx">shiftround&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">augroup&lt;/span> &lt;span class="nx">END&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;div class="xNote">
 &lt;span class="xNote_title">☝️ ファイルタイプを追加する&lt;/span>
 &lt;span class="xNote_body">&lt;p>例えば、&lt;code>.svelte&lt;/code> という拡張子のファイルを開いたときに &lt;code>svelte&lt;/code> というファイルタイプとして認識してくれない場合は、次のようにファイルタイプの設定を追加します。&lt;/p></description></item><item><title>Vim/Neovim でインデント用のスペースを入力する（シフトコマンド）</title><link>https://maku77.github.io/p/i2m4nqt/</link><pubDate>Tue, 20 Feb 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/i2m4nqt/</guid><description>&lt;p>Vim にはインデント用のスペースを簡単に入力するためのシフトコマンドが用意されています。
現在のモードによって下記のように入力します。&lt;/p>
&lt;ul>
&lt;li>コマンドモードのとき
&lt;ul>
&lt;li>&lt;strong>&lt;code>&amp;gt;&amp;gt;&lt;/code>&lt;/strong> &amp;hellip; 右へ 1 レベルシフト&lt;/li>
&lt;li>&lt;strong>&lt;code>&amp;lt;&amp;lt;&lt;/code>&lt;/strong> &amp;hellip; 左へ 1 レベルシフト&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>入力モードのとき
&lt;ul>
&lt;li>&lt;strong>&lt;code>Ctrl-T&lt;/code>&lt;/strong> &amp;hellip; 右へ 1 レベルシフト&lt;/li>
&lt;li>&lt;strong>&lt;code>Ctrl-D&lt;/code>&lt;/strong> &amp;hellip; 左へ 1 レベルシフト&lt;/li>
&lt;li>&lt;strong>&lt;code>0&lt;/code>&lt;/strong> &lt;strong>&lt;code>Ctrl-D&lt;/code>&lt;/strong> &amp;hellip; すべてのインデントを取り除く（いったん 0 が表示されますが、次の &lt;code>Ctrl-D&lt;/code> で消えます）&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="参考">参考&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="../p/b5o6ksu/">インデント（シフトコマンド）を設定する (&lt;code>shiftwidth&lt;/code>, &lt;code>shiftround&lt;/code>)&lt;/a>&lt;/li>
&lt;li>&lt;a href="../p/oe94dkh/">自動インデントモードを有効にする (&lt;code>autoindent&lt;/code>, &lt;code>smartindent&lt;/code>, &lt;code>cindent&lt;/code>)&lt;/a>&lt;/li>
&lt;li>&lt;a href="../p/hoihkfy/">ビジュアルモードで簡単にインデントを行えるようにする&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Vim で外部の ex スクリプトを実行する</title><link>https://maku77.github.io/p/rocrnht/</link><pubDate>Wed, 14 Feb 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/rocrnht/</guid><description>&lt;p>Vim エディタでは、複数の ex コマンドを記述したファイル（ex スクリプト）を読み込んで、現在編集中のファイルに対して実行することができます。
下記の ex スクリプト (&lt;code>replace.ex&lt;/code>) は、現在編集中のテキストのファイルの &lt;code>AAA&lt;/code> を &lt;code>BBB&lt;/code> に置換し、保存して終了します。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ex スクリプトの例 (replace.ex)&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">%s/AAA/BBB/g
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wq&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>この ex スクリプトを実行するには、&lt;strong>&lt;code>:source&lt;/code>&lt;/strong> コマンドを使って以下のようにします（省略形は &lt;code>:so&lt;/code>** です）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">so&lt;/span> &lt;span class="nx">replace&lt;/span>.&lt;span class="nx">ex&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Linux には同様のことを行う単独のコマンド &lt;code>ex&lt;/code> が標準で付属しています。
Vim を起動しなくても、次のようにして ex スクリプトを任意のファイルに対して実行できます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> ex input.txt &amp;lt; replace.ex
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim で同じテキストを指定した回数だけ繰り返し挿入する</title><link>https://maku77.github.io/p/cismh7n/</link><pubDate>Fri, 09 Feb 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/cismh7n/</guid><description>&lt;p>&lt;code>i&lt;/code> コマンドや &lt;code>o&lt;/code> コマンドでインサートモードに入る前に、繰り返しの回数を入力しておくと、&lt;kbd>Esc&lt;/kbd> でインサートモードを抜けたときに、指定した回数だけ入力したテキストが繰り返し挿入されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 40個の - を挿入する（罫線のようなもの）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">40i-&amp;lt;ESC&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">実行結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">----------------------------------------&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 5 行の同じテキストを挿入する&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">5oあいうえお&amp;lt;ESC&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">実行結果&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">あいうえお
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">あいうえお
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">あいうえお
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">あいうえお
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">あいうえお&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように &lt;code>o&lt;/code> コマンドを使用すると、同じテキストを &lt;strong>複数行&lt;/strong> 同時に挿入できます（&lt;code>i&lt;/code> コマンドを使うと、同じ行に改行なしで繰り返しテキストが挿入されます）。&lt;/p></description></item><item><title>Vim の ex コマンドでの行範囲指定方法いろいろ</title><link>https://maku77.github.io/p/fw7q8q7/</link><pubDate>Tue, 30 Jan 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/fw7q8q7/</guid><description>&lt;h2 id="行範囲指定の基本">行範囲指定の基本&lt;/h2>
&lt;p>Vim の ex コマンドは、&lt;strong>&lt;code>:&lt;/code>&lt;/strong> から始めるコマンドモードのことで、各コマンドの先頭には、コマンドをどの行に対して実行するかを示す、&lt;strong>行範囲&lt;/strong> を指定することができます。&lt;/p>
&lt;pre tabindex="0">&lt;code>:行範囲 コマンド
&lt;/code>&lt;/pre>&lt;p>行範囲を省略した場合は、コマンドはカレント行にだけ影響を及ぼします。
行範囲に &lt;code>.&lt;/code>（ドット）を指定した場合も、同様にカレント行に対してだけ実行されます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: カレント行を削除&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:d&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 123 行目を削除&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:123 d&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 10 行目から 20 行目をソート&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:10,20 sort&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="行範囲指定の例">行範囲指定の例&lt;/h2>
&lt;h3 id="行番号ベースで指定する方法">行番号ベースで指定する方法&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>% &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="c">&amp;#34; ファイル全体に対して command を実行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">3&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="c">&amp;#34; 3 行目に対して command を実行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="c">&amp;#34; 3 行目から 5 行目までに対して command を実行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>$ &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="c">&amp;#34; 3 行目から最後の行までに対して command を実行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>. &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="c">&amp;#34; カレント行に対して command を実行（省略した場合と同様）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>.&lt;span class="p">,&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="c">&amp;#34; カレント行から 5 行目までに対して command を実行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>.;&lt;span class="p">+&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">command&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="c">&amp;#34; カレント行から 5 行目下の行までに対して command を実行&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="パターンに一致する文字列を含む行を検索して行指定する方法">パターンに一致する文字列を含む行を検索して行指定する方法&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="sr">/pattern/&lt;/span> &lt;span class="c">&amp;#34; pattern を含む行（1 行のみ）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="sr">/pattern/&lt;/span>&lt;span class="p">+&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="c">&amp;#34; pattern を含む行の 1 行下の行（1 行のみ）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="sr">/pattern/&lt;/span>;&lt;span class="p">+&lt;/span>&lt;span class="m">4&lt;/span> &lt;span class="c">&amp;#34; pattern を含む行から 4 行下の行まで&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">g&lt;/span>&lt;span class="sr">/pattern/&lt;/span> &lt;span class="c">&amp;#34; pattern を含むすべての行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="sr">/pat1/&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="sr">/pat2/&lt;/span> &lt;span class="c">&amp;#34; pat1 を含む行から pat2 を含む行まで（最初に見つかった部分のみ）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="sr">/pat1/&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="sr">/pat2/&lt;/span>&lt;span class="nx">g&lt;/span> &lt;span class="c">&amp;#34; pat1 を含む行から pat2 を含む行まで（見つかった範囲すべて）&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: TODO というテキストを含む行をすべて削除&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">:g/TODO/ d&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>範囲指定を連続して記述すると AND 条件で絞り込むことができます。&lt;/p></description></item><item><title>Vim のカーソル移動方法まとめ</title><link>https://maku77.github.io/p/etvrhdd/</link><pubDate>Tue, 30 Jan 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/etvrhdd/</guid><description>&lt;h2 id="カーソル移動左右">カーソル移動（左右）&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>h&lt;/code>&lt;/td>
 &lt;td>1 文字左へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>l&lt;/code>&lt;/td>
 &lt;td>1 文字右へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>0&lt;/code>&lt;/td>
 &lt;td>行頭へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>$&lt;/code>&lt;/td>
 &lt;td>行末へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>5|&lt;/code>&lt;/td>
 &lt;td>カレント行の 5 文字目へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>^&lt;/code>&lt;/td>
 &lt;td>最初の表示可能な文字へ&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="カーソル移動行番号指定でジャンプ">カーソル移動（行番号指定でジャンプ）&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>gg&lt;/code>&lt;br>&lt;code>:1&lt;/code>&lt;/td>
 &lt;td>1 行目へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>10gg&lt;/code>&lt;br>&lt;code>10G&lt;/code>&lt;br>&lt;code>:10&lt;/code>&lt;/td>
 &lt;td>10 行目へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>G&lt;/code>&lt;br>&lt;code>:$&lt;/code>&lt;/td>
 &lt;td>最終行へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>:$-3&lt;/code>&lt;/td>
 &lt;td>最終行より 3 行上へジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>:+10&lt;/code>&lt;/td>
 &lt;td>カレント行から 10 行下へジャンプ&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">応用例: カーソル位置からファイルの最後までを削除&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">dG&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="カーソル移動画面内でジャンプ">カーソル移動（画面内でジャンプ）&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>H&lt;/code>&lt;/td>
 &lt;td>画面内の一番上にジャンプ（ホーム行）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>M&lt;/code>&lt;/td>
 &lt;td>画面内の中央行にジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>L&lt;/code>&lt;/td>
 &lt;td>画面内の一番下にジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>3H&lt;/code>&lt;/td>
 &lt;td>画面内の一番上から 3 行目にジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>3L&lt;/code>&lt;/td>
 &lt;td>画面内の一番下から 3 行目にジャンプ&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="カーソル移動ブロック単位でジャンプ">カーソル移動（ブロック単位でジャンプ）&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>w&lt;/code>&lt;/td>
 &lt;td>次の単語の先頭へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>W&lt;/code>&lt;/td>
 &lt;td>次の単語の先頭へ（後続する記号も単語の一部とみなす）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>b&lt;/code>&lt;/td>
 &lt;td>前の単語の先頭へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>B&lt;/code>&lt;/td>
 &lt;td>前の単語の先頭へ（後続する記号も単語の一部とみなす）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>e&lt;/code>&lt;/td>
 &lt;td>単語の末尾へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>E&lt;/code>&lt;/td>
 &lt;td>単語の末尾へ（後続する記号も単語の一部とみなす）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>(&lt;/code>&lt;/td>
 &lt;td>現在の文の先頭へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>)&lt;/code>&lt;/td>
 &lt;td>次の文の先頭へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>{&lt;/code>&lt;/td>
 &lt;td>現在の段落の先頭へ（空行で判断）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>}&lt;/code>&lt;/td>
 &lt;td>次の段落の先頭へ（空行で判断）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>[[&lt;/code>&lt;/td>
 &lt;td>現在のセクションの先頭へ（行頭にある { を検索）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>]]&lt;/code>&lt;/td>
 &lt;td>次のセクションの先頭へ（行頭にある { を検索）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>&lt;code>w&lt;/code> や &lt;code>b&lt;/code> によるカーソル移動時に、どこまでを単語の切れ目と見なすかは、&lt;strong>&lt;code>iskeyword&lt;/code>&lt;/strong> オプションによって設定されています。
現在の設定値を見るには次のようにします。&lt;/p></description></item><item><title>Vim/Neovim の画面スクロール方法まとめ (scrolljump, scrolloff, scroll)</title><link>https://maku77.github.io/p/gu9om5z/</link><pubDate>Tue, 30 Jan 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/gu9om5z/</guid><description>&lt;h2 id="画面スクロール操作">画面スクロール操作&lt;/h2>
&lt;h3 id="画面スクロール">画面スクロール&lt;/h3>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-f&lt;/code>&lt;/td>
 &lt;td>1 画面下へスクロール&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-b&lt;/code>&lt;/td>
 &lt;td>1 画面上へスクロール&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-d&lt;/code>&lt;/td>
 &lt;td>半画面下へスクロール、あるいは &lt;code>scroll&lt;/code> オプションで指定された行数だけ下へスクロール&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-u&lt;/code>&lt;/td>
 &lt;td>半画面上へスクロール、あるいは &lt;code>scroll&lt;/code> オプションで指定された行数だけ上へスクロール&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h3 id="表示位置を移動">表示位置を移動&lt;/h3>
&lt;p>下記の操作では、カーソル位置（行）をキープしたまま、画面の表示位置だけを移動させます。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>コマンド&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>z&amp;lt;CR&amp;gt;&lt;/code>&lt;/td>
 &lt;td>カレント行を画面上端へ &lt;b>※1&lt;/b>&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>zz&lt;/code>&lt;/td>
 &lt;td>カレント行を画面中央へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>z.&lt;/code>&lt;/td>
 &lt;td>カレント行を画面中央へ（カーソルを最初の非空白文字へ）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>zb&lt;/code>&lt;/td>
 &lt;td>カレント行を画面下端へ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>z-&lt;/code>&lt;/td>
 &lt;td>カレント行を画面下端へ（カーソルを最初の非空白文字へ）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>z+&lt;/code>&lt;/td>
 &lt;td>画面下端を画面上端へ（これ使い道ある？）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-y&lt;/code>&lt;/td>
 &lt;td>1 行下へスクロール&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>Ctrl-e&lt;/code>&lt;/td>
 &lt;td>1 行上へスクロール&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>&lt;b>※1&lt;/b> 例えば、ソースコードの関数名を定義している行で、&lt;code>z [Enter]&lt;/code> とすれば、その関数の定義が画面上端から表示されます。
&lt;code>z&lt;/code> コマンドは、&lt;code>scrolloff&lt;/code> オプションに &lt;code>0&lt;/code> 以外が設定されていると、その値によって移動後の表示位置が少々変わります。&lt;/p>
&lt;p>&lt;code>z&lt;/code> コマンドを実行するときに数値プレフィックスを付けると、カレント行とみなす行番号を指定することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 30 行目が画面上端に表示されるように移動&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="m">30&lt;/span>z[&lt;span class="nx">Enter&lt;/span>]&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="画面上端下端でのスクロール方法の設定-scrolljump-scrolloff">画面上端、下端でのスクロール方法の設定 (scrolljump, scrolloff)&lt;/h2>
&lt;p>1 番上の行にカーソルがあるときに、さらに上へカーソルを移動させようとするとスクロールが発生します。
このときのスクロール行数は &lt;strong>&lt;code>scrolljump&lt;/code>&lt;/strong> オプションで指定することができます（デフォルトは 1）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="k">set&lt;/span> &lt;span class="nx">scrolljump&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>カーソルが画面の上端、下端まで行く前にスクロールを開始するには、&lt;strong>&lt;code>scrolloff&lt;/code>&lt;/strong> オプションで何行残してスクロールを開始するかを指定します（デフォルトは 0）。
この値を 0 以外にしておくと、スクロールが早めに始まるので作業効率が上がります。&lt;/p></description></item><item><title>Vim の文字の置換方法まとめ (:s, :substitute)</title><link>https://maku77.github.io/p/f8v2npx/</link><pubDate>Mon, 08 Jan 2007 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/f8v2npx/</guid><description>&lt;p>Vim の &lt;strong>&lt;code>s&lt;/code>&lt;/strong> (&lt;strong>&lt;code>substitute&lt;/code>&lt;/strong>) コマンドを使用すると、ファイル内の任意の範囲のテキストをまとめて置換することができます。&lt;/p>
&lt;h2 id="substitute-コマンドの基本">substitute コマンドの基本&lt;/h2>
&lt;p>&lt;code>substitute&lt;/code> コマンドは、ノーマルモード中に下記のように入力して実行します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&amp;lt;&lt;/span>&lt;span class="nx">行範囲&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="sr">/&amp;lt;置換前パターン&amp;gt;/&lt;/span>&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">置換後パターン&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>/&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">フラグ&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>指定した &lt;strong>&lt;code>&amp;lt;行範囲&amp;gt;&lt;/code>&lt;/strong> のテキストの中で、&lt;strong>&lt;code>&amp;lt;置換前パターン&amp;gt;&lt;/code>&lt;/strong> に一致する文字列を &lt;strong>&lt;code>&amp;lt;置換後パターン&amp;gt;&lt;/code>&lt;/strong> に置換します。
&lt;code>substitute&lt;/code> コマンドは通常、上記のように省略系の &lt;code>s&lt;/code> を使って実行します。&lt;/p>
&lt;p>デフォルトでは、行内で最初に見つかった文字列だけを置換しますが、&lt;strong>&lt;code>&amp;lt;フラグ&amp;gt;&lt;/code>&lt;/strong> 部分に &lt;strong>&lt;code>g&lt;/code>&lt;/strong>（global フラグ）を指定することで、行内のすべての文字列を置換することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="sr">/old/&lt;/span>&lt;span class="nx">new&lt;/span>/ &lt;span class="c">&amp;#34;カレント行の文字列を置換（1 つだけ置換）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="sr">/old/&lt;/span>&lt;span class="nx">new&lt;/span>/&lt;span class="nx">g&lt;/span> &lt;span class="c">&amp;#34;カレント行の文字列を置換（すべて置換）&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>上記のように &lt;code>&amp;lt;行範囲&amp;gt;&lt;/code> の指定を省略した場合は、カレント行のみが置換対象になりますが、そのような使い方はまれでしょう。
ファイル内の全ての行を置換対象にしたい場合は、&lt;code>&amp;lt;行範囲&amp;gt;&lt;/code> として &lt;strong>&lt;code>%&lt;/code>&lt;/strong> を指定します（&lt;strong>&lt;code>1,$&lt;/code>&lt;/strong> としても同様）。
下記の例では、&lt;code>%&lt;/code> の後ろにスペースを入れていますが、このスペースは省略することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>% &lt;span class="nx">s&lt;/span>&lt;span class="sr">/old/&lt;/span>&lt;span class="nx">new&lt;/span>/&lt;span class="nx">g&lt;/span> &lt;span class="c">&amp;#34;ファイル全体の文字列を置換&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>置換対象とする行範囲を指定したい時は、下記のように明示的に &lt;strong>&lt;code>開始行,終了行&lt;/code>&lt;/strong> を指定することもできますし、&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="sr">/old/&lt;/span>&lt;span class="nx">new&lt;/span>/&lt;span class="nx">g&lt;/span> &lt;span class="c">&amp;#34;1～5行目までを置換対象にする&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span>$ &lt;span class="nx">s&lt;/span>&lt;span class="sr">/old/&lt;/span>&lt;span class="nx">new&lt;/span>/&lt;span class="nx">g&lt;/span> &lt;span class="c">&amp;#34;5行目～最終行までを置換対象にする&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>Shift-V&lt;/code>&lt;/strong> で行選択した状態から、&lt;code>:s/old/new/g&lt;/code> と続けて実行することもできます（こちらの方法がオススメ）。
行選択した状態で &lt;code>:&lt;/code> をタイプすると、コマンドの入力欄には下記のように表示されますが、これは行選した択範囲を操作対象としていることを示しています。
そのまま &lt;code>s/old/new/g&lt;/code> と続けて入力すれば OK です。&lt;/p>
&lt;pre tabindex="0">&lt;code>:&amp;#39;&amp;lt;,&amp;#39;&amp;gt;
&lt;/code>&lt;/pre>&lt;h2 id="区切り文字にスラッシュ--以外を使用する">区切り文字にスラッシュ (/) 以外を使用する&lt;/h2>
&lt;p>&lt;code>:s/old/new/g&lt;/code> という置換コマンド自体がスラッシュを含んでいるため、置換対象の文字列にスラッシュが含まれる場合は、下記のようにバックスラッシュを使ったエスケープ処理が必要です（&lt;code>/&lt;/code> ではなく &lt;strong>&lt;code>\/&lt;/code>&lt;/strong> と入力する）。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: /home/aaa を /home/bbb に置換する (1)&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>% &lt;span class="nx">s&lt;/span>&lt;span class="sr">/\/home\/aaa/&lt;/span>\&lt;span class="sr">/home\/bbb/&lt;/span>&lt;span class="nx">g&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>このようなエスケープ処理の煩雑さを防ぐために、&lt;code>substitute&lt;/code> コマンドでは、セパレータ文字列としてスラッシュ以外のほとんどの種類の記号を使用できるようになっています。
下記の例は、セパレータ文字としてスラッシュの代わりにセミコロン (&lt;code>;&lt;/code>) を使用しています。&lt;/p></description></item><item><title>Vim で別ファイルの内容や外部コマンドの出力を挿入する (:read)</title><link>https://maku77.github.io/p/oh8nhyw/</link><pubDate>Thu, 21 Dec 2006 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/oh8nhyw/</guid><description>&lt;h2 id="別ファイルの内容を挿入する">別ファイルの内容を挿入する&lt;/h2>
&lt;p>Vim の &lt;strong>&lt;code>:read&lt;/code>&lt;/strong> コマンド（省略形は &lt;strong>&lt;code>:r&lt;/code>&lt;/strong>）を使用すると、現在カーソルがある行に別のテキストファイルの内容を挿入することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">カレント行に別ファイルの内容を挿入&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="sr">/home/&lt;/span>&lt;span class="nx">maku&lt;/span>/&lt;span class="nx">sample&lt;/span>.&lt;span class="nx">txt&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>行番号を先に指定すれば、任意の位置に挿入することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ファイルの先頭 (0) に別ファイルの内容を挿入&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="sr">/home/&lt;/span>&lt;span class="nx">maku&lt;/span>/&lt;span class="nx">sample&lt;/span>.&lt;span class="nx">txt&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ファイルの末尾 ($) に別ファイルの内容を挿入&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>$ &lt;span class="nx">r&lt;/span> &lt;span class="sr">/home/&lt;/span>&lt;span class="nx">maku&lt;/span>/&lt;span class="nx">sample&lt;/span>.&lt;span class="nx">txt&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="外部コマンドの出力を挿入する">外部コマンドの出力を挿入する&lt;/h2>
&lt;p>&lt;code>:read&lt;/code> コマンドのパラメータとして、ファイル名の代わりに &lt;strong>&lt;code>!コマンド名&lt;/code>&lt;/strong> を指定すると、任意のコマンドの出力結果をカーソル位置に挿入することができます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">ls コマンドの出力をカーソル位置に挿入&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">r&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">ls&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>以下のように挿入位置を指定する方法でも同様のことを行えます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>. &lt;span class="p">!&lt;/span>&lt;span class="nx">ls&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="外部コマンドによるテキストフィルタリング">外部コマンドによるテキストフィルタリング&lt;/h2>
&lt;p>行範囲を指定して外部コマンドを実行すると、その範囲のテキストを外部コマンドの標準入力へ渡すことができます。
指定した範囲のテキストは、外部コマンドの出力結果で置き換えられます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">1 行目から 5 行目までをソートする&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">sort&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>上記のように実行すると、外部コマンドの &lt;code>sort&lt;/code> が実行されます。&lt;/p>
&lt;p>ちなみに、行ソートを行いたいときは、通常は Vim 組み込みの &lt;code>sort&lt;/code> を使用すれば事足ります。
ソートしたい行範囲を &lt;kbd>Shift-V&lt;/kbd> で選択し、次のようにソートを実行できます。&lt;/p>

&lt;figure class="xCodeBlock">

&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">sort&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure></description></item><item><title>Vim のファイル保存コマンド :w、:x の基本</title><link>https://maku77.github.io/p/9pyh4ip/</link><pubDate>Thu, 21 Dec 2006 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/9pyh4ip/</guid><description>&lt;h2 id="ファイル保存の基本-w">ファイル保存の基本 (:w)&lt;/h2>
&lt;p>Vim で編集内容を保存するためのもっとも基本的なコマンドは &lt;strong>&lt;code>:write&lt;/code>&lt;/strong>（省略系は &lt;strong>&lt;code>:w&lt;/code>&lt;/strong>）です。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="c">&amp;#34; 上書き保存&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">file&lt;/span>.&lt;span class="nx">txt&lt;/span> &lt;span class="c">&amp;#34; file.txt という名前で保存&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="p">&amp;gt;&amp;gt;&lt;/span> &lt;span class="nx">file&lt;/span>.&lt;span class="nx">txt&lt;/span> &lt;span class="c">&amp;#34; file.txt に追記保存&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ファイルを保存してついでに閉じる-x">ファイルを保存してついでに閉じる (:x)&lt;/h2>
&lt;p>&lt;code>:w&lt;/code> の代わりに &lt;strong>&lt;code>:x&lt;/code>&lt;/strong> を使用すると、ファイルを保存して、ついでにカレントバッファを閉じることができます。
&lt;code>:wq&lt;/code> でも「保存して閉じる」という操作を同時に行うことができますが、&lt;code>:x&lt;/code> とは若干振る舞いが異なります。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">x&lt;/span> &lt;span class="c">&amp;#34; ファイルが編集されている場合のみ保存してバッファを閉じる&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">wq&lt;/span> &lt;span class="c">&amp;#34; ファイルが編集されていなくても保存してバッファを閉じる&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vim で指定した行範囲を一時的に表示する</title><link>https://maku77.github.io/p/k7r37a7/</link><pubDate>Wed, 20 Dec 2006 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/k7r37a7/</guid><description>&lt;p>Vim エディタ内で下記のようなコマンドを実行すると、指定した行範囲のテキストを一時的に表示することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">行範囲&lt;/span> &lt;span class="nx">p&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>上記のコマンドの代わりに下記のように実行すると、行番号付きで表示することができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">行範囲&lt;/span> #
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">行範囲&lt;/span> &lt;span class="nx">number&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 5 行目から 10 行目までを表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">10&lt;/span> &lt;span class="nx">p&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">10&lt;/span> # &lt;span class="c">&amp;#34;行番号付き&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">10&lt;/span> &lt;span class="nx">nu&lt;/span> &lt;span class="c">&amp;#34;行番号付き&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 20 行目から 5 行下の行までを表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">20&lt;/span>;&lt;span class="p">+&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="nx">p&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">20&lt;/span>;&lt;span class="p">+&lt;/span>&lt;span class="m">5&lt;/span> # &lt;span class="c">&amp;#34;行番号付き&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="m">20&lt;/span>;&lt;span class="p">+&lt;/span>&lt;span class="m">5&lt;/span> &lt;span class="nx">nu&lt;/span> &lt;span class="c">&amp;#34;行番号付き&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: TODO という文字列を含む行をすべて表示&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">g&lt;/span>&lt;span class="sr">/TODO/&lt;/span> &lt;span class="nx">p&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">g&lt;/span>&lt;span class="sr">/TODO/&lt;/span> # &lt;span class="c">&amp;#34;行番号付き&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">:&lt;/span>&lt;span class="nx">g&lt;/span>&lt;span class="sr">/TODO/&lt;/span> &lt;span class="nx">nu&lt;/span> &lt;span class="c">&amp;#34;行番号付き&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;p>プレフィックスの &lt;code>g&lt;/code> を省略すると、一行だけを表示します。&lt;/p></description></item><item><title>Vim で切り取り＆貼り付け操作、レジスタの扱いについて理解する</title><link>https://maku77.github.io/p/fmbya48/</link><pubDate>Wed, 13 Dec 2006 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/fmbya48/</guid><description>&lt;h2 id="切り取りヤンクコピー貼り付けの基本無名レジスタ">切り取り、ヤンク（コピー）、貼り付けの基本【無名レジスタ】&lt;/h2>
&lt;p>&lt;code>d&lt;/code>, &lt;code>x&lt;/code> コマンドなどでテキストを削除したときや、&lt;code>y&lt;/code> コマンドでテキストをヤンクした場合、そのテキストは &lt;strong>無名レジスタ&lt;/strong> &lt;code>&amp;quot;&amp;quot;&lt;/code> に保存されます。
無名レジスタの内容は &lt;code>p&lt;/code>, &lt;code>P&lt;/code> コマンドで貼り付けることができます。&lt;/p>
&lt;h4 id="ノーマルモードでの操作">ノーマルモードでの操作&lt;/h4>
&lt;pre tabindex="0">&lt;code>dd -- カレント行を削除
yy(Y) -- カレント行をヤンク
p -- 貼り付け

D -- カーソル位置から行末までを削除
C -- カーソル位置から行末までを置換（削除して挿入モードへ）
s -- カーソル位置の 1 文字を削除して挿入モードへ
S -- カーソルのある行を削除して挿入モードへ
&lt;/code>&lt;/pre>&lt;h2 id="名前付きレジスタに切り取りヤンクコピー貼り付け">名前付きレジスタに切り取り／ヤンク（コピー）／貼り付け&lt;/h2>
&lt;p>&lt;code>x&lt;/code>, &lt;code>d&lt;/code>, &lt;code>y&lt;/code> などの削除／ヤンクコマンドの前に、&lt;strong>名前付きレジスタ&lt;/strong> を指定すると、そのレジスタにテキストの内容を保存できます。
名前付きレジスタには、&lt;code>&amp;quot;a&lt;/code> から &lt;code>&amp;quot;z&lt;/code> までのいずれかを指定します。
&lt;code>p&lt;/code>, &lt;code>P&lt;/code> コマンドの前に名前付きレジスタを指定すれば、そのレジスタの内容を貼り付けることができます。&lt;/p>
&lt;h4 id="ノーマルモードでの操作-1">ノーマルモードでの操作&lt;/h4>
&lt;pre tabindex="0">&lt;code>&amp;#34;a yy -- カレント行を &amp;#34;a にヤンク（コピー）
&amp;#34;a dd -- カレント行を &amp;#34;a に切り取り
&amp;#34;a 3d -- 3 行を &amp;#34;a に切り取り
&amp;#34;a p -- &amp;#34;a の内容をカーソルの後ろに貼り付け
&amp;#34;a P -- &amp;#34;a の内容をカーソルの前に貼り付け
&lt;/code>&lt;/pre>&lt;p>ex コマンドで同様のことを行う場合は、コマンドの後ろにスペースを入れてからレジスタ名を指定します。&lt;/p></description></item><item><title>Vim で行情報を表示する</title><link>https://maku77.github.io/p/3m53tcz/</link><pubDate>Tue, 12 Dec 2006 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/3m53tcz/</guid><description>&lt;p>Vim エディタ上で下記のようなコマンドを実行すると、行の情報を表示することができます。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>&lt;code>^G&lt;/code>&lt;/strong> &amp;hellip; カレント行の情報を表示する（行番号、ファイル全体の相対位置など）&lt;/li>
&lt;li>&lt;strong>&lt;code>:=&lt;/code>&lt;/strong> &amp;hellip; ファイル全体の行数を表示する&lt;/li>
&lt;li>&lt;strong>&lt;code>:.=&lt;/code>&lt;/strong> &amp;hellip; カレント行の行番号を表示する&lt;/li>
&lt;li>&lt;strong>&lt;code>:/pattern/ =&lt;/code>&lt;/strong> &amp;hellip; パターンに一致する最初の行番号を調べる&lt;/li>
&lt;/ul></description></item><item><title>Vim/Neovim を起動するときに行番号や検索パターンを指定してファイルを開く (+n)</title><link>https://maku77.github.io/p/x8f9e87/</link><pubDate>Tue, 12 Dec 2006 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/x8f9e87/</guid><description>&lt;h2 id="行番号を指定してファイルを開く">行番号を指定してファイルを開く&lt;/h2>
&lt;p>Vim (Neovim) を起動するときに、&lt;strong>&lt;code>+数値&lt;/code>&lt;/strong> オプションを指定すると、カーソルの初期フォーカス行を指定してファイルを開くことができます。
数値を省略して &lt;strong>&lt;code>+&lt;/code>&lt;/strong> のみを指定すると、最終行に移動します。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> vim +100 filename &lt;span class="c1"># ファイルを開いて 100 行目へ移動&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> vim + filename &lt;span class="c1"># ファイルを開いて最終行へ移動&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="検索パターンを指定してファイルを開く">検索パターンを指定してファイルを開く&lt;/h2>
&lt;p>Vim (Neovim) を起動するときに、__&lt;code>+/パターン&lt;/code> オプションを指定すると、指定した正規表現に一致する文字列を含んだ行をフォーカスした状態でファイルを開くことができます。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-console" data-lang="console">&lt;span class="line">&lt;span class="cl">&lt;span class="gp">$&lt;/span> vim +/pattern filename &lt;span class="c1"># ファイルを開いて pattern にヒットする行へ移動&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>このオプションを指定してファイルを開くと、&lt;code>/&lt;/code> コマンドで検索された状態でファイルが開くので、続けて &lt;strong>&lt;code>n&lt;/code>&lt;/strong> キーを押すことで次のヒット位置に移動できます。&lt;/p></description></item><item><title>Vim でカレントファイル内の文字列を検索する (/, ?, *, #)</title><link>https://maku77.github.io/p/u4gw7c3/</link><pubDate>Wed, 06 Dec 2006 00:00:00 +0900</pubDate><guid>https://maku77.github.io/p/u4gw7c3/</guid><description>&lt;h2 id="検索の基本">検索の基本&lt;/h2>
&lt;p>Vim でカレントファイル内の文字列を検索するには、次のような検索コマンドを使用します。&lt;/p>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>入力&lt;/th>
 &lt;th>説明&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>&lt;code>/pattern [Enter]&lt;/code>&lt;/td>
 &lt;td>パターンを検索（順方向）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>?pattern [Enter]&lt;/code>&lt;/td>
 &lt;td>パターンを検索（逆方向）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>n&lt;/code>&lt;/td>
 &lt;td>次の一致箇所にジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>N&lt;/code>&lt;/td>
 &lt;td>前の一致箇所にジャンプ&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>/ [Enter]&lt;/code>&lt;/td>
 &lt;td>同じパターンで再検索（順方向）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>? [Enter]&lt;/code>&lt;/td>
 &lt;td>同じパターンで再検索（逆方向）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>*&lt;/code>&lt;/td>
 &lt;td>カーソル下の単語を後方検索（&lt;code>g*&lt;/code> で部分一致検索）&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>&lt;code>#&lt;/code>&lt;/td>
 &lt;td>カーソル下の単語を前方検索（&lt;code>g#&lt;/code> で部分一致検索）&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="パターンによる検索--">パターンによる検索 (&lt;code>/&lt;/code>, &lt;code>?&lt;/code>)&lt;/h2>
&lt;p>検索パターンでは正規表現を使用できます。&lt;/p>

&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: void で始まる行を検索 ^&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/^&lt;span class="nx">void&lt;/span> &lt;span class="c">&amp;#34; ^ は行頭に一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 0 回以上の繰り返しに一致 *&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">te&lt;/span>* &lt;span class="c">&amp;#34; t, te, tee などに一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 1 回以上の繰り返しに一致 \&amp;#43;&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">te&lt;/span>\&lt;span class="p">+&lt;/span> &lt;span class="c">&amp;#34; te, tee, teee などに一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 0 回あるいは 1 回に一致 \=&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">te&lt;/span>\&lt;span class="p">=&lt;/span> &lt;span class="c">&amp;#34; t あるいは te に一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 任意のアルファベット (A-Za-z) に 1 文字だけ一致 \a&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/\&lt;span class="nx">a&lt;/span>\&lt;span class="nx">a&lt;/span>\&lt;span class="nx">a&lt;/span> &lt;span class="c">&amp;#34; 任意の 3 文字のアルファベットに一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 任意の数字に 1 文字だけ一致 \d&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/\&lt;span class="nx">d&lt;/span>\&lt;span class="nx">d&lt;/span>\&lt;span class="nx">d&lt;/span> &lt;span class="c">&amp;#34; 任意の 3 桁の数字に一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: いずれかの文字に一致 [...]&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/[&lt;span class="nx">Tt&lt;/span>]&lt;span class="nx">he&lt;/span> &lt;span class="c">&amp;#34; The, the を検索 （:set ignorecase しておく手もあり）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">x&lt;/span>[&lt;span class="p">+&lt;/span>*%]&lt;span class="nx">y&lt;/span> &lt;span class="c">&amp;#34; x+y, x*y, x%y を検索&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">x&lt;/span>[\^\&lt;span class="p">-&lt;/span>]&lt;span class="nx">y&lt;/span> &lt;span class="c">&amp;#34; x^y, x-y を検索 （ブラケット式の中の ^ や - はエスケープする）&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 繰り返し回数の指定 \{min,max}&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">a&lt;/span>\{&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">5&lt;/span>} &lt;span class="c">&amp;#34; aaa, aaaa, aaaaa に一致 （aaaaa があれば aaaaa に一致する）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">a&lt;/span>\{&lt;span class="m">-3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">5&lt;/span>} &lt;span class="c">&amp;#34; aaa, aaaa, aaaaa に一致 （aaaaa があっても aaa に一致する）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">a&lt;/span>\{&lt;span class="m">3&lt;/span>&lt;span class="p">,&lt;/span>} &lt;span class="c">&amp;#34; 3 個以上の a に一致&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">a&lt;/span>\{&lt;span class="p">,&lt;/span>&lt;span class="m">3&lt;/span>} &lt;span class="c">&amp;#34; 3 個以下の a に一致&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">a&lt;/span>\{&lt;span class="m">3&lt;/span>} &lt;span class="c">&amp;#34; 3 個の a に一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: グルーピング \(...\)&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/\&lt;span class="p">(&lt;/span>&lt;span class="nx">abc&lt;/span>\&lt;span class="p">)&lt;/span>\&lt;span class="p">+&lt;/span> &lt;span class="c">&amp;#34; abc, abcabc, abcabcabc などに一致&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; \( と \) で囲まれた部分に一致したテキストの繰り返し&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/\&lt;span class="p">(&lt;/span>&lt;span class="nx">ab&lt;/span>\&lt;span class="p">+&lt;/span>&lt;span class="nx">c&lt;/span>\&lt;span class="p">)&lt;/span>\&lt;span class="m">1&lt;/span> &lt;span class="c">&amp;#34; abcabc, abbcabbc などに一致&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; \( と \) で囲まれた部分に一致したテキストを \1 で参照&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: OR 検索（文字列1\|文字列2）&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/&lt;span class="nx">foo&lt;/span>\&lt;span class="p">|&lt;/span>&lt;span class="nx">bar&lt;/span> &lt;span class="c">&amp;#34; foo か bar に一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: print で始まる単語を検索 \&amp;lt;&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/\&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">print&lt;/span> &lt;span class="c">&amp;#34; \&amp;lt; は単語の先頭に一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 単語 word を検索 \&amp;lt; ... \&amp;gt;&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/\&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nx">word&lt;/span>\&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="c">&amp;#34; \&amp;lt; は単語の先頭、\&amp;gt; は単語の末尾に一致&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>


&lt;figure class="xCodeBlock">
&lt;figcaption class="xCodeBlock_title">例: 文字クラスの利用 [: ... :]&lt;/figcaption>
&lt;div class="xCodeBlock_code">&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vim" data-lang="vim">&lt;span class="line">&lt;span class="cl">/^[[:&lt;span class="nx">digit&lt;/span>:]] &lt;span class="c">&amp;#34; 数字で始まる行を検索&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"> &amp;#34; ブラケット式の中の [:digit:] という文字クラスは数字を表す&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/figure>

&lt;h2 id="検索履歴">検索履歴&lt;/h2>
&lt;p>&lt;code>/&lt;/code> や &lt;code>?&lt;/code> による検索モードで、&lt;strong>&lt;code>CTRL-P&lt;/code>&lt;/strong> や &lt;strong>&lt;code>CTRL-N&lt;/code>&lt;/strong>（あるいは上下カーソルキー）を入力すると、検索履歴を表示することができます。
過去に入力した複雑な検索パターンで再検索したいときに便利です。&lt;/p></description></item></channel></rss>